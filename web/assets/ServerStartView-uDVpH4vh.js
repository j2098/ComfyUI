var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{d as defineComponent,a1 as useI18n,ab as ref,c4 as ProgressStatus,m as onMounted,o as openBlock,k as createBlock,M as withCtx,H as createBaseVNode,aE as createTextVNode,X as toDisplayString,j as unref,f as createElementBlock,I as createCommentVNode,N as createVNode,l as script,i as withDirectives,v as vShow,c5 as BaseTerminal,aL as pushScopeId,aM as popScopeId,c6 as electronAPI,_ as _export_sfc}from"./index-UVoFQQg9.js";import{_ as _sfc_main$1}from"./BaseViewTemplate-BQL6pbkU.js";const _hoisted_1={class:"text-2xl font-bold"},_hoisted_2={key:0},_hoisted_3={key:0,class:"flex flex-col items-center gap-4"},_hoisted_4={class:"flex items-center my-4 gap-2"},_sfc_main=defineComponent({__name:"ServerStartView",setup(__props){const electron=electronAPI(),{t}=useI18n(),status=ref(ProgressStatus.INITIAL_STATE),electronVersion=ref("");let xterm;const terminalVisible=ref(!0),updateProgress=__name(({status:newStatus})=>{status.value=newStatus,newStatus===ProgressStatus.ERROR?terminalVisible.value=!1:xterm?.clear()},"updateProgress"),terminalCreated=__name(({terminal,useAutoSize},root)=>{xterm=terminal,useAutoSize(root,!0,!0),electron.onLogMessage(message=>{terminal.write(message)}),terminal.options.cursorBlink=!1,terminal.options.disableStdin=!0,terminal.options.cursorInactiveStyle="block"},"terminalCreated"),reinstall=__name(()=>electron.reinstall(),"reinstall"),reportIssue=__name(()=>{window.open("https://forum.comfy.org/c/v1-feedback/","_blank")},"reportIssue"),openLogs=__name(()=>electron.openLogsFolder(),"openLogs");return onMounted(async()=>{electron.sendReady(),electron.onProgressUpdate(updateProgress),electronVersion.value=await electron.getElectronVersion()}),(_ctx,_cache)=>(openBlock(),createBlock(_sfc_main$1,{dark:"",class:"flex-col"},{default:withCtx(()=>[createBaseVNode("h2",_hoisted_1,[createTextVNode(toDisplayString(unref(t)(`serverStart.process.${status.value}`))+" ",1),status.value===unref(ProgressStatus).ERROR?(openBlock(),createElementBlock("span",_hoisted_2," v"+toDisplayString(electronVersion.value),1)):createCommentVNode("",!0)]),status.value===unref(ProgressStatus).ERROR?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createVNode(unref(script),{icon:"pi pi-flag",severity:"secondary",label:unref(t)("serverStart.reportIssue"),onClick:reportIssue},null,8,["label"]),createVNode(unref(script),{icon:"pi pi-file",severity:"secondary",label:unref(t)("serverStart.openLogs"),onClick:openLogs},null,8,["label"]),createVNode(unref(script),{icon:"pi pi-refresh",label:unref(t)("serverStart.reinstall"),onClick:reinstall},null,8,["label"])]),terminalVisible.value?createCommentVNode("",!0):(openBlock(),createBlock(unref(script),{key:0,icon:"pi pi-search",severity:"secondary",label:unref(t)("serverStart.showTerminal"),onClick:_cache[0]||(_cache[0]=$event=>terminalVisible.value=!0)},null,8,["label"]))])):createCommentVNode("",!0),withDirectives(createVNode(BaseTerminal,{onCreated:terminalCreated},null,512),[[vShow,terminalVisible.value]])]),_:1}))}}),ServerStartView=_export_sfc(_sfc_main,[["__scopeId","data-v-42c1131d"]]);export{ServerStartView as default};
//# sourceMappingURL=ServerStartView-uDVpH4vh.js.map
