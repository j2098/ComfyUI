var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{d as defineComponent,u as useExecutionStore,c as computed,a as useSettingStore,b as useWorkflowStore,e as useTitle,o as openBlock,f as createElementBlock,g as useWorkspaceStore,w as watchEffect,h as app,r as resolveDirective,i as withDirectives,v as vShow,j as unref,k as createBlock,n as normalizeStyle,s as showNativeMenu,l as script$d,_ as _export_sfc,m as onMounted,p as onBeforeUnmount,B as BaseStyle,q as script$e,t as getWidth,x as getHeight,y as getOuterWidth,z as getOuterHeight,A as getVNodeProp,C as isArray,D as mergeProps,F as Fragment,E as renderList,G as resolveDynamicComponent,H as createBaseVNode,I as createCommentVNode,J as renderSlot,K as useSidebarTabStore,L as useBottomPanelStore,M as withCtx,N as createVNode,O as getAttribute,P as findSingle,Q as focus,R as equals,S as Ripple,T as normalizeClass,U as getOffset,V as script$f,W as script$g,X as toDisplayString,Y as script$h,Z as markRaw,$ as defineStore,a0 as shallowRef,a1 as useI18n,a2 as useCommandStore,a3 as LiteGraph,a4 as useColorPaletteStore,a5 as watch,a6 as useNodeDefStore,a7 as BadgePosition,a8 as LGraphBadge,a9 as _,aa as NodeBadgeMode,ab as ref,ac as useEventListener,ad as nextTick,ae as st,af as normalizeI18nKey,ag as LGraphGroup,ah as LGraphNode,ai as EditableText,aj as isNotEmpty,ak as UniqueComponentId,al as ZIndex,am as resolveFieldData,an as OverlayEventBus,ao as isEmpty,ap as addStyle,aq as relativePosition,ar as absolutePosition,as as ConnectedOverlayScrollHandler,at as isTouchDevice,au as findLastIndex,av as script$i,aw as script$j,ax as script$k,ay as script$l,az as script$m,aA as script$n,aB as resolveComponent,aC as Transition,aD as createSlots,aE as createTextVNode,aF as useNodeFrequencyStore,aG as useNodeBookmarkStore,aH as highlightQuery,aI as script$o,aJ as formatNumberWithSuffix,aK as NodeSourceType,aL as pushScopeId,aM as popScopeId,aN as NodePreview,aO as NodeSearchFilter,aP as script$p,aQ as SearchFilterChip,aR as useLitegraphService,aS as storeToRefs,aT as isRef,aU as toRaw,aV as LinkReleaseTriggerAction,aW as script$q,aX as useUserStore,aY as useDialogStore,aZ as SettingDialogHeader,a_ as SettingDialogContent,a$ as useKeybindingStore,b0 as Teleport,b1 as usePragmaticDraggable,b2 as usePragmaticDroppable,b3 as withModifiers,b4 as useWorkflowService,b5 as script$r,b6 as script$s,b7 as script$t,b8 as LinkMarkerShape,b9 as useModelToNodeStore,ba as isEmbedded,bb as CanvasPointer,bc as IS_CONTROL_WIDGET,bd as updateControlWidgetLabel,be as useColorPaletteService,bf as setStorageValue,bg as api,bh as LGraph,bi as LLink,bj as DragAndScale,bk as LGraphCanvas,bl as ContextMenu,bm as ChangeTracker,bn as FlowConfig,bo as ComfyNodeDefImpl,bp as ComfyModelDef,bq as script$u,br as script$v,bs as script$w,bt as script$x,bu as script$y,bv as normalizeProps,bw as ToastEventBus,bx as setAttribute,by as TransitionGroup,bz as useToast,bA as useToastStore,bB as resolve,bC as nestedPosition,bD as script$z,bE as isPrintableCharacter,bF as useQueueSettingsStore,bG as script$A,bH as useQueuePendingTaskCountStore,bI as useLocalStorage,bJ as useDraggable,bK as watchDebounced,bL as inject,bM as useElementBounding,bN as lodashExports,bO as useEventBus,bP as script$C,bQ as guardReactiveProps,bR as useMenuItemStore,bS as provide,bT as script$E,bU as useDialogService,bV as LGraphEventMode,bW as useQueueStore,bX as DEFAULT_DARK_COLOR_PALETTE,bY as DEFAULT_LIGHT_COLOR_PALETTE,bZ as i18n,b_ as useErrorHandling,b$ as useModelStore}from"./index-DS26FKwS.js";import{s as script$B}from"./index-DcbEu8dD.js";import{s as script$D}from"./index-DHKQH5Ee.js";import{u as useKeybindingService}from"./keybindingService-MSnqsc0r.js";import{u as useServerConfigStore}from"./serverConfigStore-iXoG1DkF.js";import"./index-D2KQN5Du.js";const DEFAULT_TITLE="ComfyUI",TITLE_SUFFIX=" - ComfyUI",_sfc_main$u=defineComponent({__name:"BrowserTabTitle",setup(__props){const executionStore=useExecutionStore(),executionText=computed(()=>executionStore.isIdle?"":`[${executionStore.executionProgress}%]`),settingStore=useSettingStore(),betaMenuEnabled=computed(()=>settingStore.get("Comfy.UseNewMenu")!=="Disabled"),workflowStore=useWorkflowStore(),isUnsavedText=computed(()=>workflowStore.activeWorkflow?.isModified||!workflowStore.activeWorkflow?.isPersisted?" *":""),workflowNameText=computed(()=>{const workflowName=workflowStore.activeWorkflow?.filename;return workflowName?isUnsavedText.value+workflowName+TITLE_SUFFIX:DEFAULT_TITLE}),nodeExecutionTitle=computed(()=>executionStore.executingNode&&executionStore.executingNodeProgress?`${executionText.value}[${executionStore.executingNodeProgress}%] ${executionStore.executingNode.type}`:""),workflowTitle=computed(()=>executionText.value+(betaMenuEnabled.value?workflowNameText.value:DEFAULT_TITLE)),title=computed(()=>nodeExecutionTitle.value||workflowTitle.value);return useTitle(title),(_ctx,_cache)=>(openBlock(),createElementBlock("div"))}}),_sfc_main$t=defineComponent({__name:"MenuHamburger",setup(__props){const workspaceState=useWorkspaceStore(),settingStore=useSettingStore(),exitFocusMode=__name(()=>{workspaceState.focusMode=!1},"exitFocusMode");watchEffect(()=>{settingStore.get("Comfy.UseNewMenu")==="Disabled"&&(workspaceState.focusMode?app.ui.menuContainer.style.display="none":app.ui.menuContainer.style.display="block")});const menuSetting=computed(()=>settingStore.get("Comfy.UseNewMenu")),positionCSS=computed(()=>menuSetting.value==="Bottom"?{bottom:"0px",right:"0px"}:{top:"0px",right:"0px"});return(_ctx,_cache)=>{const _directive_tooltip=resolveDirective("tooltip");return withDirectives((openBlock(),createBlock(unref(script$d),{class:"comfy-menu-hamburger",style:normalizeStyle(positionCSS.value),icon:"pi pi-bars",severity:"secondary",text:"",size:"large","aria-label":_ctx.$t("menu.showMenu"),"aria-live":"assertive",onClick:exitFocusMode,onContextmenu:unref(showNativeMenu)},null,8,["style","aria-label","onContextmenu"])),[[vShow,unref(workspaceState).focusMode],[_directive_tooltip,{value:_ctx.$t("menu.showMenu"),showDelay:300}]])}}}),MenuHamburger=_export_sfc(_sfc_main$t,[["__scopeId","data-v-150764f0"]]),_sfc_main$s=defineComponent({__name:"UnloadWindowConfirmDialog",setup(__props){const settingStore=useSettingStore(),handleBeforeUnload=__name(event=>{if(settingStore.get("Comfy.Window.UnloadConfirmation"))return event.preventDefault(),!0},"handleBeforeUnload");return onMounted(()=>{window.addEventListener("beforeunload",handleBeforeUnload)}),onBeforeUnmount(()=>{window.removeEventListener("beforeunload",handleBeforeUnload)}),(_ctx,_cache)=>(openBlock(),createElementBlock("div"))}});var theme$7=__name(function(_ref){var dt=_ref.dt;return`
.p-splitter {
    display: flex;
    flex-wrap: nowrap;
    border: 1px solid `.concat(dt("splitter.border.color"),`;
    background: `).concat(dt("splitter.background"),`;
    border-radius: `).concat(dt("border.radius.md"),`;
    color: `).concat(dt("splitter.color"),`;
}

.p-splitter-vertical {
    flex-direction: column;
}

.p-splitter-gutter {
    flex-grow: 0;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
    background: `).concat(dt("splitter.gutter.background"),`;
}

.p-splitter-gutter-handle {
    border-radius: `).concat(dt("splitter.handle.border.radius"),`;
    background: `).concat(dt("splitter.handle.background"),`;
    transition: outline-color `).concat(dt("splitter.transition.duration"),", box-shadow ").concat(dt("splitter.transition.duration"),`;
    outline-color: transparent;
}

.p-splitter-gutter-handle:focus-visible {
    box-shadow: `).concat(dt("splitter.handle.focus.ring.shadow"),`;
    outline: `).concat(dt("splitter.handle.focus.ring.width")," ").concat(dt("splitter.handle.focus.ring.style")," ").concat(dt("splitter.handle.focus.ring.color"),`;
    outline-offset: `).concat(dt("splitter.handle.focus.ring.offset"),`;
}

.p-splitter-horizontal.p-splitter-resizing {
    cursor: col-resize;
    user-select: none;
}

.p-splitter-vertical.p-splitter-resizing {
    cursor: row-resize;
    user-select: none;
}

.p-splitter-horizontal > .p-splitter-gutter > .p-splitter-gutter-handle {
    height: `).concat(dt("splitter.handle.size"),`;
    width: 100%;
}

.p-splitter-vertical > .p-splitter-gutter > .p-splitter-gutter-handle {
    width: `).concat(dt("splitter.handle.size"),`;
    height: 100%;
}

.p-splitter-horizontal > .p-splitter-gutter {
    cursor: col-resize;
}

.p-splitter-vertical > .p-splitter-gutter {
    cursor: row-resize;
}

.p-splitterpanel {
    flex-grow: 1;
    overflow: hidden;
}

.p-splitterpanel-nested {
    display: flex;
}

.p-splitterpanel .p-splitter {
    flex-grow: 1;
    border: 0 none;
}
`)},"theme"),classes$a={root:__name(function(_ref2){var props=_ref2.props;return["p-splitter p-component","p-splitter-"+props.layout]},"root"),gutter:"p-splitter-gutter",gutterHandle:"p-splitter-gutter-handle"},inlineStyles$4={root:__name(function(_ref3){var props=_ref3.props;return[{display:"flex","flex-wrap":"nowrap"},props.layout==="vertical"?{"flex-direction":"column"}:""]},"root")},SplitterStyle=BaseStyle.extend({name:"splitter",theme:theme$7,classes:classes$a,inlineStyles:inlineStyles$4}),script$1$a={name:"BaseSplitter",extends:script$e,props:{layout:{type:String,default:"horizontal"},gutterSize:{type:Number,default:4},stateKey:{type:String,default:null},stateStorage:{type:String,default:"session"},step:{type:Number,default:5}},style:SplitterStyle,provide:__name(function(){return{$pcSplitter:this,$parentInstance:this}},"provide")};function _toConsumableArray$2(r){return _arrayWithoutHoles$2(r)||_iterableToArray$2(r)||_unsupportedIterableToArray$2(r)||_nonIterableSpread$2()}__name(_toConsumableArray$2,"_toConsumableArray$2");function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}__name(_nonIterableSpread$2,"_nonIterableSpread$2");function _unsupportedIterableToArray$2(r,a){if(r){if(typeof r=="string")return _arrayLikeToArray$2(r,a);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$2(r,a):void 0}}__name(_unsupportedIterableToArray$2,"_unsupportedIterableToArray$2");function _iterableToArray$2(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}__name(_iterableToArray$2,"_iterableToArray$2");function _arrayWithoutHoles$2(r){if(Array.isArray(r))return _arrayLikeToArray$2(r)}__name(_arrayWithoutHoles$2,"_arrayWithoutHoles$2");function _arrayLikeToArray$2(r,a){(a==null||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}__name(_arrayLikeToArray$2,"_arrayLikeToArray$2");var script$c={name:"Splitter",extends:script$1$a,inheritAttrs:!1,emits:["resizestart","resizeend","resize"],dragging:!1,mouseMoveListener:null,mouseUpListener:null,touchMoveListener:null,touchEndListener:null,size:null,gutterElement:null,startPos:null,prevPanelElement:null,nextPanelElement:null,nextPanelSize:null,prevPanelSize:null,panelSizes:null,prevPanelIndex:null,timer:null,data:__name(function(){return{prevSize:null}},"data"),mounted:__name(function(){var _this=this;if(this.panels&&this.panels.length){var initialized=!1;if(this.isStateful()&&(initialized=this.restoreState()),!initialized){var children=_toConsumableArray$2(this.$el.children).filter(function(child){return child.getAttribute("data-pc-name")==="splitterpanel"}),_panelSizes=[];this.panels.map(function(panel,i){var panelInitialSize=panel.props&&panel.props.size?panel.props.size:null,panelSize=panelInitialSize||100/_this.panels.length;_panelSizes[i]=panelSize,children[i].style.flexBasis="calc("+panelSize+"% - "+(_this.panels.length-1)*_this.gutterSize+"px)"}),this.panelSizes=_panelSizes,this.prevSize=parseFloat(_panelSizes[0]).toFixed(4)}}},"mounted"),beforeUnmount:__name(function(){this.clear(),this.unbindMouseListeners()},"beforeUnmount"),methods:{isSplitterPanel:__name(function(child){return child.type.name==="SplitterPanel"},"isSplitterPanel"),onResizeStart:__name(function(event,index,isKeyDown){this.gutterElement=event.currentTarget||event.target.parentElement,this.size=this.horizontal?getWidth(this.$el):getHeight(this.$el),isKeyDown||(this.dragging=!0,this.startPos=this.layout==="horizontal"?event.pageX||event.changedTouches[0].pageX:event.pageY||event.changedTouches[0].pageY),this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,isKeyDown?(this.prevPanelSize=this.horizontal?getOuterWidth(this.prevPanelElement,!0):getOuterHeight(this.prevPanelElement,!0),this.nextPanelSize=this.horizontal?getOuterWidth(this.nextPanelElement,!0):getOuterHeight(this.nextPanelElement,!0)):(this.prevPanelSize=100*(this.horizontal?getOuterWidth(this.prevPanelElement,!0):getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal?getOuterWidth(this.nextPanelElement,!0):getOuterHeight(this.nextPanelElement,!0))/this.size),this.prevPanelIndex=index,this.$emit("resizestart",{originalEvent:event,sizes:this.panelSizes}),this.$refs.gutter[index].setAttribute("data-p-gutter-resizing",!0),this.$el.setAttribute("data-p-resizing",!0)},"onResizeStart"),onResize:__name(function(event,step,isKeyDown){var newPos,newPrevPanelSize,newNextPanelSize;isKeyDown?this.horizontal?(newPrevPanelSize=100*(this.prevPanelSize+step)/this.size,newNextPanelSize=100*(this.nextPanelSize-step)/this.size):(newPrevPanelSize=100*(this.prevPanelSize-step)/this.size,newNextPanelSize=100*(this.nextPanelSize+step)/this.size):(this.horizontal?newPos=event.pageX*100/this.size-this.startPos*100/this.size:newPos=event.pageY*100/this.size-this.startPos*100/this.size,newPrevPanelSize=this.prevPanelSize+newPos,newNextPanelSize=this.nextPanelSize-newPos),this.validateResize(newPrevPanelSize,newNextPanelSize)&&(this.prevPanelElement.style.flexBasis="calc("+newPrevPanelSize+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+newNextPanelSize+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.panelSizes[this.prevPanelIndex]=newPrevPanelSize,this.panelSizes[this.prevPanelIndex+1]=newNextPanelSize,this.prevSize=parseFloat(newPrevPanelSize).toFixed(4)),this.$emit("resize",{originalEvent:event,sizes:this.panelSizes})},"onResize"),onResizeEnd:__name(function(event){this.isStateful()&&this.saveState(),this.$emit("resizeend",{originalEvent:event,sizes:this.panelSizes}),this.$refs.gutter.forEach(function(gutter){return gutter.setAttribute("data-p-gutter-resizing",!1)}),this.$el.setAttribute("data-p-resizing",!1),this.clear()},"onResizeEnd"),repeat:__name(function(event,index,step){this.onResizeStart(event,index,!0),this.onResize(event,step,!0)},"repeat"),setTimer:__name(function(event,index,step){var _this2=this;this.timer||(this.timer=setInterval(function(){_this2.repeat(event,index,step)},40))},"setTimer"),clearTimer:__name(function(){this.timer&&(clearInterval(this.timer),this.timer=null)},"clearTimer"),onGutterKeyUp:__name(function(){this.clearTimer(),this.onResizeEnd()},"onGutterKeyUp"),onGutterKeyDown:__name(function(event,index){switch(event.code){case"ArrowLeft":{this.layout==="horizontal"&&this.setTimer(event,index,this.step*-1),event.preventDefault();break}case"ArrowRight":{this.layout==="horizontal"&&this.setTimer(event,index,this.step),event.preventDefault();break}case"ArrowDown":{this.layout==="vertical"&&this.setTimer(event,index,this.step*-1),event.preventDefault();break}case"ArrowUp":{this.layout==="vertical"&&this.setTimer(event,index,this.step),event.preventDefault();break}}},"onGutterKeyDown"),onGutterMouseDown:__name(function(event,index){this.onResizeStart(event,index),this.bindMouseListeners()},"onGutterMouseDown"),onGutterTouchStart:__name(function(event,index){this.onResizeStart(event,index),this.bindTouchListeners(),event.preventDefault()},"onGutterTouchStart"),onGutterTouchMove:__name(function(event){this.onResize(event),event.preventDefault()},"onGutterTouchMove"),onGutterTouchEnd:__name(function(event){this.onResizeEnd(event),this.unbindTouchListeners(),event.preventDefault()},"onGutterTouchEnd"),bindMouseListeners:__name(function(){var _this3=this;this.mouseMoveListener||(this.mouseMoveListener=function(event){return _this3.onResize(event)},document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=function(event){_this3.onResizeEnd(event),_this3.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))},"bindMouseListeners"),bindTouchListeners:__name(function(){var _this4=this;this.touchMoveListener||(this.touchMoveListener=function(event){return _this4.onResize(event.changedTouches[0])},document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=function(event){_this4.resizeEnd(event),_this4.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))},"bindTouchListeners"),validateResize:__name(function(newPrevPanelSize,newNextPanelSize){if(newPrevPanelSize>100||newPrevPanelSize<0||newNextPanelSize>100||newNextPanelSize<0)return!1;var prevPanelMinSize=getVNodeProp(this.panels[this.prevPanelIndex],"minSize");if(this.panels[this.prevPanelIndex].props&&prevPanelMinSize&&prevPanelMinSize>newPrevPanelSize)return!1;var newPanelMinSize=getVNodeProp(this.panels[this.prevPanelIndex+1],"minSize");return!(this.panels[this.prevPanelIndex+1].props&&newPanelMinSize&&newPanelMinSize>newNextPanelSize)},"validateResize"),unbindMouseListeners:__name(function(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)},"unbindMouseListeners"),unbindTouchListeners:__name(function(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)},"unbindTouchListeners"),clear:__name(function(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null},"clear"),isStateful:__name(function(){return this.stateKey!=null},"isStateful"),getStorage:__name(function(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},"getStorage"),saveState:__name(function(){isArray(this.panelSizes)&&this.getStorage().setItem(this.stateKey,JSON.stringify(this.panelSizes))},"saveState"),restoreState:__name(function(){var _this5=this,storage=this.getStorage(),stateString=storage.getItem(this.stateKey);if(stateString){this.panelSizes=JSON.parse(stateString);var children=_toConsumableArray$2(this.$el.children).filter(function(child){return child.getAttribute("data-pc-name")==="splitterpanel"});return children.forEach(function(child,i){child.style.flexBasis="calc("+_this5.panelSizes[i]+"% - "+(_this5.panels.length-1)*_this5.gutterSize+"px)"}),!0}return!1},"restoreState")},computed:{panels:__name(function(){var _this6=this,panels2=[];return this.$slots.default().forEach(function(child){_this6.isSplitterPanel(child)?panels2.push(child):child.children instanceof Array&&child.children.forEach(function(nestedChild){_this6.isSplitterPanel(nestedChild)&&panels2.push(nestedChild)})}),panels2},"panels"),gutterStyle:__name(function(){return this.horizontal?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}},"gutterStyle"),horizontal:__name(function(){return this.layout==="horizontal"},"horizontal"),getPTOptions:__name(function(){var _this$$parentInstance;return{context:{nested:(_this$$parentInstance=this.$parentInstance)===null||_this$$parentInstance===void 0?void 0:_this$$parentInstance.nestedState}}},"getPTOptions")}},_hoisted_1$p=["onMousedown","onTouchstart","onTouchmove","onTouchend"],_hoisted_2$j=["aria-orientation","aria-valuenow","onKeydown"];function render$j(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createElementBlock("div",mergeProps({class:_ctx.cx("root"),style:_ctx.sx("root"),"data-p-resizing":!1},_ctx.ptmi("root",$options.getPTOptions)),[(openBlock(!0),createElementBlock(Fragment,null,renderList($options.panels,function(panel,i){return openBlock(),createElementBlock(Fragment,{key:i},[(openBlock(),createBlock(resolveDynamicComponent(panel),{tabindex:"-1"})),i!==$options.panels.length-1?(openBlock(),createElementBlock("div",mergeProps({key:0,ref_for:!0,ref:"gutter",class:_ctx.cx("gutter"),role:"separator",tabindex:"-1",onMousedown:__name(function($event){return $options.onGutterMouseDown($event,i)},"onMousedown"),onTouchstart:__name(function($event){return $options.onGutterTouchStart($event,i)},"onTouchstart"),onTouchmove:__name(function($event){return $options.onGutterTouchMove($event,i)},"onTouchmove"),onTouchend:__name(function($event){return $options.onGutterTouchEnd($event,i)},"onTouchend"),"data-p-gutter-resizing":!1},_ctx.ptm("gutter")),[createBaseVNode("div",mergeProps({class:_ctx.cx("gutterHandle"),tabindex:"0",style:[$options.gutterStyle],"aria-orientation":_ctx.layout,"aria-valuenow":$data.prevSize,onKeyup:_cache[0]||(_cache[0]=function(){return $options.onGutterKeyUp&&$options.onGutterKeyUp.apply($options,arguments)}),onKeydown:__name(function($event){return $options.onGutterKeyDown($event,i)},"onKeydown"),ref_for:!0},_ctx.ptm("gutterHandle")),null,16,_hoisted_2$j)],16,_hoisted_1$p)):createCommentVNode("",!0)],64)}),128))],16)}__name(render$j,"render$j");script$c.render=render$j;var classes$9={root:__name(function(_ref){var instance=_ref.instance;return["p-splitterpanel",{"p-splitterpanel-nested":instance.isNested}]},"root")},SplitterPanelStyle=BaseStyle.extend({name:"splitterpanel",classes:classes$9}),script$1$9={name:"BaseSplitterPanel",extends:script$e,props:{size:{type:Number,default:null},minSize:{type:Number,default:null}},style:SplitterPanelStyle,provide:__name(function(){return{$pcSplitterPanel:this,$parentInstance:this}},"provide")},script$b={name:"SplitterPanel",extends:script$1$9,inheritAttrs:!1,data:__name(function(){return{nestedState:null}},"data"),computed:{isNested:__name(function(){var _this=this;return this.$slots.default().some(function(child){return _this.nestedState=child.type.name==="Splitter"?!0:null,_this.nestedState})},"isNested"),getPTOptions:__name(function(){return{context:{nested:this.isNested}}},"getPTOptions")}};function render$i(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createElementBlock("div",mergeProps({ref:"container",class:_ctx.cx("root")},_ctx.ptmi("root",$options.getPTOptions)),[renderSlot(_ctx.$slots,"default")],16)}__name(render$i,"render$i");script$b.render=render$i;const _sfc_main$r=defineComponent({__name:"LiteGraphCanvasSplitterOverlay",setup(__props){const settingStore=useSettingStore(),sidebarLocation=computed(()=>settingStore.get("Comfy.Sidebar.Location")),sidebarPanelVisible=computed(()=>useSidebarTabStore().activeSidebarTab!==null),bottomPanelVisible=computed(()=>useBottomPanelStore().bottomPanelVisible),activeSidebarTabId=computed(()=>useSidebarTabStore().activeSidebarTabId);return(_ctx,_cache)=>(openBlock(),createBlock(unref(script$c),{class:"splitter-overlay-root splitter-overlay","pt:gutter":sidebarPanelVisible.value?"":"hidden",key:activeSidebarTabId.value,stateKey:activeSidebarTabId.value,stateStorage:"local"},{default:withCtx(()=>[sidebarLocation.value==="left"?withDirectives((openBlock(),createBlock(unref(script$b),{key:0,class:"side-bar-panel",minSize:10,size:20},{default:withCtx(()=>[renderSlot(_ctx.$slots,"side-bar-panel",{},void 0,!0)]),_:3},512)),[[vShow,sidebarPanelVisible.value]]):createCommentVNode("",!0),createVNode(unref(script$b),{size:100},{default:withCtx(()=>[createVNode(unref(script$c),{class:"splitter-overlay max-w-full",layout:"vertical","pt:gutter":bottomPanelVisible.value?"":"hidden",stateKey:"bottom-panel-splitter",stateStorage:"local"},{default:withCtx(()=>[createVNode(unref(script$b),{class:"graph-canvas-panel relative"},{default:withCtx(()=>[renderSlot(_ctx.$slots,"graph-canvas-panel",{},void 0,!0)]),_:3}),withDirectives(createVNode(unref(script$b),{class:"bottom-panel"},{default:withCtx(()=>[renderSlot(_ctx.$slots,"bottom-panel",{},void 0,!0)]),_:3},512),[[vShow,bottomPanelVisible.value]])]),_:3},8,["pt:gutter"])]),_:3}),sidebarLocation.value==="right"?withDirectives((openBlock(),createBlock(unref(script$b),{key:1,class:"side-bar-panel",minSize:10,size:20},{default:withCtx(()=>[renderSlot(_ctx.$slots,"side-bar-panel",{},void 0,!0)]),_:3},512)),[[vShow,sidebarPanelVisible.value]]):createCommentVNode("",!0)]),_:3},8,["pt:gutter","stateKey"]))}}),LiteGraphCanvasSplitterOverlay=_export_sfc(_sfc_main$r,[["__scopeId","data-v-e50caa15"]]);var classes$8={root:__name(function(_ref){var instance=_ref.instance,props=_ref.props;return["p-tab",{"p-tab-active":instance.active,"p-disabled":props.disabled}]},"root")},TabStyle=BaseStyle.extend({name:"tab",classes:classes$8}),script$1$8={name:"BaseTab",extends:script$e,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:TabStyle,provide:__name(function(){return{$pcTab:this,$parentInstance:this}},"provide")},script$a={name:"Tab",extends:script$1$8,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:__name(function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},"onFocus"),onClick:__name(function(){this.changeActiveValue()},"onClick"),onKeydown:__name(function(event){switch(event.code){case"ArrowRight":this.onArrowRightKey(event);break;case"ArrowLeft":this.onArrowLeftKey(event);break;case"Home":this.onHomeKey(event);break;case"End":this.onEndKey(event);break;case"PageDown":this.onPageDownKey(event);break;case"PageUp":this.onPageUpKey(event);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(event);break}},"onKeydown"),onArrowRightKey:__name(function(event){var nextTab=this.findNextTab(event.currentTarget);nextTab?this.changeFocusedTab(event,nextTab):this.onHomeKey(event),event.preventDefault()},"onArrowRightKey"),onArrowLeftKey:__name(function(event){var prevTab=this.findPrevTab(event.currentTarget);prevTab?this.changeFocusedTab(event,prevTab):this.onEndKey(event),event.preventDefault()},"onArrowLeftKey"),onHomeKey:__name(function(event){var firstTab=this.findFirstTab();this.changeFocusedTab(event,firstTab),event.preventDefault()},"onHomeKey"),onEndKey:__name(function(event){var lastTab=this.findLastTab();this.changeFocusedTab(event,lastTab),event.preventDefault()},"onEndKey"),onPageDownKey:__name(function(event){this.scrollInView(this.findLastTab()),event.preventDefault()},"onPageDownKey"),onPageUpKey:__name(function(event){this.scrollInView(this.findFirstTab()),event.preventDefault()},"onPageUpKey"),onEnterKey:__name(function(event){this.changeActiveValue(),event.preventDefault()},"onEnterKey"),findNextTab:__name(function(tabElement){var selfCheck=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,element=selfCheck?tabElement:tabElement.nextElementSibling;return element?getAttribute(element,"data-p-disabled")||getAttribute(element,"data-pc-section")==="inkbar"?this.findNextTab(element):findSingle(element,'[data-pc-name="tab"]'):null},"findNextTab"),findPrevTab:__name(function(tabElement){var selfCheck=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,element=selfCheck?tabElement:tabElement.previousElementSibling;return element?getAttribute(element,"data-p-disabled")||getAttribute(element,"data-pc-section")==="inkbar"?this.findPrevTab(element):findSingle(element,'[data-pc-name="tab"]'):null},"findPrevTab"),findFirstTab:__name(function(){return this.findNextTab(this.$pcTabList.$refs.content.firstElementChild,!0)},"findFirstTab"),findLastTab:__name(function(){return this.findPrevTab(this.$pcTabList.$refs.content.lastElementChild,!0)},"findLastTab"),changeActiveValue:__name(function(){this.$pcTabs.updateValue(this.value)},"changeActiveValue"),changeFocusedTab:__name(function(event,element){focus(element),this.scrollInView(element)},"changeFocusedTab"),scrollInView:__name(function(element){var _element$scrollIntoVi;element==null||(_element$scrollIntoVi=element.scrollIntoView)===null||_element$scrollIntoVi===void 0||_element$scrollIntoVi.call(element,{block:"nearest"})},"scrollInView")},computed:{active:__name(function(){var _this$$pcTabs;return equals((_this$$pcTabs=this.$pcTabs)===null||_this$$pcTabs===void 0?void 0:_this$$pcTabs.d_value,this.value)},"active"),id:__name(function(){var _this$$pcTabs2;return"".concat((_this$$pcTabs2=this.$pcTabs)===null||_this$$pcTabs2===void 0?void 0:_this$$pcTabs2.id,"_tab_").concat(this.value)},"id"),ariaControls:__name(function(){var _this$$pcTabs3;return"".concat((_this$$pcTabs3=this.$pcTabs)===null||_this$$pcTabs3===void 0?void 0:_this$$pcTabs3.id,"_tabpanel_").concat(this.value)},"ariaControls"),attrs:__name(function(){return mergeProps(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},"attrs"),asAttrs:__name(function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},"asAttrs"),a11yAttrs:__name(function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},"a11yAttrs"),ptParams:__name(function(){return{context:{active:this.active}}},"ptParams")},directives:{ripple:Ripple}};function render$h(_ctx,_cache,$props,$setup,$data,$options){var _directive_ripple=resolveDirective("ripple");return _ctx.asChild?renderSlot(_ctx.$slots,"default",{key:1,class:normalizeClass(_ctx.cx("root")),active:$options.active,a11yAttrs:$options.a11yAttrs,onClick:$options.onClick}):withDirectives((openBlock(),createBlock(resolveDynamicComponent(_ctx.as),mergeProps({key:0,class:_ctx.cx("root"),onClick:$options.onClick},$options.attrs),{default:withCtx(function(){return[renderSlot(_ctx.$slots,"default")]}),_:3},16,["class","onClick"])),[[_directive_ripple]])}__name(render$h,"render$h");script$a.render=render$h;var classes$7={root:"p-tablist",content:__name(function(_ref){var instance=_ref.instance;return["p-tablist-content",{"p-tablist-viewport":instance.$pcTabs.scrollable}]},"content"),tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},TabListStyle=BaseStyle.extend({name:"tablist",classes:classes$7}),script$1$7={name:"BaseTabList",extends:script$e,props:{},style:TabListStyle,provide:__name(function(){return{$pcTabList:this,$parentInstance:this}},"provide")},script$9={name:"TabList",extends:script$1$7,inheritAttrs:!1,inject:["$pcTabs"],data:__name(function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},"data"),resizeObserver:void 0,watch:{showNavigators:__name(function(newValue){newValue?this.bindResizeObserver():this.unbindResizeObserver()},"showNavigators"),activeValue:{flush:"post",handler:__name(function(){this.updateInkBar()},"handler")}},mounted:__name(function(){var _this=this;this.$nextTick(function(){_this.updateInkBar()}),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},"mounted"),updated:__name(function(){this.showNavigators&&this.updateButtonState()},"updated"),beforeUnmount:__name(function(){this.unbindResizeObserver()},"beforeUnmount"),methods:{onScroll:__name(function(event){this.showNavigators&&this.updateButtonState(),event.preventDefault()},"onScroll"),onPrevButtonClick:__name(function(){var content2=this.$refs.content,width=getWidth(content2),pos=content2.scrollLeft-width;content2.scrollLeft=pos<=0?0:pos},"onPrevButtonClick"),onNextButtonClick:__name(function(){var content2=this.$refs.content,width=getWidth(content2)-this.getVisibleButtonWidths(),pos=content2.scrollLeft+width,lastPos=content2.scrollWidth-width;content2.scrollLeft=pos>=lastPos?lastPos:pos},"onNextButtonClick"),bindResizeObserver:__name(function(){var _this2=this;this.resizeObserver=new ResizeObserver(function(){return _this2.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},"bindResizeObserver"),unbindResizeObserver:__name(function(){var _this$resizeObserver;(_this$resizeObserver=this.resizeObserver)===null||_this$resizeObserver===void 0||_this$resizeObserver.unobserve(this.$refs.list),this.resizeObserver=void 0},"unbindResizeObserver"),updateInkBar:__name(function(){var _this$$refs=this.$refs,content2=_this$$refs.content,inkbar=_this$$refs.inkbar,tabs=_this$$refs.tabs,activeTab=findSingle(content2,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(inkbar.style.height=getOuterHeight(activeTab)+"px",inkbar.style.top=getOffset(activeTab).top-getOffset(tabs).top+"px"):(inkbar.style.width=getOuterWidth(activeTab)+"px",inkbar.style.left=getOffset(activeTab).left-getOffset(tabs).left+"px")},"updateInkBar"),updateButtonState:__name(function(){var _this$$refs2=this.$refs,list=_this$$refs2.list,content2=_this$$refs2.content,scrollLeft=content2.scrollLeft,scrollTop=content2.scrollTop,scrollWidth=content2.scrollWidth,scrollHeight=content2.scrollHeight,offsetWidth=content2.offsetWidth,offsetHeight=content2.offsetHeight,_ref=[getWidth(content2),getHeight(content2)],width=_ref[0],height=_ref[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=scrollTop!==0,this.isNextButtonEnabled=list.offsetHeight>=offsetHeight&&parseInt(scrollTop)!==scrollHeight-height):(this.isPrevButtonEnabled=scrollLeft!==0,this.isNextButtonEnabled=list.offsetWidth>=offsetWidth&&parseInt(scrollLeft)!==scrollWidth-width)},"updateButtonState"),getVisibleButtonWidths:__name(function(){var _this$$refs3=this.$refs,prevBtn=_this$$refs3.prevBtn,nextBtn=_this$$refs3.nextBtn;return[prevBtn,nextBtn].reduce(function(acc,el){return el?acc+getWidth(el):acc},0)},"getVisibleButtonWidths")},computed:{templates:__name(function(){return this.$pcTabs.$slots},"templates"),activeValue:__name(function(){return this.$pcTabs.d_value},"activeValue"),showNavigators:__name(function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},"showNavigators"),prevButtonAriaLabel:__name(function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},"prevButtonAriaLabel"),nextButtonAriaLabel:__name(function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},"nextButtonAriaLabel")},components:{ChevronLeftIcon:script$f,ChevronRightIcon:script$g},directives:{ripple:Ripple}},_hoisted_1$o=["aria-label","tabindex"],_hoisted_2$i=["aria-orientation"],_hoisted_3$g=["aria-label","tabindex"];function render$g(_ctx,_cache,$props,$setup,$data,$options){var _directive_ripple=resolveDirective("ripple");return openBlock(),createElementBlock("div",mergeProps({ref:"list",class:_ctx.cx("root")},_ctx.ptmi("root")),[$options.showNavigators&&$data.isPrevButtonEnabled?withDirectives((openBlock(),createElementBlock("button",mergeProps({key:0,ref:"prevButton",class:_ctx.cx("prevButton"),"aria-label":$options.prevButtonAriaLabel,tabindex:$options.$pcTabs.tabindex,onClick:_cache[0]||(_cache[0]=function(){return $options.onPrevButtonClick&&$options.onPrevButtonClick.apply($options,arguments)})},_ctx.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(openBlock(),createBlock(resolveDynamicComponent($options.templates.previcon||"ChevronLeftIcon"),mergeProps({"aria-hidden":"true"},_ctx.ptm("prevIcon")),null,16))],16,_hoisted_1$o)),[[_directive_ripple]]):createCommentVNode("",!0),createBaseVNode("div",mergeProps({ref:"content",class:_ctx.cx("content"),onScroll:_cache[1]||(_cache[1]=function(){return $options.onScroll&&$options.onScroll.apply($options,arguments)})},_ctx.ptm("content")),[createBaseVNode("div",mergeProps({ref:"tabs",class:_ctx.cx("tabList"),role:"tablist","aria-orientation":$options.$pcTabs.orientation||"horizontal"},_ctx.ptm("tabList")),[renderSlot(_ctx.$slots,"default"),createBaseVNode("span",mergeProps({ref:"inkbar",class:_ctx.cx("activeBar"),role:"presentation","aria-hidden":"true"},_ctx.ptm("activeBar")),null,16)],16,_hoisted_2$i)],16),$options.showNavigators&&$data.isNextButtonEnabled?withDirectives((openBlock(),createElementBlock("button",mergeProps({key:1,ref:"nextButton",class:_ctx.cx("nextButton"),"aria-label":$options.nextButtonAriaLabel,tabindex:$options.$pcTabs.tabindex,onClick:_cache[2]||(_cache[2]=function(){return $options.onNextButtonClick&&$options.onNextButtonClick.apply($options,arguments)})},_ctx.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(openBlock(),createBlock(resolveDynamicComponent($options.templates.nexticon||"ChevronRightIcon"),mergeProps({"aria-hidden":"true"},_ctx.ptm("nextIcon")),null,16))],16,_hoisted_3$g)),[[_directive_ripple]]):createCommentVNode("",!0)],16)}__name(render$g,"render$g");script$9.render=render$g;const _sfc_main$q=defineComponent({__name:"ExtensionSlot",props:{extension:{}},setup(__props){const props=__props,mountCustomExtension=__name((extension,el)=>{extension.render(el)},"mountCustomExtension");return onBeforeUnmount(()=>{props.extension.type==="custom"&&props.extension.destroy&&props.extension.destroy()}),(_ctx,_cache)=>_ctx.extension.type==="vue"?(openBlock(),createBlock(resolveDynamicComponent(_ctx.extension.component),{key:0})):(openBlock(),createElementBlock("div",{key:1,ref:__name(el=>{el&&mountCustomExtension(props.extension,el)},"ref")},null,512))}}),_hoisted_1$n={class:"flex flex-col h-full"},_hoisted_2$h={class:"w-full flex justify-between"},_hoisted_3$f={class:"tabs-container"},_hoisted_4$5={class:"font-bold"},_hoisted_5$4={class:"flex-grow h-0"},_sfc_main$p=defineComponent({__name:"BottomPanel",setup(__props){const bottomPanelStore=useBottomPanelStore();return(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$n,[createVNode(unref(script$h),{value:unref(bottomPanelStore).activeBottomPanelTabId,"onUpdate:value":_cache[1]||(_cache[1]=$event=>unref(bottomPanelStore).activeBottomPanelTabId=$event)},{default:withCtx(()=>[createVNode(unref(script$9),{"pt:tabList":"border-none"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$h,[createBaseVNode("div",_hoisted_3$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(bottomPanelStore).bottomPanelTabs,tab=>(openBlock(),createBlock(unref(script$a),{key:tab.id,value:tab.id,class:"p-3 border-none"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_4$5,toDisplayString(tab.title.toUpperCase()),1)]),_:2},1032,["value"]))),128))]),createVNode(unref(script$d),{class:"justify-self-end",icon:"pi pi-times",severity:"secondary",size:"small",text:"",onClick:_cache[0]||(_cache[0]=$event=>unref(bottomPanelStore).bottomPanelVisible=!1)})])]),_:1})]),_:1},8,["value"]),createBaseVNode("div",_hoisted_5$4,[unref(bottomPanelStore).bottomPanelVisible&&unref(bottomPanelStore).activeBottomPanelTab?(openBlock(),createBlock(_sfc_main$q,{key:0,extension:unref(bottomPanelStore).activeBottomPanelTab},null,8,["extension"])):createCommentVNode("",!0)])]))}}),_hoisted_1$m={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},_hoisted_2$g=createBaseVNode("path",{fill:"currentColor",d:"M921.088 103.232L584.832 889.024L465.52 544.512L121.328 440.48zM1004.46.769c-6.096 0-13.52 1.728-22.096 5.36L27.708 411.2c-34.383 14.592-36.56 42.704-4.847 62.464l395.296 123.584l129.36 403.264c9.28 15.184 20.496 22.72 31.263 22.72c11.936 0 23.296-9.152 31.04-27.248l408.272-953.728C1029.148 16.368 1022.86.769 1004.46.769"},null,-1),_hoisted_3$e=[_hoisted_2$g];function render$f(_ctx,_cache){return openBlock(),createElementBlock("svg",_hoisted_1$m,[..._hoisted_3$e])}__name(render$f,"render$f");const __unplugin_components_1$2=markRaw({name:"simple-line-icons-cursor",render:render$f}),_hoisted_1$l={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_hoisted_2$f=createBaseVNode("path",{fill:"currentColor",d:"M10.05 23q-.75 0-1.4-.337T7.575 21.7L1.2 12.375l.6-.575q.475-.475 1.125-.55t1.175.3L7 13.575V4q0-.425.288-.712T8 3t.713.288T9 4v13.425l-3.7-2.6l3.925 5.725q.125.2.35.325t.475.125H17q.825 0 1.413-.587T19 19V5q0-.425.288-.712T20 4t.713.288T21 5v14q0 1.65-1.175 2.825T17 23zM11 12V2q0-.425.288-.712T12 1t.713.288T13 2v10zm4 0V3q0-.425.288-.712T16 2t.713.288T17 3v9zm-2.85 4.5"},null,-1),_hoisted_3$d=[_hoisted_2$f];function render$e(_ctx,_cache){return openBlock(),createElementBlock("svg",_hoisted_1$l,[..._hoisted_3$d])}__name(render$e,"render$e");const __unplugin_components_0$2=markRaw({name:"material-symbols-pan-tool-outline",render:render$e});var theme$6=__name(function(_ref){return _ref.dt,`
.p-buttongroup .p-button {
    margin: 0;
}

.p-buttongroup .p-button:not(:last-child),
.p-buttongroup .p-button:not(:last-child):hover {
    border-right: 0 none;
}

.p-buttongroup .p-button:not(:first-of-type):not(:last-of-type) {
    border-radius: 0;
}

.p-buttongroup .p-button:first-of-type:not(:only-of-type) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.p-buttongroup .p-button:last-of-type:not(:only-of-type) {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

.p-buttongroup .p-button:focus {
    position: relative;
    z-index: 1;
}
`},"theme"),classes$6={root:"p-buttongroup p-component"},ButtonGroupStyle=BaseStyle.extend({name:"buttongroup",theme:theme$6,classes:classes$6}),script$1$6={name:"BaseButtonGroup",extends:script$e,style:ButtonGroupStyle,provide:__name(function(){return{$pcButtonGroup:this,$parentInstance:this}},"provide")},script$8={name:"ButtonGroup",extends:script$1$6,inheritAttrs:!1};function render$d(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createElementBlock("span",mergeProps({class:_ctx.cx("root"),role:"group"},_ctx.ptmi("root")),[renderSlot(_ctx.$slots,"default")],16)}__name(render$d,"render$d");script$8.render=render$d;const useTitleEditorStore=defineStore("titleEditor",()=>({titleEditorTarget:shallowRef(null)})),useCanvasStore=defineStore("canvas",()=>({canvas:shallowRef(null)})),_sfc_main$o=defineComponent({__name:"GraphCanvasMenu",setup(__props){const{t}=useI18n(),commandStore=useCommandStore(),canvasStore=useCanvasStore(),settingStore=useSettingStore(),linkHidden=computed(()=>settingStore.get("Comfy.LinkRenderMode")===LiteGraph.HIDDEN_LINK);let interval=null;const repeat2=__name(command=>{if(interval)return;const cmd=__name(()=>commandStore.execute(command),"cmd");cmd(),interval=window.setInterval(cmd,100)},"repeat"),stopRepeat=__name(()=>{interval&&(clearInterval(interval),interval=null)},"stopRepeat");return(_ctx,_cache)=>{const _component_i_material_symbols58pan_tool_outline=__unplugin_components_0$2,_component_i_simple_line_icons58cursor=__unplugin_components_1$2,_directive_tooltip=resolveDirective("tooltip");return openBlock(),createBlock(unref(script$8),{class:"p-buttongroup-vertical absolute bottom-[10px] right-[10px] z-[1000] pointer-events-auto"},{default:withCtx(()=>[withDirectives(createVNode(unref(script$d),{severity:"secondary",icon:"pi pi-plus","aria-label":_ctx.$t("graphCanvasMenu.zoomIn"),onMousedown:_cache[0]||(_cache[0]=$event=>repeat2("Comfy.Canvas.ZoomIn")),onMouseup:stopRepeat},null,8,["aria-label"]),[[_directive_tooltip,unref(t)("graphCanvasMenu.zoomIn"),void 0,{left:!0}]]),withDirectives(createVNode(unref(script$d),{severity:"secondary",icon:"pi pi-minus","aria-label":_ctx.$t("graphCanvasMenu.zoomOut"),onMousedown:_cache[1]||(_cache[1]=$event=>repeat2("Comfy.Canvas.ZoomOut")),onMouseup:stopRepeat},null,8,["aria-label"]),[[_directive_tooltip,unref(t)("graphCanvasMenu.zoomOut"),void 0,{left:!0}]]),withDirectives(createVNode(unref(script$d),{severity:"secondary",icon:"pi pi-expand","aria-label":_ctx.$t("graphCanvasMenu.fitView"),onClick:_cache[2]||(_cache[2]=()=>unref(commandStore).execute("Comfy.Canvas.FitView"))},null,8,["aria-label"]),[[_directive_tooltip,unref(t)("graphCanvasMenu.fitView"),void 0,{left:!0}]]),withDirectives((openBlock(),createBlock(unref(script$d),{severity:"secondary","aria-label":unref(t)("graphCanvasMenu."+(unref(canvasStore).canvas?.read_only?"panMode":"selectMode")),onClick:_cache[3]||(_cache[3]=()=>unref(commandStore).execute("Comfy.Canvas.ToggleLock"))},{icon:withCtx(()=>[unref(canvasStore).canvas?.read_only?(openBlock(),createBlock(_component_i_material_symbols58pan_tool_outline,{key:0})):(openBlock(),createBlock(_component_i_simple_line_icons58cursor,{key:1}))]),_:1},8,["aria-label"])),[[_directive_tooltip,unref(t)("graphCanvasMenu."+(unref(canvasStore).canvas?.read_only?"panMode":"selectMode"))+" (Space)",void 0,{left:!0}]]),withDirectives(createVNode(unref(script$d),{severity:"secondary",icon:linkHidden.value?"pi pi-eye-slash":"pi pi-eye","aria-label":_ctx.$t("graphCanvasMenu.toggleLinkVisibility"),onClick:_cache[4]||(_cache[4]=()=>unref(commandStore).execute("Comfy.Canvas.ToggleLinkVisibility")),"data-testid":"toggle-link-visibility-button"},null,8,["icon","aria-label"]),[[_directive_tooltip,unref(t)("graphCanvasMenu.toggleLinkVisibility"),void 0,{left:!0}]])]),_:1})}}}),GraphCanvasMenu=_export_sfc(_sfc_main$o,[["__scopeId","data-v-cb8f9a1a"]]),_sfc_main$n=defineComponent({__name:"NodeBadge",setup(__props){const settingStore=useSettingStore(),colorPaletteStore=useColorPaletteStore(),nodeSourceBadgeMode=computed(()=>settingStore.get("Comfy.NodeBadge.NodeSourceBadgeMode")),nodeIdBadgeMode=computed(()=>settingStore.get("Comfy.NodeBadge.NodeIdBadgeMode")),nodeLifeCycleBadgeMode=computed(()=>settingStore.get("Comfy.NodeBadge.NodeLifeCycleBadgeMode"));watch([nodeSourceBadgeMode,nodeIdBadgeMode,nodeLifeCycleBadgeMode],()=>{app.graph?.setDirtyCanvas(!0,!0)});const nodeDefStore=useNodeDefStore();function badgeTextVisible(nodeDef,badgeMode){return!(badgeMode===NodeBadgeMode.None||nodeDef?.isCoreNode&&badgeMode===NodeBadgeMode.HideBuiltIn)}return __name(badgeTextVisible,"badgeTextVisible"),onMounted(()=>{app.registerExtension({name:"Comfy.NodeBadge",nodeCreated(node){node.badgePosition=BadgePosition.TopRight;const badge=computed(()=>{const nodeDef=nodeDefStore.fromLGraphNode(node);return new LGraphBadge({text:_.truncate([badgeTextVisible(nodeDef,nodeIdBadgeMode.value)?`#${node.id}`:"",badgeTextVisible(nodeDef,nodeLifeCycleBadgeMode.value)?nodeDef?.nodeLifeCycleBadgeText??"":"",badgeTextVisible(nodeDef,nodeSourceBadgeMode.value)?nodeDef?.nodeSource?.badgeText??"":""].filter(s=>s.length>0).join(" "),{length:31}),fgColor:colorPaletteStore.completedActivePalette.colors.litegraph_base.BADGE_FG_COLOR,bgColor:colorPaletteStore.completedActivePalette.colors.litegraph_base.BADGE_BG_COLOR})});node.badges.push(()=>badge.value)}})}),(_ctx,_cache)=>(openBlock(),createElementBlock("div"))}}),_sfc_main$m=defineComponent({__name:"NodeTooltip",setup(__props){let idleTimeout;const nodeDefStore=useNodeDefStore(),tooltipRef=ref(),tooltipText=ref(""),left=ref(),top=ref(),hideTooltip=__name(()=>tooltipText.value=null,"hideTooltip"),showTooltip=__name(async tooltip=>{if(!tooltip)return;left.value=app.canvas.mouse[0]+"px",top.value=app.canvas.mouse[1]+"px",tooltipText.value=tooltip,await nextTick();const rect=tooltipRef.value.getBoundingClientRect();rect.right>window.innerWidth&&(left.value=app.canvas.mouse[0]-rect.width+"px"),rect.top<0&&(top.value=app.canvas.mouse[1]+rect.height+"px")},"showTooltip"),onIdle=__name(()=>{const{canvas}=app,node=canvas.node_over;if(!node)return;const ctor=node.constructor,nodeDef=nodeDefStore.nodeDefsByName[node.type];if(ctor.title_mode!==LiteGraph.NO_TITLE&&canvas.graph_mouse[1]<node.pos[1])return showTooltip(nodeDef.description);if(node.flags?.collapsed)return;const inputSlot=canvas.isOverNodeInput(node,canvas.graph_mouse[0],canvas.graph_mouse[1],[0,0]);if(inputSlot!==-1){const inputName=node.inputs[inputSlot].name,translatedTooltip=st(`nodeDefs.${normalizeI18nKey(node.type)}.inputs.${normalizeI18nKey(inputName)}.tooltip`,nodeDef.inputs.getInput(inputName)?.tooltip);return showTooltip(translatedTooltip)}const outputSlot=canvas.isOverNodeOutput(node,canvas.graph_mouse[0],canvas.graph_mouse[1],[0,0]);if(outputSlot!==-1){const translatedTooltip=st(`nodeDefs.${normalizeI18nKey(node.type)}.outputs.${outputSlot}.tooltip`,nodeDef.outputs.all?.[outputSlot]?.tooltip);return showTooltip(translatedTooltip)}const widget=app.canvas.getWidgetAtCursor();if(widget&&!widget.element){const translatedTooltip=st(`nodeDefs.${normalizeI18nKey(node.type)}.inputs.${normalizeI18nKey(widget.name)}.tooltip`,nodeDef.inputs.getInput(widget.name)?.tooltip);return showTooltip(widget.tooltip??translatedTooltip)}},"onIdle");return useEventListener(window,"mousemove",__name(e=>{hideTooltip(),clearTimeout(idleTimeout),e.target.nodeName==="CANVAS"&&(idleTimeout=window.setTimeout(onIdle,500))},"onMouseMove")),useEventListener(window,"click",hideTooltip),(_ctx,_cache)=>tooltipText.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"tooltipRef",ref:tooltipRef,class:"node-tooltip",style:normalizeStyle({left:left.value,top:top.value})},toDisplayString(tooltipText.value),5)):createCommentVNode("",!0)}}),NodeTooltip=_export_sfc(_sfc_main$m,[["__scopeId","data-v-46859edf"]]),_sfc_main$l=defineComponent({__name:"TitleEditor",setup(__props){const settingStore=useSettingStore(),showInput=ref(!1),editedTitle=ref(""),inputStyle=ref({position:"fixed",left:"0px",top:"0px",width:"200px",height:"20px",fontSize:"12px"}),titleEditorStore=useTitleEditorStore(),canvasStore=useCanvasStore(),previousCanvasDraggable=ref(!0),onEdit=__name(newValue=>{titleEditorStore.titleEditorTarget&&newValue.trim()!==""&&(titleEditorStore.titleEditorTarget.title=newValue.trim(),app.graph.setDirtyCanvas(!0,!0)),showInput.value=!1,titleEditorStore.titleEditorTarget=null,canvasStore.canvas.allow_dragcanvas=previousCanvasDraggable.value},"onEdit");return watch(()=>titleEditorStore.titleEditorTarget,target=>{if(target!==null){if(editedTitle.value=target.title,showInput.value=!0,previousCanvasDraggable.value=canvasStore.canvas.allow_dragcanvas,canvasStore.canvas.allow_dragcanvas=!1,target instanceof LGraphGroup){const group=target,[x,y]=group.pos,[w,h]=group.size,[left,top]=app.canvasPosToClientPos([x,y]);inputStyle.value.left=`${left}px`,inputStyle.value.top=`${top}px`;const width=w*app.canvas.ds.scale,height=group.titleHeight*app.canvas.ds.scale;inputStyle.value.width=`${width}px`,inputStyle.value.height=`${height}px`;const fontSize=group.font_size*app.canvas.ds.scale;inputStyle.value.fontSize=`${fontSize}px`}else if(target instanceof LGraphNode){const node=target,[x,y]=node.getBounding(),canvasWidth=node.width,canvasHeight=LiteGraph.NODE_TITLE_HEIGHT,[left,top]=app.canvasPosToClientPos([x,y]);inputStyle.value.left=`${left}px`,inputStyle.value.top=`${top}px`;const width=canvasWidth*app.canvas.ds.scale,height=canvasHeight*app.canvas.ds.scale;inputStyle.value.width=`${width}px`,inputStyle.value.height=`${height}px`;const fontSize=12*app.canvas.ds.scale;inputStyle.value.fontSize=`${fontSize}px`}}}),useEventListener(document,"litegraph:canvas",__name(event=>{if(event.detail.subType==="group-double-click"){if(!settingStore.get("Comfy.Group.DoubleClickTitleToEdit"))return;const group=event.detail.group,[x,y]=group.pos;event.detail.originalEvent.canvasY-y<=group.titleHeight&&(titleEditorStore.titleEditorTarget=group)}else if(event.detail.subType==="node-double-click"){if(!settingStore.get("Comfy.Node.DoubleClickTitleToEdit"))return;const node=event.detail.node,[x,y]=node.pos;event.detail.originalEvent.canvasY-y<=0&&(titleEditorStore.titleEditorTarget=node)}},"canvasEventHandler")),(_ctx,_cache)=>showInput.value?(openBlock(),createElementBlock("div",{key:0,class:"group-title-editor node-title-editor",style:normalizeStyle(inputStyle.value)},[createVNode(EditableText,{isEditing:showInput.value,modelValue:editedTitle.value,onEdit},null,8,["isEditing","modelValue"])],4)):createCommentVNode("",!0)}}),TitleEditor=_export_sfc(_sfc_main$l,[["__scopeId","data-v-12d3fd12"]]),useSearchBoxStore=defineStore("searchBox",()=>{const visible=ref(!1);function toggleVisible(){visible.value=!visible.value}return __name(toggleVisible,"toggleVisible"),{visible,toggleVisible}});class ConnectingLinkImpl{static{__name(this,"ConnectingLinkImpl")}constructor(node,slot,input,output,pos,afterRerouteId){this.node=node,this.slot=slot,this.input=input,this.output=output,this.pos=pos,this.afterRerouteId=afterRerouteId}static createFromPlainObject(obj){return new ConnectingLinkImpl(obj.node,obj.slot,obj.input,obj.output,obj.pos,obj.afterRerouteId)}get type(){const result=this.input?this.input.type:this.output?.type??null;return result===-1?null:result}get releaseSlotType(){return this.output?"input":"output"}connectTo(newNode){const newNodeSlots=this.releaseSlotType==="output"?newNode.outputs:newNode.inputs;if(!newNodeSlots)return;const newNodeSlot=newNodeSlots.findIndex(slot=>LiteGraph.isValidConnection(slot.type,this.type));if(newNodeSlot===-1){console.warn(`Could not find slot with type ${this.type} on node ${newNode.title}. This should never happen`);return}this.releaseSlotType==="input"?this.node.connect(this.slot,newNode,newNodeSlot,this.afterRerouteId):newNode.connect(newNodeSlot,this.node,this.slot,this.afterRerouteId)}}var theme$5=__name(function(_ref){var dt=_ref.dt;return`
.p-autocomplete {
    display: inline-flex;
}

.p-autocomplete-loader {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
    right: `.concat(dt("autocomplete.padding.x"),`;
}

.p-autocomplete:has(.p-autocomplete-dropdown) .p-autocomplete-loader {
    right: calc(`).concat(dt("autocomplete.dropdown.width")," + ").concat(dt("autocomplete.padding.x"),`);
}

.p-autocomplete:has(.p-autocomplete-dropdown) .p-autocomplete-input {
    flex: 1 1 auto;
    width: 1%;
}

.p-autocomplete:has(.p-autocomplete-dropdown) .p-autocomplete-input,
.p-autocomplete:has(.p-autocomplete-dropdown) .p-autocomplete-input-multiple {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.p-autocomplete-dropdown {
    cursor: pointer;
    display: inline-flex;
    cursor: pointer;
    user-select: none;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    width: `).concat(dt("autocomplete.dropdown.width"),`;
    border-top-right-radius: `).concat(dt("autocomplete.dropdown.border.radius"),`;
    border-bottom-right-radius: `).concat(dt("autocomplete.dropdown.border.radius"),`;
    background: `).concat(dt("autocomplete.dropdown.background"),`;
    border: 1px solid `).concat(dt("autocomplete.dropdown.border.color"),`;
    border-left: 0 none;
    color: `).concat(dt("autocomplete.dropdown.color"),`;
    transition: background `).concat(dt("autocomplete.transition.duration"),", color ").concat(dt("autocomplete.transition.duration"),", border-color ").concat(dt("autocomplete.transition.duration"),", outline-color ").concat(dt("autocomplete.transition.duration"),", box-shadow ").concat(dt("autocomplete.transition.duration"),`;
    outline-color: transparent;
}

.p-autocomplete-dropdown:not(:disabled):hover {
    background: `).concat(dt("autocomplete.dropdown.hover.background"),`;
    border-color: `).concat(dt("autocomplete.dropdown.hover.border.color"),`;
    color: `).concat(dt("autocomplete.dropdown.hover.color"),`;
}

.p-autocomplete-dropdown:not(:disabled):active {
    background: `).concat(dt("autocomplete.dropdown.active.background"),`;
    border-color: `).concat(dt("autocomplete.dropdown.active.border.color"),`;
    color: `).concat(dt("autocomplete.dropdown.active.color"),`;
}

.p-autocomplete-dropdown:focus-visible {
    box-shadow: `).concat(dt("autocomplete.dropdown.focus.ring.shadow"),`;
    outline: `).concat(dt("autocomplete.dropdown.focus.ring.width")," ").concat(dt("autocomplete.dropdown.focus.ring.style")," ").concat(dt("autocomplete.dropdown.focus.ring.color"),`;
    outline-offset: `).concat(dt("autocomplete.dropdown.focus.ring.offset"),`;
}

.p-autocomplete .p-autocomplete-overlay {
    min-width: 100%;
}

.p-autocomplete-overlay {
    position: absolute;
    overflow: auto;
    top: 0;
    left: 0;
    background: `).concat(dt("autocomplete.overlay.background"),`;
    color: `).concat(dt("autocomplete.overlay.color"),`;
    border: 1px solid `).concat(dt("autocomplete.overlay.border.color"),`;
    border-radius: `).concat(dt("autocomplete.overlay.border.radius"),`;
    box-shadow: `).concat(dt("autocomplete.overlay.shadow"),`;
}

.p-autocomplete-list {
    margin: 0;
    padding: 0;
    list-style-type: none;
    display: flex;
    flex-direction: column;
    gap: `).concat(dt("autocomplete.list.gap"),`;
    padding: `).concat(dt("autocomplete.list.padding"),`;
}

.p-autocomplete-option {
    cursor: pointer;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    padding: `).concat(dt("autocomplete.option.padding"),`;
    border: 0 none;
    color: `).concat(dt("autocomplete.option.color"),`;
    background: transparent;
    transition: background `).concat(dt("autocomplete.transition.duration"),", color ").concat(dt("autocomplete.transition.duration"),", border-color ").concat(dt("autocomplete.transition.duration"),`;
    border-radius: `).concat(dt("autocomplete.option.border.radius"),`;
}

.p-autocomplete-option:not(.p-autocomplete-option-selected):not(.p-disabled).p-focus {
    background: `).concat(dt("autocomplete.option.focus.background"),`;
    color: `).concat(dt("autocomplete.option.focus.color"),`;
}

.p-autocomplete-option-selected {
    background: `).concat(dt("autocomplete.option.selected.background"),`;
    color: `).concat(dt("autocomplete.option.selected.color"),`;
}

.p-autocomplete-option-selected.p-focus {
    background: `).concat(dt("autocomplete.option.selected.focus.background"),`;
    color: `).concat(dt("autocomplete.option.selected.focus.color"),`;
}

.p-autocomplete-option-group {
    margin: 0;
    padding: `).concat(dt("autocomplete.option.group.padding"),`;
    color: `).concat(dt("autocomplete.option.group.color"),`;
    background: `).concat(dt("autocomplete.option.group.background"),`;
    font-weight: `).concat(dt("autocomplete.option.group.font.weight"),`;
}

.p-autocomplete-input-multiple {
    margin: 0;
    list-style-type: none;
    cursor: text;
    overflow: hidden;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    padding: calc(`).concat(dt("autocomplete.padding.y")," / 2) ").concat(dt("autocomplete.padding.x"),`;
    gap: calc(`).concat(dt("autocomplete.padding.y"),` / 2);
    color: `).concat(dt("autocomplete.color"),`;
    background: `).concat(dt("autocomplete.background"),`;
    border: 1px solid `).concat(dt("autocomplete.border.color"),`;
    border-radius: `).concat(dt("autocomplete.border.radius"),`;
    width: 100%;
    transition: background `).concat(dt("autocomplete.transition.duration"),", color ").concat(dt("autocomplete.transition.duration"),", border-color ").concat(dt("autocomplete.transition.duration"),", outline-color ").concat(dt("autocomplete.transition.duration"),", box-shadow ").concat(dt("autocomplete.transition.duration"),`;
    outline-color: transparent;
    box-shadow: `).concat(dt("autocomplete.shadow"),`;
}

.p-autocomplete:not(.p-disabled):hover .p-autocomplete-input-multiple {
    border-color: `).concat(dt("autocomplete.hover.border.color"),`;
}

.p-autocomplete:not(.p-disabled).p-focus .p-autocomplete-input-multiple {
    border-color: `).concat(dt("autocomplete.focus.border.color"),`;
    box-shadow: `).concat(dt("autocomplete.focus.ring.shadow"),`;
    outline: `).concat(dt("autocomplete.focus.ring.width")," ").concat(dt("autocomplete.focus.ring.style")," ").concat(dt("autocomplete.focus.ring.color"),`;
    outline-offset: `).concat(dt("autocomplete.focus.ring.offset"),`;
}

.p-autocomplete.p-invalid .p-autocomplete-input-multiple {
    border-color: `).concat(dt("autocomplete.invalid.border.color"),`;
}

.p-variant-filled.p-autocomplete-input-multiple {
    background: `).concat(dt("autocomplete.filled.background"),`;
}

.p-autocomplete:not(.p-disabled).p-focus .p-variant-filled.p-autocomplete-input-multiple  {
    background: `).concat(dt("autocomplete.filled.focus.background"),`;
}

.p-autocomplete.p-disabled .p-autocomplete-input-multiple {
    opacity: 1;
    background: `).concat(dt("autocomplete.disabled.background"),`;
    color: `).concat(dt("autocomplete.disabled.color"),`;
}

.p-autocomplete-chip.p-chip {
    padding-top: calc(`).concat(dt("autocomplete.padding.y"),` / 2);
    padding-bottom: calc(`).concat(dt("autocomplete.padding.y"),` / 2);
    border-radius: `).concat(dt("autocomplete.chip.border.radius"),`;
}

.p-autocomplete-input-multiple:has(.p-autocomplete-chip) {
    padding-left: calc(`).concat(dt("autocomplete.padding.y"),` / 2);
    padding-right: calc(`).concat(dt("autocomplete.padding.y"),` / 2);
}

.p-autocomplete-chip-item.p-focus .p-autocomplete-chip {
    background: `).concat(dt("inputchips.chip.focus.background"),`;
    color: `).concat(dt("inputchips.chip.focus.color"),`;
}

.p-autocomplete-input-chip {
    flex: 1 1 auto;
    display: inline-flex;
    padding-top: calc(`).concat(dt("autocomplete.padding.y"),` / 2);
    padding-bottom: calc(`).concat(dt("autocomplete.padding.y"),` / 2);
}

.p-autocomplete-input-chip input {
    border: 0 none;
    outline: 0 none;
    background: transparent;
    margin: 0;
    padding: 0;
    box-shadow: none;
    border-radius: 0;
    width: 100%;
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: inherit;
}

.p-autocomplete-input-chip input::placeholder {
    color: `).concat(dt("autocomplete.placeholder.color"),`;
}

.p-autocomplete-empty-message {
    padding: `).concat(dt("autocomplete.empty.message.padding"),`;
}

.p-autocomplete-fluid {
    display: flex;
}

.p-autocomplete-fluid:has(.p-autocomplete-dropdown) .p-autocomplete-input {
    width: 1%;
}
`)},"theme"),inlineStyles$3={root:{position:"relative"}},classes$5={root:__name(function(_ref2){var instance=_ref2.instance,props=_ref2.props;return["p-autocomplete p-component p-inputwrapper",{"p-disabled":props.disabled,"p-invalid":props.invalid,"p-focus":instance.focused,"p-inputwrapper-filled":props.modelValue||isNotEmpty(instance.inputValue),"p-inputwrapper-focus":instance.focused,"p-autocomplete-open":instance.overlayVisible,"p-autocomplete-fluid":instance.hasFluid}]},"root"),pcInput:"p-autocomplete-input",inputMultiple:__name(function(_ref3){var props=_ref3.props,instance=_ref3.instance;return["p-autocomplete-input-multiple",{"p-variant-filled":props.variant?props.variant==="filled":instance.$primevue.config.inputStyle==="filled"||instance.$primevue.config.inputVariant==="filled"}]},"inputMultiple"),chipItem:__name(function(_ref4){var instance=_ref4.instance,i=_ref4.i;return["p-autocomplete-chip-item",{"p-focus":instance.focusedMultipleOptionIndex===i}]},"chipItem"),pcChip:"p-autocomplete-chip",chipIcon:"p-autocomplete-chip-icon",inputChip:"p-autocomplete-input-chip",loader:"p-autocomplete-loader",dropdown:"p-autocomplete-dropdown",overlay:"p-autocomplete-overlay p-component",list:"p-autocomplete-list",optionGroup:"p-autocomplete-option-group",option:__name(function(_ref5){var instance=_ref5.instance,_option=_ref5.option,i=_ref5.i,getItemOptions=_ref5.getItemOptions;return["p-autocomplete-option",{"p-autocomplete-option-selected":instance.isSelected(_option),"p-focus":instance.focusedOptionIndex===instance.getOptionIndex(i,getItemOptions),"p-disabled":instance.isOptionDisabled(_option)}]},"option"),emptyMessage:"p-autocomplete-empty-message"},AutoCompleteStyle=BaseStyle.extend({name:"autocomplete",theme:theme$5,classes:classes$5,inlineStyles:inlineStyles$3}),script$1$5={name:"BaseAutoComplete",extends:script$e,props:{modelValue:null,suggestions:{type:Array,default:null},optionLabel:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,scrollHeight:{type:String,default:"14rem"},dropdown:{type:Boolean,default:!1},dropdownMode:{type:String,default:"blank"},multiple:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},variant:{type:String,default:null},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:null},dataKey:{type:String,default:null},minLength:{type:Number,default:1},delay:{type:Number,default:300},appendTo:{type:[String,Object],default:"body"},forceSelection:{type:Boolean,default:!1},completeOnFocus:{type:Boolean,default:!1},inputId:{type:String,default:null},inputStyle:{type:Object,default:null},inputClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},panelClass:{type:[String,Object],default:null},overlayStyle:{type:Object,default:null},overlayClass:{type:[String,Object],default:null},dropdownIcon:{type:String,default:null},dropdownClass:{type:[String,Object],default:null},loader:{type:String,default:null},loadingIcon:{type:String,default:null},removeTokenIcon:{type:String,default:null},chipIcon:{type:String,default:null},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!1},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},searchLocale:{type:String,default:void 0},searchMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptySearchMessage:{type:String,default:null},tabindex:{type:Number,default:0},typeahead:{type:Boolean,default:!0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null},fluid:{type:Boolean,default:null}},style:AutoCompleteStyle,provide:__name(function(){return{$pcAutoComplete:this,$parentInstance:this}},"provide")};function _typeof$1$1(o){"@babel/helpers - typeof";return _typeof$1$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o2){return typeof o2}:function(o2){return o2&&typeof Symbol=="function"&&o2.constructor===Symbol&&o2!==Symbol.prototype?"symbol":typeof o2},_typeof$1$1(o)}__name(_typeof$1$1,"_typeof$1$1");function _toConsumableArray$1(r){return _arrayWithoutHoles$1(r)||_iterableToArray$1(r)||_unsupportedIterableToArray$1(r)||_nonIterableSpread$1()}__name(_toConsumableArray$1,"_toConsumableArray$1");function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}__name(_nonIterableSpread$1,"_nonIterableSpread$1");function _unsupportedIterableToArray$1(r,a){if(r){if(typeof r=="string")return _arrayLikeToArray$1(r,a);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$1(r,a):void 0}}__name(_unsupportedIterableToArray$1,"_unsupportedIterableToArray$1");function _iterableToArray$1(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}__name(_iterableToArray$1,"_iterableToArray$1");function _arrayWithoutHoles$1(r){if(Array.isArray(r))return _arrayLikeToArray$1(r)}__name(_arrayWithoutHoles$1,"_arrayWithoutHoles$1");function _arrayLikeToArray$1(r,a){(a==null||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}__name(_arrayLikeToArray$1,"_arrayLikeToArray$1");var script$7={name:"AutoComplete",extends:script$1$5,inheritAttrs:!1,emits:["update:modelValue","change","focus","blur","item-select","item-unselect","option-select","option-unselect","dropdown-click","clear","complete","before-show","before-hide","show","hide"],inject:{$pcFluid:{default:null}},outsideClickListener:null,resizeListener:null,scrollHandler:null,overlay:null,virtualScroller:null,searchTimeout:null,dirty:!1,data:__name(function(){return{id:this.$attrs.id,clicked:!1,focused:!1,focusedOptionIndex:-1,focusedMultipleOptionIndex:-1,overlayVisible:!1,searching:!1}},"data"),watch:{"$attrs.id":__name(function(newValue){this.id=newValue||UniqueComponentId()},"$attrsId"),suggestions:__name(function(){this.searching&&(this.show(),this.focusedOptionIndex=this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1,this.searching=!1),this.autoUpdateModel()},"suggestions")},mounted:__name(function(){this.id=this.id||UniqueComponentId(),this.autoUpdateModel()},"mounted"),updated:__name(function(){this.overlayVisible&&this.alignOverlay()},"updated"),beforeUnmount:__name(function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(ZIndex.clear(this.overlay),this.overlay=null)},"beforeUnmount"),methods:{getOptionIndex:__name(function(index,fn){return this.virtualScrollerDisabled?index:fn&&fn(index).index},"getOptionIndex"),getOptionLabel:__name(function(option2){return this.optionLabel?resolveFieldData(option2,this.optionLabel):option2},"getOptionLabel"),getOptionValue:__name(function(option2){return option2},"getOptionValue"),getOptionRenderKey:__name(function(option2,index){return(this.dataKey?resolveFieldData(option2,this.dataKey):this.getOptionLabel(option2))+"_"+index},"getOptionRenderKey"),getPTOptions:__name(function(option2,itemOptions,index,key){return this.ptm(key,{context:{selected:this.isSelected(option2),focused:this.focusedOptionIndex===this.getOptionIndex(index,itemOptions),disabled:this.isOptionDisabled(option2)}})},"getPTOptions"),isOptionDisabled:__name(function(option2){return this.optionDisabled?resolveFieldData(option2,this.optionDisabled):!1},"isOptionDisabled"),isOptionGroup:__name(function(option2){return this.optionGroupLabel&&option2.optionGroup&&option2.group},"isOptionGroup"),getOptionGroupLabel:__name(function(optionGroup){return resolveFieldData(optionGroup,this.optionGroupLabel)},"getOptionGroupLabel"),getOptionGroupChildren:__name(function(optionGroup){return resolveFieldData(optionGroup,this.optionGroupChildren)},"getOptionGroupChildren"),getAriaPosInset:__name(function(index){var _this=this;return(this.optionGroupLabel?index-this.visibleOptions.slice(0,index).filter(function(option2){return _this.isOptionGroup(option2)}).length:index)+1},"getAriaPosInset"),show:__name(function(isFocus){this.$emit("before-show"),this.dirty=!0,this.overlayVisible=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1,isFocus&&focus(this.multiple?this.$refs.focusInput:this.$refs.focusInput.$el)},"show"),hide:__name(function(isFocus){var _this2=this,_hide=__name(function(){_this2.$emit("before-hide"),_this2.dirty=isFocus,_this2.overlayVisible=!1,_this2.clicked=!1,_this2.focusedOptionIndex=-1,isFocus&&focus(_this2.multiple?_this2.$refs.focusInput:_this2.$refs.focusInput.$el)},"_hide");setTimeout(function(){_hide()},0)},"hide"),onFocus:__name(function(event){this.disabled||(!this.dirty&&this.completeOnFocus&&this.search(event,event.target.value,"focus"),this.dirty=!0,this.focused=!0,this.overlayVisible&&(this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1,this.scrollInView(this.focusedOptionIndex)),this.$emit("focus",event))},"onFocus"),onBlur:__name(function(event){this.dirty=!1,this.focused=!1,this.focusedOptionIndex=-1,this.$emit("blur",event)},"onBlur"),onKeyDown:__name(function(event){if(this.disabled){event.preventDefault();return}switch(event.code){case"ArrowDown":this.onArrowDownKey(event);break;case"ArrowUp":this.onArrowUpKey(event);break;case"ArrowLeft":this.onArrowLeftKey(event);break;case"ArrowRight":this.onArrowRightKey(event);break;case"Home":this.onHomeKey(event);break;case"End":this.onEndKey(event);break;case"PageDown":this.onPageDownKey(event);break;case"PageUp":this.onPageUpKey(event);break;case"Enter":case"NumpadEnter":this.onEnterKey(event);break;case"Escape":this.onEscapeKey(event);break;case"Tab":this.onTabKey(event);break;case"Backspace":this.onBackspaceKey(event);break}this.clicked=!1},"onKeyDown"),onInput:__name(function(event){var _this3=this;if(this.typeahead){this.searchTimeout&&clearTimeout(this.searchTimeout);var query=event.target.value;this.multiple||this.updateModel(event,query),query.length===0?(this.hide(),this.$emit("clear")):query.length>=this.minLength?(this.focusedOptionIndex=-1,this.searchTimeout=setTimeout(function(){_this3.search(event,query,"input")},this.delay)):this.hide()}},"onInput"),onChange:__name(function(event){var _this4=this;if(this.forceSelection){var valid=!1;if(this.visibleOptions&&!this.multiple){var value=this.multiple?this.$refs.focusInput.value:this.$refs.focusInput.$el.value,matchedValue=this.visibleOptions.find(function(option2){return _this4.isOptionMatched(option2,value||"")});matchedValue!==void 0&&(valid=!0,!this.isSelected(matchedValue)&&this.onOptionSelect(event,matchedValue))}valid||(this.multiple?this.$refs.focusInput.value="":this.$refs.focusInput.$el.value="",this.$emit("clear"),!this.multiple&&this.updateModel(event,null))}},"onChange"),onMultipleContainerFocus:__name(function(){this.disabled||(this.focused=!0)},"onMultipleContainerFocus"),onMultipleContainerBlur:__name(function(){this.focusedMultipleOptionIndex=-1,this.focused=!1},"onMultipleContainerBlur"),onMultipleContainerKeyDown:__name(function(event){if(this.disabled){event.preventDefault();return}switch(event.code){case"ArrowLeft":this.onArrowLeftKeyOnMultiple(event);break;case"ArrowRight":this.onArrowRightKeyOnMultiple(event);break;case"Backspace":this.onBackspaceKeyOnMultiple(event);break}},"onMultipleContainerKeyDown"),onContainerClick:__name(function(event){this.clicked=!0,!(this.disabled||this.searching||this.loading||this.isInputClicked(event)||this.isDropdownClicked(event))&&(!this.overlay||!this.overlay.contains(event.target))&&focus(this.multiple?this.$refs.focusInput:this.$refs.focusInput.$el)},"onContainerClick"),onDropdownClick:__name(function(event){var query=void 0;if(this.overlayVisible)this.hide(!0);else{var target=this.multiple?this.$refs.focusInput:this.$refs.focusInput.$el;focus(target),query=target.value,this.dropdownMode==="blank"?this.search(event,"","dropdown"):this.dropdownMode==="current"&&this.search(event,query,"dropdown")}this.$emit("dropdown-click",{originalEvent:event,query})},"onDropdownClick"),onOptionSelect:__name(function(event,option2){var isHide=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,value=this.getOptionValue(option2);this.multiple?(this.$refs.focusInput.value="",this.isSelected(option2)||this.updateModel(event,[].concat(_toConsumableArray$1(this.modelValue||[]),[value]))):this.updateModel(event,value),this.$emit("item-select",{originalEvent:event,value:option2}),this.$emit("option-select",{originalEvent:event,value:option2}),isHide&&this.hide(!0)},"onOptionSelect"),onOptionMouseMove:__name(function(event,index){this.focusOnHover&&this.changeFocusedOptionIndex(event,index)},"onOptionMouseMove"),onOverlayClick:__name(function(event){OverlayEventBus.emit("overlay-click",{originalEvent:event,target:this.$el})},"onOverlayClick"),onOverlayKeyDown:__name(function(event){switch(event.code){case"Escape":this.onEscapeKey(event);break}},"onOverlayKeyDown"),onArrowDownKey:__name(function(event){if(this.overlayVisible){var optionIndex=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.clicked?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(event,optionIndex),event.preventDefault()}},"onArrowDownKey"),onArrowUpKey:__name(function(event){if(this.overlayVisible)if(event.altKey)this.focusedOptionIndex!==-1&&this.onOptionSelect(event,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(),event.preventDefault();else{var optionIndex=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.clicked?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(event,optionIndex),event.preventDefault()}},"onArrowUpKey"),onArrowLeftKey:__name(function(event){var target=event.currentTarget;this.focusedOptionIndex=-1,this.multiple&&(isEmpty(target.value)&&this.hasSelectedOption?(focus(this.$refs.multiContainer),this.focusedMultipleOptionIndex=this.modelValue.length):event.stopPropagation())},"onArrowLeftKey"),onArrowRightKey:__name(function(event){this.focusedOptionIndex=-1,this.multiple&&event.stopPropagation()},"onArrowRightKey"),onHomeKey:__name(function(event){var currentTarget=event.currentTarget,len=currentTarget.value.length;currentTarget.setSelectionRange(0,event.shiftKey?len:0),this.focusedOptionIndex=-1,event.preventDefault()},"onHomeKey"),onEndKey:__name(function(event){var currentTarget=event.currentTarget,len=currentTarget.value.length;currentTarget.setSelectionRange(event.shiftKey?0:len,len),this.focusedOptionIndex=-1,event.preventDefault()},"onEndKey"),onPageUpKey:__name(function(event){this.scrollInView(0),event.preventDefault()},"onPageUpKey"),onPageDownKey:__name(function(event){this.scrollInView(this.visibleOptions.length-1),event.preventDefault()},"onPageDownKey"),onEnterKey:__name(function(event){this.typeahead?this.overlayVisible?(this.focusedOptionIndex!==-1&&this.onOptionSelect(event,this.visibleOptions[this.focusedOptionIndex]),this.hide()):(this.focusedOptionIndex=-1,this.onArrowDownKey(event)):this.multiple&&(this.updateModel(event,[].concat(_toConsumableArray$1(this.modelValue||[]),[event.target.value])),this.$refs.focusInput.value="")},"onEnterKey"),onEscapeKey:__name(function(event){this.overlayVisible&&this.hide(!0),event.preventDefault()},"onEscapeKey"),onTabKey:__name(function(event){this.focusedOptionIndex!==-1&&this.onOptionSelect(event,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide()},"onTabKey"),onBackspaceKey:__name(function(event){if(this.multiple){if(isNotEmpty(this.modelValue)&&!this.$refs.focusInput.value){var removedValue=this.modelValue[this.modelValue.length-1],newValue=this.modelValue.slice(0,-1);this.$emit("update:modelValue",newValue),this.$emit("item-unselect",{originalEvent:event,value:removedValue}),this.$emit("option-unselect",{originalEvent:event,value:removedValue})}event.stopPropagation()}},"onBackspaceKey"),onArrowLeftKeyOnMultiple:__name(function(){this.focusedMultipleOptionIndex=this.focusedMultipleOptionIndex<1?0:this.focusedMultipleOptionIndex-1},"onArrowLeftKeyOnMultiple"),onArrowRightKeyOnMultiple:__name(function(){this.focusedMultipleOptionIndex++,this.focusedMultipleOptionIndex>this.modelValue.length-1&&(this.focusedMultipleOptionIndex=-1,focus(this.$refs.focusInput))},"onArrowRightKeyOnMultiple"),onBackspaceKeyOnMultiple:__name(function(event){this.focusedMultipleOptionIndex!==-1&&this.removeOption(event,this.focusedMultipleOptionIndex)},"onBackspaceKeyOnMultiple"),onOverlayEnter:__name(function(el){ZIndex.set("overlay",el,this.$primevue.config.zIndex.overlay),addStyle(el,{position:"absolute",top:"0",left:"0"}),this.alignOverlay()},"onOverlayEnter"),onOverlayAfterEnter:__name(function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},"onOverlayAfterEnter"),onOverlayLeave:__name(function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null},"onOverlayLeave"),onOverlayAfterLeave:__name(function(el){ZIndex.clear(el)},"onOverlayAfterLeave"),alignOverlay:__name(function(){var target=this.multiple?this.$refs.multiContainer:this.$refs.focusInput.$el;this.appendTo==="self"?relativePosition(this.overlay,target):(this.overlay.style.minWidth=getOuterWidth(target)+"px",absolutePosition(this.overlay,target))},"alignOverlay"),bindOutsideClickListener:__name(function(){var _this5=this;this.outsideClickListener||(this.outsideClickListener=function(event){_this5.overlayVisible&&_this5.overlay&&_this5.isOutsideClicked(event)&&_this5.hide()},document.addEventListener("click",this.outsideClickListener))},"bindOutsideClickListener"),unbindOutsideClickListener:__name(function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},"unbindOutsideClickListener"),bindScrollListener:__name(function(){var _this6=this;this.scrollHandler||(this.scrollHandler=new ConnectedOverlayScrollHandler(this.$refs.container,function(){_this6.overlayVisible&&_this6.hide()})),this.scrollHandler.bindScrollListener()},"bindScrollListener"),unbindScrollListener:__name(function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},"unbindScrollListener"),bindResizeListener:__name(function(){var _this7=this;this.resizeListener||(this.resizeListener=function(){_this7.overlayVisible&&!isTouchDevice()&&_this7.hide()},window.addEventListener("resize",this.resizeListener))},"bindResizeListener"),unbindResizeListener:__name(function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},"unbindResizeListener"),isOutsideClicked:__name(function(event){return!this.overlay.contains(event.target)&&!this.isInputClicked(event)&&!this.isDropdownClicked(event)},"isOutsideClicked"),isInputClicked:__name(function(event){return this.multiple?event.target===this.$refs.multiContainer||this.$refs.multiContainer.contains(event.target):event.target===this.$refs.focusInput.$el},"isInputClicked"),isDropdownClicked:__name(function(event){return this.$refs.dropdownButton?event.target===this.$refs.dropdownButton||this.$refs.dropdownButton.contains(event.target):!1},"isDropdownClicked"),isOptionMatched:__name(function(option2,value){var _this$getOptionLabel;return this.isValidOption(option2)&&((_this$getOptionLabel=this.getOptionLabel(option2))===null||_this$getOptionLabel===void 0?void 0:_this$getOptionLabel.toLocaleLowerCase(this.searchLocale))===value.toLocaleLowerCase(this.searchLocale)},"isOptionMatched"),isValidOption:__name(function(option2){return isNotEmpty(option2)&&!(this.isOptionDisabled(option2)||this.isOptionGroup(option2))},"isValidOption"),isValidSelectedOption:__name(function(option2){return this.isValidOption(option2)&&this.isSelected(option2)},"isValidSelectedOption"),isEquals:__name(function(value1,value2){return equals(value1,value2,this.equalityKey)},"isEquals"),isSelected:__name(function(option2){var _this8=this,optionValue=this.getOptionValue(option2);return this.multiple?(this.modelValue||[]).some(function(value){return _this8.isEquals(value,optionValue)}):this.isEquals(this.modelValue,this.getOptionValue(option2))},"isSelected"),findFirstOptionIndex:__name(function(){var _this9=this;return this.visibleOptions.findIndex(function(option2){return _this9.isValidOption(option2)})},"findFirstOptionIndex"),findLastOptionIndex:__name(function(){var _this10=this;return findLastIndex(this.visibleOptions,function(option2){return _this10.isValidOption(option2)})},"findLastOptionIndex"),findNextOptionIndex:__name(function(index){var _this11=this,matchedOptionIndex=index<this.visibleOptions.length-1?this.visibleOptions.slice(index+1).findIndex(function(option2){return _this11.isValidOption(option2)}):-1;return matchedOptionIndex>-1?matchedOptionIndex+index+1:index},"findNextOptionIndex"),findPrevOptionIndex:__name(function(index){var _this12=this,matchedOptionIndex=index>0?findLastIndex(this.visibleOptions.slice(0,index),function(option2){return _this12.isValidOption(option2)}):-1;return matchedOptionIndex>-1?matchedOptionIndex:index},"findPrevOptionIndex"),findSelectedOptionIndex:__name(function(){var _this13=this;return this.hasSelectedOption?this.visibleOptions.findIndex(function(option2){return _this13.isValidSelectedOption(option2)}):-1},"findSelectedOptionIndex"),findFirstFocusedOptionIndex:__name(function(){var selectedIndex=this.findSelectedOptionIndex();return selectedIndex<0?this.findFirstOptionIndex():selectedIndex},"findFirstFocusedOptionIndex"),findLastFocusedOptionIndex:__name(function(){var selectedIndex=this.findSelectedOptionIndex();return selectedIndex<0?this.findLastOptionIndex():selectedIndex},"findLastFocusedOptionIndex"),search:__name(function(event,query,source){query!=null&&(source==="input"&&query.trim().length===0||(this.searching=!0,this.$emit("complete",{originalEvent:event,query})))},"search"),removeOption:__name(function(event,index){var _this14=this,removedOption=this.modelValue[index],value=this.modelValue.filter(function(_2,i){return i!==index}).map(function(option2){return _this14.getOptionValue(option2)});this.updateModel(event,value),this.$emit("item-unselect",{originalEvent:event,value:removedOption}),this.$emit("option-unselect",{originalEvent:event,value:removedOption}),this.dirty=!0,focus(this.multiple?this.$refs.focusInput:this.$refs.focusInput.$el)},"removeOption"),changeFocusedOptionIndex:__name(function(event,index){this.focusedOptionIndex!==index&&(this.focusedOptionIndex=index,this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(event,this.visibleOptions[index],!1))},"changeFocusedOptionIndex"),scrollInView:__name(function(){var _this15=this,index=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var id2=index!==-1?"".concat(_this15.id,"_").concat(index):_this15.focusedOptionId,element=findSingle(_this15.list,'li[id="'.concat(id2,'"]'));element?element.scrollIntoView&&element.scrollIntoView({block:"nearest",inline:"start"}):_this15.virtualScrollerDisabled||_this15.virtualScroller&&_this15.virtualScroller.scrollToIndex(index!==-1?index:_this15.focusedOptionIndex)})},"scrollInView"),autoUpdateModel:__name(function(){this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex],!1))},"autoUpdateModel"),updateModel:__name(function(event,value){this.$emit("update:modelValue",value),this.$emit("change",{originalEvent:event,value})},"updateModel"),flatOptions:__name(function(options){var _this16=this;return(options||[]).reduce(function(result,option2,index){result.push({optionGroup:option2,group:!0,index});var optionGroupChildren=_this16.getOptionGroupChildren(option2);return optionGroupChildren&&optionGroupChildren.forEach(function(o){return result.push(o)}),result},[])},"flatOptions"),overlayRef:__name(function(el){this.overlay=el},"overlayRef"),listRef:__name(function(el,contentRef){this.list=el,contentRef&&contentRef(el)},"listRef"),virtualScrollerRef:__name(function(el){this.virtualScroller=el},"virtualScrollerRef")},computed:{visibleOptions:__name(function(){return this.optionGroupLabel?this.flatOptions(this.suggestions):this.suggestions||[]},"visibleOptions"),inputValue:__name(function(){if(isNotEmpty(this.modelValue))if(_typeof$1$1(this.modelValue)==="object"){var label=this.getOptionLabel(this.modelValue);return label??this.modelValue}else return this.modelValue;else return""},"inputValue"),hasSelectedOption:__name(function(){return isNotEmpty(this.modelValue)},"hasSelectedOption"),equalityKey:__name(function(){return this.dataKey},"equalityKey"),searchResultMessageText:__name(function(){return isNotEmpty(this.visibleOptions)&&this.overlayVisible?this.searchMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptySearchMessageText},"searchResultMessageText"),searchMessageText:__name(function(){return this.searchMessage||this.$primevue.config.locale.searchMessage||""},"searchMessageText"),emptySearchMessageText:__name(function(){return this.emptySearchMessage||this.$primevue.config.locale.emptySearchMessage||""},"emptySearchMessageText"),selectionMessageText:__name(function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},"selectionMessageText"),emptySelectionMessageText:__name(function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},"emptySelectionMessageText"),selectedMessageText:__name(function(){return this.hasSelectedOption?this.selectionMessageText.replaceAll("{0}",this.multiple?this.modelValue.length:"1"):this.emptySelectionMessageText},"selectedMessageText"),listAriaLabel:__name(function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.listLabel:void 0},"listAriaLabel"),focusedOptionId:__name(function(){return this.focusedOptionIndex!==-1?"".concat(this.id,"_").concat(this.focusedOptionIndex):null},"focusedOptionId"),focusedMultipleOptionId:__name(function(){return this.focusedMultipleOptionIndex!==-1?"".concat(this.id,"_multiple_option_").concat(this.focusedMultipleOptionIndex):null},"focusedMultipleOptionId"),ariaSetSize:__name(function(){var _this17=this;return this.visibleOptions.filter(function(option2){return!_this17.isOptionGroup(option2)}).length},"ariaSetSize"),virtualScrollerDisabled:__name(function(){return!this.virtualScrollerOptions},"virtualScrollerDisabled"),panelId:__name(function(){return this.id+"_panel"},"panelId"),hasFluid:__name(function(){return isEmpty(this.fluid)?!!this.$pcFluid:this.fluid},"hasFluid")},components:{InputText:script$i,VirtualScroller:script$j,Portal:script$k,ChevronDownIcon:script$l,SpinnerIcon:script$m,Chip:script$n},directives:{ripple:Ripple}};function _typeof$4(o){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o2){return typeof o2}:function(o2){return o2&&typeof Symbol=="function"&&o2.constructor===Symbol&&o2!==Symbol.prototype?"symbol":typeof o2},_typeof$4(o)}__name(_typeof$4,"_typeof$4");function ownKeys$3(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r2){return Object.getOwnPropertyDescriptor(e,r2).enumerable})),t.push.apply(t,o)}return t}__name(ownKeys$3,"ownKeys$3");function _objectSpread$3(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ownKeys$3(Object(t),!0).forEach(function(r2){_defineProperty$4(e,r2,t[r2])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$3(Object(t)).forEach(function(r2){Object.defineProperty(e,r2,Object.getOwnPropertyDescriptor(t,r2))})}return e}__name(_objectSpread$3,"_objectSpread$3");function _defineProperty$4(e,r,t){return(r=_toPropertyKey$4(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}__name(_defineProperty$4,"_defineProperty$4");function _toPropertyKey$4(t){var i=_toPrimitive$4(t,"string");return _typeof$4(i)=="symbol"?i:i+""}__name(_toPropertyKey$4,"_toPropertyKey$4");function _toPrimitive$4(t,r){if(_typeof$4(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,r||"default");if(_typeof$4(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}__name(_toPrimitive$4,"_toPrimitive$4");var _hoisted_1$k=["aria-activedescendant"],_hoisted_2$e=["id","aria-label","aria-setsize","aria-posinset"],_hoisted_3$c=["id","placeholder","tabindex","disabled","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-invalid"],_hoisted_4$4=["disabled","aria-expanded","aria-controls"],_hoisted_5$3=["id"],_hoisted_6$2=["id","aria-label"],_hoisted_7$1=["id"],_hoisted_8$1=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousemove","data-p-selected","data-p-focus","data-p-disabled"];function render$c(_ctx,_cache,$props,$setup,$data,$options){var _component_InputText=resolveComponent("InputText"),_component_Chip=resolveComponent("Chip"),_component_SpinnerIcon=resolveComponent("SpinnerIcon"),_component_VirtualScroller=resolveComponent("VirtualScroller"),_component_Portal=resolveComponent("Portal"),_directive_ripple=resolveDirective("ripple");return openBlock(),createElementBlock("div",mergeProps({ref:"container",class:_ctx.cx("root"),style:_ctx.sx("root"),onClick:_cache[11]||(_cache[11]=function(){return $options.onContainerClick&&$options.onContainerClick.apply($options,arguments)})},_ctx.ptmi("root")),[_ctx.multiple?createCommentVNode("",!0):(openBlock(),createBlock(_component_InputText,{key:0,ref:"focusInput",id:_ctx.inputId,type:"text",class:normalizeClass([_ctx.cx("pcInput"),_ctx.inputClass]),style:normalizeStyle(_ctx.inputStyle),value:$options.inputValue,placeholder:_ctx.placeholder,tabindex:_ctx.disabled?-1:_ctx.tabindex,fluid:$options.hasFluid,disabled:_ctx.disabled,invalid:_ctx.invalid,variant:_ctx.variant,autocomplete:"off",role:"combobox","aria-label":_ctx.ariaLabel,"aria-labelledby":_ctx.ariaLabelledby,"aria-haspopup":"listbox","aria-autocomplete":"list","aria-expanded":$data.overlayVisible,"aria-controls":$options.panelId,"aria-activedescendant":$data.focused?$options.focusedOptionId:void 0,onFocus:$options.onFocus,onBlur:$options.onBlur,onKeydown:$options.onKeyDown,onInput:$options.onInput,onChange:$options.onChange,unstyled:_ctx.unstyled,pt:_ctx.ptm("pcInput")},null,8,["id","class","style","value","placeholder","tabindex","fluid","disabled","invalid","variant","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","onFocus","onBlur","onKeydown","onInput","onChange","unstyled","pt"])),_ctx.multiple?(openBlock(),createElementBlock("ul",mergeProps({key:1,ref:"multiContainer",class:_ctx.cx("inputMultiple"),tabindex:"-1",role:"listbox","aria-orientation":"horizontal","aria-activedescendant":$data.focused?$options.focusedMultipleOptionId:void 0,onFocus:_cache[5]||(_cache[5]=function(){return $options.onMultipleContainerFocus&&$options.onMultipleContainerFocus.apply($options,arguments)}),onBlur:_cache[6]||(_cache[6]=function(){return $options.onMultipleContainerBlur&&$options.onMultipleContainerBlur.apply($options,arguments)}),onKeydown:_cache[7]||(_cache[7]=function(){return $options.onMultipleContainerKeyDown&&$options.onMultipleContainerKeyDown.apply($options,arguments)})},_ctx.ptm("inputMultiple")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(_ctx.modelValue,function(option2,i){return openBlock(),createElementBlock("li",mergeProps({key:"".concat(i,"_").concat($options.getOptionLabel(option2)),id:$data.id+"_multiple_option_"+i,class:_ctx.cx("chipItem",{i}),role:"option","aria-label":$options.getOptionLabel(option2),"aria-selected":!0,"aria-setsize":_ctx.modelValue.length,"aria-posinset":i+1,ref_for:!0},_ctx.ptm("chipItem")),[renderSlot(_ctx.$slots,"chip",mergeProps({class:_ctx.cx("pcChip"),value:option2,index:i,removeCallback:__name(function(event){return $options.removeOption(event,i)},"removeCallback"),ref_for:!0},_ctx.ptm("pcChip")),function(){return[createVNode(_component_Chip,{class:normalizeClass(_ctx.cx("pcChip")),label:$options.getOptionLabel(option2),removeIcon:_ctx.chipIcon||_ctx.removeTokenIcon,removable:"",unstyled:_ctx.unstyled,onRemove:__name(function($event){return $options.removeOption($event,i)},"onRemove"),pt:_ctx.ptm("pcChip")},{removeicon:withCtx(function(){return[renderSlot(_ctx.$slots,_ctx.$slots.chipicon?"chipicon":"removetokenicon",{class:normalizeClass(_ctx.cx("chipIcon")),index:i,removeCallback:__name(function(event){return $options.removeOption(event,i)},"removeCallback")})]}),_:2},1032,["class","label","removeIcon","unstyled","onRemove","pt"])]})],16,_hoisted_2$e)}),128)),createBaseVNode("li",mergeProps({class:_ctx.cx("inputChip"),role:"option"},_ctx.ptm("inputChip")),[createBaseVNode("input",mergeProps({ref:"focusInput",id:_ctx.inputId,type:"text",style:_ctx.inputStyle,class:_ctx.inputClass,placeholder:_ctx.placeholder,tabindex:_ctx.disabled?-1:_ctx.tabindex,disabled:_ctx.disabled,autocomplete:"off",role:"combobox","aria-label":_ctx.ariaLabel,"aria-labelledby":_ctx.ariaLabelledby,"aria-haspopup":"listbox","aria-autocomplete":"list","aria-expanded":$data.overlayVisible,"aria-controls":$data.id+"_list","aria-activedescendant":$data.focused?$options.focusedOptionId:void 0,"aria-invalid":_ctx.invalid||void 0,onFocus:_cache[0]||(_cache[0]=function(){return $options.onFocus&&$options.onFocus.apply($options,arguments)}),onBlur:_cache[1]||(_cache[1]=function(){return $options.onBlur&&$options.onBlur.apply($options,arguments)}),onKeydown:_cache[2]||(_cache[2]=function(){return $options.onKeyDown&&$options.onKeyDown.apply($options,arguments)}),onInput:_cache[3]||(_cache[3]=function(){return $options.onInput&&$options.onInput.apply($options,arguments)}),onChange:_cache[4]||(_cache[4]=function(){return $options.onChange&&$options.onChange.apply($options,arguments)})},_ctx.ptm("input")),null,16,_hoisted_3$c)],16)],16,_hoisted_1$k)):createCommentVNode("",!0),$data.searching||_ctx.loading?renderSlot(_ctx.$slots,_ctx.$slots.loader?"loader":"loadingicon",{key:2,class:normalizeClass(_ctx.cx("loader"))},function(){return[_ctx.loader||_ctx.loadingIcon?(openBlock(),createElementBlock("i",mergeProps({key:0,class:["pi-spin",_ctx.cx("loader"),_ctx.loader,_ctx.loadingIcon],"aria-hidden":"true"},_ctx.ptm("loader")),null,16)):(openBlock(),createBlock(_component_SpinnerIcon,mergeProps({key:1,class:_ctx.cx("loader"),spin:"","aria-hidden":"true"},_ctx.ptm("loader")),null,16,["class"]))]}):createCommentVNode("",!0),renderSlot(_ctx.$slots,_ctx.$slots.dropdown?"dropdown":"dropdownbutton",{toggleCallback:__name(function(event){return $options.onDropdownClick(event)},"toggleCallback")},function(){return[_ctx.dropdown?(openBlock(),createElementBlock("button",mergeProps({key:0,ref:"dropdownButton",type:"button",class:[_ctx.cx("dropdown"),_ctx.dropdownClass],disabled:_ctx.disabled,"aria-haspopup":"listbox","aria-expanded":$data.overlayVisible,"aria-controls":$options.panelId,onClick:_cache[8]||(_cache[8]=function(){return $options.onDropdownClick&&$options.onDropdownClick.apply($options,arguments)})},_ctx.ptm("dropdown")),[renderSlot(_ctx.$slots,"dropdownicon",{class:normalizeClass(_ctx.dropdownIcon)},function(){return[(openBlock(),createBlock(resolveDynamicComponent(_ctx.dropdownIcon?"span":"ChevronDownIcon"),mergeProps({class:_ctx.dropdownIcon},_ctx.ptm("dropdownIcon")),null,16,["class"]))]})],16,_hoisted_4$4)):createCommentVNode("",!0)]}),createBaseVNode("span",mergeProps({role:"status","aria-live":"polite",class:"p-hidden-accessible"},_ctx.ptm("hiddenSearchResult"),{"data-p-hidden-accessible":!0}),toDisplayString($options.searchResultMessageText),17),createVNode(_component_Portal,{appendTo:_ctx.appendTo},{default:withCtx(function(){return[createVNode(Transition,mergeProps({name:"p-connected-overlay",onEnter:$options.onOverlayEnter,onAfterEnter:$options.onOverlayAfterEnter,onLeave:$options.onOverlayLeave,onAfterLeave:$options.onOverlayAfterLeave},_ctx.ptm("transition")),{default:withCtx(function(){return[$data.overlayVisible?(openBlock(),createElementBlock("div",mergeProps({key:0,ref:$options.overlayRef,id:$options.panelId,class:[_ctx.cx("overlay"),_ctx.panelClass,_ctx.overlayClass],style:_objectSpread$3(_objectSpread$3(_objectSpread$3({},_ctx.panelStyle),_ctx.overlayStyle),{},{"max-height":$options.virtualScrollerDisabled?_ctx.scrollHeight:""}),onClick:_cache[9]||(_cache[9]=function(){return $options.onOverlayClick&&$options.onOverlayClick.apply($options,arguments)}),onKeydown:_cache[10]||(_cache[10]=function(){return $options.onOverlayKeyDown&&$options.onOverlayKeyDown.apply($options,arguments)})},_ctx.ptm("overlay")),[renderSlot(_ctx.$slots,"header",{value:_ctx.modelValue,suggestions:$options.visibleOptions}),createVNode(_component_VirtualScroller,mergeProps({ref:$options.virtualScrollerRef},_ctx.virtualScrollerOptions,{style:{height:_ctx.scrollHeight},items:$options.visibleOptions,tabindex:-1,disabled:$options.virtualScrollerDisabled,pt:_ctx.ptm("virtualScroller")}),createSlots({content:withCtx(function(_ref){var styleClass=_ref.styleClass,contentRef=_ref.contentRef,items=_ref.items,getItemOptions=_ref.getItemOptions,contentStyle=_ref.contentStyle,itemSize=_ref.itemSize;return[createBaseVNode("ul",mergeProps({ref:__name(function(el){return $options.listRef(el,contentRef)},"ref"),id:$data.id+"_list",class:[_ctx.cx("list"),styleClass],style:contentStyle,role:"listbox","aria-label":$options.listAriaLabel},_ctx.ptm("list")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(items,function(option2,i){return openBlock(),createElementBlock(Fragment,{key:$options.getOptionRenderKey(option2,$options.getOptionIndex(i,getItemOptions))},[$options.isOptionGroup(option2)?(openBlock(),createElementBlock("li",mergeProps({key:0,id:$data.id+"_"+$options.getOptionIndex(i,getItemOptions),style:{height:itemSize?itemSize+"px":void 0},class:_ctx.cx("optionGroup"),role:"option",ref_for:!0},_ctx.ptm("optionGroup")),[renderSlot(_ctx.$slots,"optiongroup",{option:option2.optionGroup,index:$options.getOptionIndex(i,getItemOptions)},function(){return[createTextVNode(toDisplayString($options.getOptionGroupLabel(option2.optionGroup)),1)]})],16,_hoisted_7$1)):withDirectives((openBlock(),createElementBlock("li",mergeProps({key:1,id:$data.id+"_"+$options.getOptionIndex(i,getItemOptions),style:{height:itemSize?itemSize+"px":void 0},class:_ctx.cx("option",{option:option2,i,getItemOptions}),role:"option","aria-label":$options.getOptionLabel(option2),"aria-selected":$options.isSelected(option2),"aria-disabled":$options.isOptionDisabled(option2),"aria-setsize":$options.ariaSetSize,"aria-posinset":$options.getAriaPosInset($options.getOptionIndex(i,getItemOptions)),onClick:__name(function($event){return $options.onOptionSelect($event,option2)},"onClick"),onMousemove:__name(function($event){return $options.onOptionMouseMove($event,$options.getOptionIndex(i,getItemOptions))},"onMousemove"),"data-p-selected":$options.isSelected(option2),"data-p-focus":$data.focusedOptionIndex===$options.getOptionIndex(i,getItemOptions),"data-p-disabled":$options.isOptionDisabled(option2),ref_for:!0},$options.getPTOptions(option2,getItemOptions,i,"option")),[renderSlot(_ctx.$slots,"option",{option:option2,index:$options.getOptionIndex(i,getItemOptions)},function(){return[createTextVNode(toDisplayString($options.getOptionLabel(option2)),1)]})],16,_hoisted_8$1)),[[_directive_ripple]])],64)}),128)),!items||items&&items.length===0?(openBlock(),createElementBlock("li",mergeProps({key:0,class:_ctx.cx("emptyMessage"),role:"option"},_ctx.ptm("emptyMessage")),[renderSlot(_ctx.$slots,"empty",{},function(){return[createTextVNode(toDisplayString($options.searchResultMessageText),1)]})],16)):createCommentVNode("",!0)],16,_hoisted_6$2)]}),_:2},[_ctx.$slots.loader?{name:"loader",fn:withCtx(function(_ref2){var options=_ref2.options;return[renderSlot(_ctx.$slots,"loader",{options})]}),key:"0"}:void 0]),1040,["style","items","disabled","pt"]),renderSlot(_ctx.$slots,"footer",{value:_ctx.modelValue,suggestions:$options.visibleOptions}),createBaseVNode("span",mergeProps({role:"status","aria-live":"polite",class:"p-hidden-accessible"},_ctx.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),toDisplayString($options.selectedMessageText),17)],16,_hoisted_5$3)):createCommentVNode("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])],16)}__name(render$c,"render$c");script$7.render=render$c;const _sfc_main$k={name:"AutoCompletePlus",extends:script$7,emits:["focused-option-changed"],mounted(){typeof script$7.mounted=="function"&&script$7.mounted.call(this),this.$watch(()=>this.focusedOptionIndex,(newVal,oldVal)=>{this.$emit("focused-option-changed",newVal)})}},_withScopeId$8=__name(n=>(pushScopeId("data-v-5741c9ae"),n=n(),popScopeId(),n),"_withScopeId$8"),_hoisted_1$j={class:"option-container flex justify-between items-center px-2 py-0 cursor-pointer overflow-hidden w-full"},_hoisted_2$d={class:"option-display-name font-semibold flex flex-col"},_hoisted_3$b={key:0},_hoisted_4$3=_withScopeId$8(()=>createBaseVNode("i",{class:"pi pi-bookmark-fill text-sm mr-1"},null,-1)),_hoisted_5$2=[_hoisted_4$3],_hoisted_6$1=["innerHTML"],_hoisted_7=_withScopeId$8(()=>createBaseVNode("span",null,"",-1)),_hoisted_8=["innerHTML"],_hoisted_9={key:0,class:"option-category font-light text-sm text-gray-400 overflow-hidden text-ellipsis whitespace-nowrap"},_hoisted_10={class:"option-badges"},_sfc_main$j=defineComponent({__name:"NodeSearchItem",props:{nodeDef:{},currentQuery:{}},setup(__props){const settingStore=useSettingStore(),showCategory=computed(()=>settingStore.get("Comfy.NodeSearchBoxImpl.ShowCategory")),showIdName=computed(()=>settingStore.get("Comfy.NodeSearchBoxImpl.ShowIdName")),showNodeFrequency=computed(()=>settingStore.get("Comfy.NodeSearchBoxImpl.ShowNodeFrequency")),nodeFrequencyStore=useNodeFrequencyStore(),nodeFrequency=computed(()=>nodeFrequencyStore.getNodeFrequency(props.nodeDef)),nodeBookmarkStore=useNodeBookmarkStore(),isBookmarked=computed(()=>nodeBookmarkStore.isBookmarked(props.nodeDef)),props=__props;return(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$j,[createBaseVNode("div",_hoisted_2$d,[createBaseVNode("div",null,[isBookmarked.value?(openBlock(),createElementBlock("span",_hoisted_3$b,_hoisted_5$2)):createCommentVNode("",!0),createBaseVNode("span",{innerHTML:unref(highlightQuery)(_ctx.nodeDef.display_name,_ctx.currentQuery)},null,8,_hoisted_6$1),_hoisted_7,showIdName.value?(openBlock(),createBlock(unref(script$o),{key:1,severity:"secondary"},{default:withCtx(()=>[createBaseVNode("span",{innerHTML:unref(highlightQuery)(_ctx.nodeDef.name,_ctx.currentQuery)},null,8,_hoisted_8)]),_:1})):createCommentVNode("",!0)]),showCategory.value?(openBlock(),createElementBlock("div",_hoisted_9,toDisplayString(_ctx.nodeDef.category.replaceAll("/"," > ")),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_10,[_ctx.nodeDef.experimental?(openBlock(),createBlock(unref(script$o),{key:0,value:_ctx.$t("g.experimental"),severity:"primary"},null,8,["value"])):createCommentVNode("",!0),_ctx.nodeDef.deprecated?(openBlock(),createBlock(unref(script$o),{key:1,value:_ctx.$t("g.deprecated"),severity:"danger"},null,8,["value"])):createCommentVNode("",!0),showNodeFrequency.value&&nodeFrequency.value>0?(openBlock(),createBlock(unref(script$o),{key:2,value:unref(formatNumberWithSuffix)(nodeFrequency.value,{roundToInt:!0}),severity:"secondary"},null,8,["value"])):createCommentVNode("",!0),_ctx.nodeDef.nodeSource.type!==unref(NodeSourceType).Unknown?(openBlock(),createBlock(unref(script$n),{key:3,class:"text-sm font-light"},{default:withCtx(()=>[createTextVNode(toDisplayString(_ctx.nodeDef.nodeSource.displayText),1)]),_:1})):createCommentVNode("",!0)])]))}}),NodeSearchItem=_export_sfc(_sfc_main$j,[["__scopeId","data-v-5741c9ae"]]),_hoisted_1$i={class:"comfy-vue-node-search-container flex justify-center items-center w-full min-w-96 pointer-events-auto"},_hoisted_2$c={key:0,class:"comfy-vue-node-preview-container absolute left-[-350px] top-[50px]"},_hoisted_3$a=createBaseVNode("h3",null,"Add node filter condition",-1),_hoisted_4$2={class:"_dialog-body"},_sfc_main$i=defineComponent({__name:"NodeSearchBox",props:{filters:{},searchLimit:{default:64}},emits:["addFilter","removeFilter","addNode"],setup(__props,{emit:__emit}){const settingStore=useSettingStore(),{t}=useI18n(),enableNodePreview=computed(()=>settingStore.get("Comfy.NodeSearchBoxImpl.NodePreview")),props=__props,nodeSearchFilterVisible=ref(!1),inputId=`comfy-vue-node-search-box-input-${Math.random()}`,suggestions2=ref([]),hoveredSuggestion=ref(null),currentQuery=ref(""),placeholder=computed(()=>props.filters.length===0?t("g.searchNodes")+"...":""),nodeDefStore=useNodeDefStore(),nodeFrequencyStore=useNodeFrequencyStore(),search2=__name(query=>{const queryIsEmpty=query===""&&props.filters.length===0;currentQuery.value=query,suggestions2.value=queryIsEmpty?nodeFrequencyStore.topNodeDefs:[...nodeDefStore.nodeSearchService.searchNode(query,props.filters,{limit:props.searchLimit})]},"search"),emit=__emit;let inputElement=null;const reFocusInput=__name(()=>{inputElement??=document.getElementById(inputId),inputElement&&(inputElement.blur(),nextTick(()=>inputElement?.focus()))},"reFocusInput");onMounted(reFocusInput);const onAddFilter=__name(filterAndValue=>{nodeSearchFilterVisible.value=!1,emit("addFilter",filterAndValue),reFocusInput()},"onAddFilter"),onRemoveFilter=__name((event,filterAndValue)=>{event.stopPropagation(),event.preventDefault(),emit("removeFilter",filterAndValue),reFocusInput()},"onRemoveFilter"),setHoverSuggestion=__name(index=>{if(index===-1){hoveredSuggestion.value=null;return}const value=suggestions2.value[index];hoveredSuggestion.value=value},"setHoverSuggestion");return(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$i,[enableNodePreview.value?(openBlock(),createElementBlock("div",_hoisted_2$c,[hoveredSuggestion.value?(openBlock(),createBlock(NodePreview,{nodeDef:hoveredSuggestion.value,key:hoveredSuggestion.value?.name||""},null,8,["nodeDef"])):createCommentVNode("",!0)])):createCommentVNode("",!0),createVNode(unref(script$d),{icon:"pi pi-filter",severity:"secondary",class:"filter-button z-10",onClick:_cache[0]||(_cache[0]=$event=>nodeSearchFilterVisible.value=!0)}),createVNode(unref(script$p),{visible:nodeSearchFilterVisible.value,"onUpdate:visible":_cache[1]||(_cache[1]=$event=>nodeSearchFilterVisible.value=$event),class:"min-w-96"},{header:withCtx(()=>[_hoisted_3$a]),default:withCtx(()=>[createBaseVNode("div",_hoisted_4$2,[createVNode(NodeSearchFilter,{onAddFilter})])]),_:1},8,["visible"]),createVNode(_sfc_main$k,{"model-value":props.filters,class:"comfy-vue-node-search-box z-10 flex-grow",scrollHeight:"40vh",placeholder:placeholder.value,"input-id":inputId,"append-to":"self",suggestions:suggestions2.value,"min-length":0,delay:100,loading:!unref(nodeFrequencyStore).isLoaded,onComplete:_cache[2]||(_cache[2]=$event=>search2($event.query)),onOptionSelect:_cache[3]||(_cache[3]=$event=>emit("addNode",$event.value)),onFocusedOptionChanged:_cache[4]||(_cache[4]=$event=>setHoverSuggestion($event)),"complete-on-focus":"","auto-option-focus":"","force-selection":"",multiple:"",optionLabel:"display_name"},{option:withCtx(({option:option2})=>[createVNode(NodeSearchItem,{nodeDef:option2,currentQuery:currentQuery.value},null,8,["nodeDef","currentQuery"])]),chip:withCtx(({value})=>[(openBlock(),createBlock(SearchFilterChip,{key:`${value[0].id}-${value[1]}`,onRemove:__name($event=>onRemoveFilter($event,value),"onRemove"),text:value[1],badge:value[0].invokeSequence.toUpperCase(),"badge-class":value[0].invokeSequence+"-badge"},null,8,["onRemove","text","badge","badge-class"]))]),_:1},8,["model-value","placeholder","suggestions","loading"])]))}}),_sfc_main$h=defineComponent({__name:"NodeSearchBoxPopover",setup(__props){const settingStore=useSettingStore(),litegraphService=useLitegraphService(),{visible}=storeToRefs(useSearchBoxStore()),dismissable=ref(!0),triggerEvent=ref(null),getNewNodeLocation=__name(()=>{if(!triggerEvent.value)return litegraphService.getCanvasCenter();const originalEvent=triggerEvent.value.detail.originalEvent;return[originalEvent.canvasX,originalEvent.canvasY]},"getNewNodeLocation"),nodeFilters=ref([]),addFilter=__name(filter=>{nodeFilters.value.push(filter)},"addFilter"),removeFilter=__name(filter=>{nodeFilters.value=nodeFilters.value.filter(f=>toRaw(f)!==toRaw(filter))},"removeFilter"),clearFilters=__name(()=>{nodeFilters.value=[]},"clearFilters"),closeDialog=__name(()=>{visible.value=!1},"closeDialog"),addNode=__name(nodeDef=>{const node=litegraphService.addNodeOnGraph(nodeDef,{pos:getNewNodeLocation()}),eventDetail=triggerEvent.value?.detail;eventDetail&&eventDetail.subType==="empty-release"&&eventDetail.linkReleaseContext.links.forEach(link=>{ConnectingLinkImpl.createFromPlainObject(link).connectTo(node)}),window.setTimeout(()=>{closeDialog()},100)},"addNode"),newSearchBoxEnabled=computed(()=>settingStore.get("Comfy.NodeSearchBoxImpl")==="default"),showSearchBox=__name(e=>{const detail=e.detail;newSearchBoxEnabled.value?detail.originalEvent?.pointerType==="touch"?setTimeout(()=>{showNewSearchBox(e)},128):showNewSearchBox(e):canvasStore.canvas.showSearchBox(detail.originalEvent)},"showSearchBox"),nodeDefStore=useNodeDefStore(),showNewSearchBox=__name(e=>{if(e.detail.subType==="empty-release"){const links=e.detail.linkReleaseContext.links;if(links.length===0){console.warn("Empty release with no links! This should never happen");return}const firstLink=ConnectingLinkImpl.createFromPlainObject(links[0]),filter=nodeDefStore.nodeSearchService.getFilterById(firstLink.releaseSlotType),dataType=firstLink.type.toString();addFilter([filter,dataType])}visible.value=!0,triggerEvent.value=e,dismissable.value=!1,setTimeout(()=>{dismissable.value=!0},300)},"showNewSearchBox"),showContextMenu=__name(e=>{if(e.detail.subType!=="empty-release")return;const links=e.detail.linkReleaseContext.links;if(links.length===0){console.warn("Empty release with no links! This should never happen");return}const firstLink=ConnectingLinkImpl.createFromPlainObject(links[0]),commonOptions={e:e.detail.originalEvent,allow_searchbox:!0,showSearchBox:__name(()=>showSearchBox(e),"showSearchBox")},connectionOptions=firstLink.output?{nodeFrom:firstLink.node,slotFrom:firstLink.output,afterRerouteId:firstLink.afterRerouteId}:{nodeTo:firstLink.node,slotTo:firstLink.input,afterRerouteId:firstLink.afterRerouteId};canvasStore.canvas.showConnectionMenu({...connectionOptions,...commonOptions})},"showContextMenu"),canvasStore=useCanvasStore();watchEffect(()=>{canvasStore.canvas&&(LiteGraph.release_link_on_empty_shows_menu=!1,canvasStore.canvas.allow_searchbox=!1)});const canvasEventHandler=__name(e=>{if(e.detail.subType==="empty-double-click")showSearchBox(e);else if(e.detail.subType==="empty-release")handleCanvasEmptyRelease(e);else if(e.detail.subType==="group-double-click"){const group=e.detail.group,[x,y]=group.pos;e.detail.originalEvent.canvasY-y>group.titleHeight&&showSearchBox(e)}},"canvasEventHandler"),linkReleaseAction=computed(()=>settingStore.get("Comfy.LinkRelease.Action")),linkReleaseActionShift=computed(()=>settingStore.get("Comfy.LinkRelease.ActionShift")),handleCanvasEmptyRelease=__name(e=>{switch(e.detail.originalEvent.shiftKey?linkReleaseActionShift.value:linkReleaseAction.value){case LinkReleaseTriggerAction.SEARCH_BOX:showSearchBox(e);break;case LinkReleaseTriggerAction.CONTEXT_MENU:showContextMenu(e);break;case LinkReleaseTriggerAction.NO_ACTION:default:break}},"handleCanvasEmptyRelease");return useEventListener(document,"litegraph:canvas",canvasEventHandler),(_ctx,_cache)=>(openBlock(),createElementBlock("div",null,[createVNode(unref(script$p),{visible:unref(visible),"onUpdate:visible":_cache[0]||(_cache[0]=$event=>isRef(visible)?visible.value=$event:null),modal:"","dismissable-mask":dismissable.value,onHide:clearFilters,pt:{root:{class:"invisible-dialog-root",role:"search"},mask:{class:"node-search-box-dialog-mask"},transition:{enterFromClass:"opacity-0 scale-75",enterActiveClass:"transition-all duration-100 ease-out",leaveActiveClass:"transition-all duration-100 ease-in",leaveToClass:"opacity-0 scale-75"}}},{container:withCtx(()=>[createVNode(_sfc_main$i,{filters:nodeFilters.value,onAddFilter:addFilter,onRemoveFilter:removeFilter,onAddNode:addNode},null,8,["filters"])]),_:1},8,["visible","dismissable-mask"])]))}});var theme$4=__name(function(_ref){var dt=_ref.dt;return`
.p-overlaybadge {
    position: relative;
}

.p-overlaybadge .p-badge {
    position: absolute;
    top: 0;
    right: 0;
    transform: translate(50%, -50%);
    transform-origin: 100% 0;
    margin: 0;
    outline-width: `.concat(dt("overlaybadge.outline.width"),`;
    outline-style: solid;
    outline-color: `).concat(dt("overlaybadge.outline.color"),`;
}
`)},"theme"),classes$4={root:"p-overlaybadge"},OverlayBadgeStyle=BaseStyle.extend({name:"overlaybadge",theme:theme$4,classes:classes$4}),script$1$4={name:"OverlayBadge",extends:script$q,style:OverlayBadgeStyle,provide:__name(function(){return{$pcOverlayBadge:this,$parentInstance:this}},"provide")},script$6={name:"OverlayBadge",extends:script$1$4,inheritAttrs:!1,components:{Badge:script$q}};function render$b(_ctx,_cache,$props,$setup,$data,$options){var _component_Badge=resolveComponent("Badge");return openBlock(),createElementBlock("div",mergeProps({class:_ctx.cx("root")},_ctx.ptmi("root")),[renderSlot(_ctx.$slots,"default"),createVNode(_component_Badge,mergeProps(_ctx.$props,{pt:_ctx.ptm("pcBadge")}),null,16,["pt"])],16)}__name(render$b,"render$b");script$6.render=render$b;const _sfc_main$g=defineComponent({__name:"SidebarIcon",props:{icon:String,selected:Boolean,tooltip:{type:String,default:""},class:{type:String,default:""},iconBadge:{type:[String,Function],default:""}},emits:["click"],setup(__props,{emit:__emit}){const props=__props,emit=__emit,overlayValue=computed(()=>typeof props.iconBadge=="function"?props.iconBadge()||"":props.iconBadge),shouldShowBadge=computed(()=>!!overlayValue.value);return(_ctx,_cache)=>{const _directive_tooltip=resolveDirective("tooltip");return withDirectives((openBlock(),createBlock(unref(script$d),{class:normalizeClass(props.class),text:"",pt:{root:{class:`side-bar-button ${props.selected?"p-button-primary side-bar-button-selected":"p-button-secondary"}`,"aria-label":props.tooltip}},onClick:_cache[0]||(_cache[0]=$event=>emit("click",$event))},{icon:withCtx(()=>[shouldShowBadge.value?(openBlock(),createBlock(unref(script$6),{key:0,value:overlayValue.value},{default:withCtx(()=>[createBaseVNode("i",{class:normalizeClass(props.icon+" side-bar-button-icon")},null,2)]),_:1},8,["value"])):(openBlock(),createElementBlock("i",{key:1,class:normalizeClass(props.icon+" side-bar-button-icon")},null,2))]),_:1},8,["class","pt"])),[[_directive_tooltip,{value:props.tooltip,showDelay:300,hideDelay:300}]])}}}),SidebarIcon=_export_sfc(_sfc_main$g,[["__scopeId","data-v-6ab4daa6"]]),_sfc_main$f=defineComponent({__name:"SidebarLogoutIcon",setup(__props){const{t}=useI18n(),userStore=useUserStore(),tooltip=computed(()=>`${t("sideToolbar.logout")} (${userStore.currentUser?.username})`),logout=__name(()=>{userStore.logout(),window.location.reload()},"logout");return(_ctx,_cache)=>(openBlock(),createBlock(SidebarIcon,{icon:"pi pi-sign-out",tooltip:tooltip.value,onClick:logout},null,8,["tooltip"]))}}),_sfc_main$e=defineComponent({__name:"SidebarSettingsToggleIcon",setup(__props){const dialogStore=useDialogStore(),showSetting=__name(()=>{dialogStore.showDialog({key:"global-settings",headerComponent:SettingDialogHeader,component:SettingDialogContent})},"showSetting");return(_ctx,_cache)=>(openBlock(),createBlock(SidebarIcon,{icon:"pi pi-cog",class:"comfy-settings-btn",onClick:showSetting,tooltip:_ctx.$t("g.settings")},null,8,["tooltip"]))}}),_sfc_main$d=defineComponent({__name:"SidebarThemeToggleIcon",setup(__props){const colorPaletteStore=useColorPaletteStore(),icon=computed(()=>colorPaletteStore.completedActivePalette.light_theme?"pi pi-sun":"pi pi-moon"),commandStore=useCommandStore(),toggleTheme=__name(()=>{commandStore.execute("Comfy.ToggleTheme")},"toggleTheme");return(_ctx,_cache)=>(openBlock(),createBlock(SidebarIcon,{icon:icon.value,onClick:toggleTheme,tooltip:_ctx.$t("sideToolbar.themeToggle"),class:"comfy-vue-theme-toggle"},null,8,["icon","tooltip"]))}});const _hoisted_1$h={class:"side-tool-bar-end"},_hoisted_2$b={key:0,class:"sidebar-content-container h-full overflow-y-auto overflow-x-hidden"},_sfc_main$c=defineComponent({__name:"SideToolbar",setup(__props){const workspaceStore=useWorkspaceStore(),settingStore=useSettingStore(),userStore=useUserStore(),teleportTarget=computed(()=>settingStore.get("Comfy.Sidebar.Location")==="left"?".comfyui-body-left":".comfyui-body-right"),isSmall=computed(()=>settingStore.get("Comfy.Sidebar.Size")==="small"),tabs=computed(()=>workspaceStore.getSidebarTabs()),selectedTab=computed(()=>workspaceStore.sidebarTab.activeSidebarTab),onTabClick=__name(item3=>{workspaceStore.sidebarTab.toggleSidebarTab(item3.id)},"onTabClick"),keybindingStore=useKeybindingStore(),getTabTooltipSuffix=__name(tab=>{const keybinding=keybindingStore.getKeybindingByCommandId(`Workspace.ToggleSidebarTab.${tab.id}`);return keybinding?` (${keybinding.combo.toString()})`:""},"getTabTooltipSuffix");return(_ctx,_cache)=>(openBlock(),createElementBlock(Fragment,null,[(openBlock(),createBlock(Teleport,{to:teleportTarget.value},[createBaseVNode("nav",{class:normalizeClass("side-tool-bar-container"+(isSmall.value?" small-sidebar":""))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(tabs.value,tab=>(openBlock(),createBlock(SidebarIcon,{key:tab.id,icon:tab.icon,iconBadge:tab.iconBadge,tooltip:tab.tooltip+getTabTooltipSuffix(tab),selected:tab.id===selectedTab.value?.id,class:normalizeClass(tab.id+"-tab-button"),onClick:__name($event=>onTabClick(tab),"onClick")},null,8,["icon","iconBadge","tooltip","selected","class","onClick"]))),128)),createBaseVNode("div",_hoisted_1$h,[unref(userStore).isMultiUserServer?(openBlock(),createBlock(_sfc_main$f,{key:0})):createCommentVNode("",!0),createVNode(_sfc_main$d),createVNode(_sfc_main$e)])],2)],8,["to"])),selectedTab.value?(openBlock(),createElementBlock("div",_hoisted_2$b,[createVNode(_sfc_main$q,{extension:selectedTab.value},null,8,["extension"])])):createCommentVNode("",!0)],64))}}),SideToolbar=_export_sfc(_sfc_main$c,[["__scopeId","data-v-37d8d7b4"]]);const _hoisted_1$g={class:"workflow-label text-sm max-w-[150px] truncate inline-block"},_hoisted_2$a={class:"relative"},_hoisted_3$9={key:0,class:"status-indicator"},_sfc_main$b=defineComponent({__name:"WorkflowTab",props:{class:{},workflowOption:{}},setup(__props){const props=__props,workspaceStore=useWorkspaceStore(),workflowStore=useWorkflowStore(),workflowTabRef=ref(null),closeWorkflows=__name(async options=>{for(const opt of options)if(!await useWorkflowService().closeWorkflow(opt.workflow,{warnIfUnsaved:!workspaceStore.shiftDown}))break},"closeWorkflows"),onCloseWorkflow=__name(option2=>{closeWorkflows([option2])},"onCloseWorkflow"),tabGetter=__name(()=>workflowTabRef.value,"tabGetter");return usePragmaticDraggable(tabGetter,{getInitialData:__name(()=>({workflowKey:props.workflowOption.workflow.key}),"getInitialData")}),usePragmaticDroppable(tabGetter,{getData:__name(()=>({workflowKey:props.workflowOption.workflow.key}),"getData"),onDrop:__name(e=>{const fromIndex=workflowStore.openWorkflows.findIndex(wf=>wf.key===e.source.data.workflowKey),toIndex=workflowStore.openWorkflows.findIndex(wf=>wf.key===e.location.current.dropTargets[0]?.data.workflowKey);fromIndex!==toIndex&&workflowStore.reorderWorkflows(fromIndex,toIndex)},"onDrop")}),(_ctx,_cache)=>{const _directive_tooltip=resolveDirective("tooltip");return openBlock(),createElementBlock("div",mergeProps({class:"flex p-2 gap-2 workflow-tab",ref_key:"workflowTabRef",ref:workflowTabRef},_ctx.$attrs),[withDirectives((openBlock(),createElementBlock("span",_hoisted_1$g,[createTextVNode(toDisplayString(_ctx.workflowOption.workflow.filename),1)])),[[_directive_tooltip,_ctx.workflowOption.workflow.key,void 0,{bottom:!0}]]),createBaseVNode("div",_hoisted_2$a,[!unref(workspaceStore).shiftDown&&(_ctx.workflowOption.workflow.isModified||!_ctx.workflowOption.workflow.isPersisted)?(openBlock(),createElementBlock("span",_hoisted_3$9,"")):createCommentVNode("",!0),createVNode(unref(script$d),{class:"close-button p-0 w-auto",icon:"pi pi-times",text:"",severity:"secondary",size:"small",onClick:_cache[0]||(_cache[0]=withModifiers($event=>onCloseWorkflow(_ctx.workflowOption),["stop"]))})])],16)}}}),WorkflowTab=_export_sfc(_sfc_main$b,[["__scopeId","data-v-8d011a31"]]);const _hoisted_1$f={class:"workflow-tabs-container flex flex-row w-full"},_sfc_main$a=defineComponent({__name:"WorkflowTabs",props:{class:{}},setup(__props){const props=__props,{t}=useI18n(),workspaceStore=useWorkspaceStore(),workflowStore=useWorkflowStore(),workflowService=useWorkflowService(),rightClickedTab=ref(null),menu=ref(),workflowToOption=__name(workflow=>({value:workflow.path,workflow}),"workflowToOption"),options=computed(()=>workflowStore.openWorkflows.map(workflowToOption)),selectedWorkflow=computed(()=>workflowStore.activeWorkflow?workflowToOption(workflowStore.activeWorkflow):null),onWorkflowChange=__name(option2=>{option2&&selectedWorkflow.value?.value!==option2.value&&workflowService.openWorkflow(option2.workflow)},"onWorkflowChange"),closeWorkflows=__name(async options2=>{for(const opt of options2)if(!await workflowService.closeWorkflow(opt.workflow,{warnIfUnsaved:!workspaceStore.shiftDown}))break},"closeWorkflows"),onCloseWorkflow=__name(option2=>{closeWorkflows([option2])},"onCloseWorkflow"),showContextMenu=__name((event,option2)=>{rightClickedTab.value=option2,menu.value.show(event)},"showContextMenu"),contextMenuItems=computed(()=>{const tab=rightClickedTab.value;if(!tab)return[];const index=options.value.findIndex(v=>v.workflow===tab.workflow);return[{label:t("tabMenu.duplicateTab"),command:__name(()=>{workflowService.duplicateWorkflow(tab.workflow)},"command")},{separator:!0},{label:t("tabMenu.closeTab"),command:__name(()=>onCloseWorkflow(tab),"command")},{label:t("tabMenu.closeTabsToLeft"),command:__name(()=>closeWorkflows(options.value.slice(0,index)),"command"),disabled:index<=0},{label:t("tabMenu.closeTabsToRight"),command:__name(()=>closeWorkflows(options.value.slice(index+1)),"command"),disabled:index===options.value.length-1},{label:t("tabMenu.closeOtherTabs"),command:__name(()=>closeWorkflows([...options.value.slice(index+1),...options.value.slice(0,index)]),"command"),disabled:options.value.length<=1}]}),commandStore=useCommandStore(),handleWheel=__name(event=>{const scrollElement=event.currentTarget,scrollAmount=event.deltaX||event.deltaY;scrollElement.scroll({left:scrollElement.scrollLeft+scrollAmount})},"handleWheel");return(_ctx,_cache)=>{const _directive_tooltip=resolveDirective("tooltip");return openBlock(),createElementBlock("div",_hoisted_1$f,[createVNode(unref(script$s),{class:"overflow-hidden","pt:content":{class:"p-0 w-full",onwheel:handleWheel}},{default:withCtx(()=>[createVNode(unref(script$r),{class:normalizeClass(["workflow-tabs bg-transparent",props.class]),modelValue:selectedWorkflow.value,"onUpdate:modelValue":onWorkflowChange,options:options.value,optionLabel:"label",dataKey:"value"},{option:withCtx(({option:option2})=>[createVNode(WorkflowTab,{onContextmenu:__name($event=>showContextMenu($event,option2),"onContextmenu"),onMouseup:withModifiers($event=>onCloseWorkflow(option2),["middle"]),"workflow-option":option2},null,8,["onContextmenu","onMouseup","workflow-option"])]),_:1},8,["class","modelValue","options"])]),_:1},8,["pt:content"]),withDirectives(createVNode(unref(script$d),{class:"new-blank-workflow-button flex-shrink-0",icon:"pi pi-plus",text:"",severity:"secondary","aria-label":_ctx.$t("sideToolbar.newBlankWorkflow"),onClick:_cache[0]||(_cache[0]=()=>unref(commandStore).execute("Comfy.NewBlankWorkflow"))},null,8,["aria-label"]),[[_directive_tooltip,{value:_ctx.$t("sideToolbar.newBlankWorkflow"),showDelay:300}]]),createVNode(unref(script$t),{ref_key:"menu",ref:menu,model:contextMenuItems.value},null,8,["model"])])}}}),WorkflowTabs=_export_sfc(_sfc_main$a,[["__scopeId","data-v-2175b099"]]);const _hoisted_1$e={class:"absolute top-0 left-0 w-auto max-w-full pointer-events-auto"},_sfc_main$9=defineComponent({__name:"SecondRowWorkflowTabs",setup(__props){return(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$e,[createVNode(WorkflowTabs)]))}}),SecondRowWorkflowTabs=_export_sfc(_sfc_main$9,[["__scopeId","data-v-38831d8e"]]),CORE_SETTINGS=[{id:"Comfy.Validation.Workflows",name:"Validate workflows",type:"boolean",defaultValue:!0},{id:"Comfy.NodeSearchBoxImpl",category:["Comfy","Node Search Box","Implementation"],experimental:!0,name:"Node search box implementation",type:"combo",options:["default","litegraph (legacy)"],defaultValue:"default"},{id:"Comfy.LinkRelease.Action",category:["LiteGraph","LinkRelease","Action"],name:"Action on link release (No modifier)",type:"combo",options:Object.values(LinkReleaseTriggerAction),defaultValue:LinkReleaseTriggerAction.CONTEXT_MENU},{id:"Comfy.LinkRelease.ActionShift",category:["LiteGraph","LinkRelease","ActionShift"],name:"Action on link release (Shift)",type:"combo",options:Object.values(LinkReleaseTriggerAction),defaultValue:LinkReleaseTriggerAction.SEARCH_BOX},{id:"Comfy.NodeSearchBoxImpl.NodePreview",category:["Comfy","Node Search Box","NodePreview"],name:"Node preview",tooltip:"Only applies to the default implementation",type:"boolean",defaultValue:!0},{id:"Comfy.NodeSearchBoxImpl.ShowCategory",category:["Comfy","Node Search Box","ShowCategory"],name:"Show node category in search results",tooltip:"Only applies to the default implementation",type:"boolean",defaultValue:!0},{id:"Comfy.NodeSearchBoxImpl.ShowIdName",category:["Comfy","Node Search Box","ShowIdName"],name:"Show node id name in search results",tooltip:"Only applies to the default implementation",type:"boolean",defaultValue:!1},{id:"Comfy.NodeSearchBoxImpl.ShowNodeFrequency",category:["Comfy","Node Search Box","ShowNodeFrequency"],name:"Show node frequency in search results",tooltip:"Only applies to the default implementation",type:"boolean",defaultValue:!1},{id:"Comfy.Sidebar.Location",category:["Appearance","Sidebar","Location"],name:"Sidebar location",type:"combo",options:["left","right"],defaultValue:"left"},{id:"Comfy.Sidebar.Size",category:["Appearance","Sidebar","Size"],name:"Sidebar size",type:"combo",options:["normal","small"],defaultValue:__name(()=>window.innerWidth<1536?"small":"normal","defaultValue")},{id:"Comfy.TextareaWidget.FontSize",category:["Appearance","Node Widget","TextareaWidget","FontSize"],name:"Textarea widget font size",type:"slider",defaultValue:10,attrs:{min:8,max:24}},{id:"Comfy.TextareaWidget.Spellcheck",category:["Comfy","Node Widget","TextareaWidget","Spellcheck"],name:"Textarea widget spellcheck",type:"boolean",defaultValue:!1},{id:"Comfy.Workflow.SortNodeIdOnSave",name:"Sort node IDs when saving workflow",type:"boolean",defaultValue:!1},{id:"Comfy.Graph.CanvasInfo",category:["LiteGraph","Canvas","CanvasInfo"],name:"Show canvas info on bottom left corner (fps, etc.)",type:"boolean",defaultValue:!0},{id:"Comfy.Node.ShowDeprecated",name:"Show deprecated nodes in search",tooltip:"Deprecated nodes are hidden by default in the UI, but remain functional in existing workflows that use them.",type:"boolean",defaultValue:!1},{id:"Comfy.Node.ShowExperimental",name:"Show experimental nodes in search",tooltip:"Experimental nodes are marked as such in the UI and may be subject to significant changes or removal in future versions. Use with caution in production workflows",type:"boolean",defaultValue:!0},{id:"Comfy.Node.Opacity",category:["Appearance","Node","Opacity"],name:"Node opacity",type:"slider",defaultValue:1,attrs:{min:.01,max:1,step:.01}},{id:"Comfy.Workflow.ShowMissingNodesWarning",name:"Show missing nodes warning",type:"boolean",defaultValue:!0},{id:"Comfy.Workflow.ShowMissingModelsWarning",name:"Show missing models warning",type:"boolean",defaultValue:!1,experimental:!0},{id:"Comfy.Graph.ZoomSpeed",category:["LiteGraph","Canvas","ZoomSpeed"],name:"Canvas zoom speed",type:"slider",defaultValue:1.1,attrs:{min:1.01,max:2.5,step:.01}},{id:"Comfy.NodeLibrary.Bookmarks",name:"Node library bookmarks with display name (deprecated)",type:"hidden",defaultValue:[],deprecated:!0},{id:"Comfy.NodeLibrary.Bookmarks.V2",name:"Node library bookmarks v2 with unique name",type:"hidden",defaultValue:[]},{id:"Comfy.NodeLibrary.BookmarksCustomization",name:"Node library bookmarks customization",type:"hidden",defaultValue:{}},{id:"Comfy.Queue.ImageFit",name:"Queue image fit",type:"hidden",defaultValue:"cover"},{id:"Comfy.GroupSelectedNodes.Padding",category:["LiteGraph","Group","Padding"],name:"Group selected nodes padding",type:"slider",defaultValue:10,attrs:{min:0,max:100}},{id:"Comfy.Node.DoubleClickTitleToEdit",category:["LiteGraph","Node","DoubleClickTitleToEdit"],name:"Double click node title to edit",type:"boolean",defaultValue:!0},{id:"Comfy.Group.DoubleClickTitleToEdit",category:["LiteGraph","Group","DoubleClickTitleToEdit"],name:"Double click group title to edit",type:"boolean",defaultValue:!0},{id:"Comfy.Window.UnloadConfirmation",name:"Show confirmation when closing window",type:"boolean",defaultValue:!1},{id:"Comfy.TreeExplorer.ItemPadding",category:["Appearance","Tree Explorer","ItemPadding"],name:"Tree explorer item padding",type:"slider",defaultValue:2,attrs:{min:0,max:8,step:1}},{id:"Comfy.ModelLibrary.AutoLoadAll",name:"Automatically load all model folders",tooltip:"If true, all folders will load as soon as you open the model library (this may cause delays while it loads). If false, root level model folders will only load once you click on them.",type:"boolean",defaultValue:!1},{id:"Comfy.ModelLibrary.NameFormat",name:"What name to display in the model library tree view",tooltip:'Select "filename" to render a simplified view of the raw filename (without directory or ".safetensors" extension) in the model list. Select "title" to display the configurable model metadata title.',type:"combo",options:["filename","title"],defaultValue:"title"},{id:"Comfy.Locale",name:"Language",type:"combo",options:[{value:"en",text:"English"},{value:"zh",text:""},{value:"ru",text:""},{value:"ja",text:""},{value:"ko",text:""},{value:"fr",text:"Franais"}],defaultValue:__name(()=>navigator.language.split("-")[0]||"en","defaultValue")},{id:"Comfy.NodeBadge.NodeSourceBadgeMode",category:["LiteGraph","Node","NodeSourceBadgeMode"],name:"Node source badge mode",type:"combo",options:Object.values(NodeBadgeMode),defaultValue:NodeBadgeMode.HideBuiltIn},{id:"Comfy.NodeBadge.NodeIdBadgeMode",category:["LiteGraph","Node","NodeIdBadgeMode"],name:"Node ID badge mode",type:"combo",options:[NodeBadgeMode.None,NodeBadgeMode.ShowAll],defaultValue:NodeBadgeMode.ShowAll},{id:"Comfy.NodeBadge.NodeLifeCycleBadgeMode",category:["LiteGraph","Node","NodeLifeCycleBadgeMode"],name:"Node life cycle badge mode",type:"combo",options:[NodeBadgeMode.None,NodeBadgeMode.ShowAll],defaultValue:NodeBadgeMode.ShowAll},{id:"Comfy.ConfirmClear",category:["Comfy","Workflow","ConfirmClear"],name:"Require confirmation when clearing workflow",type:"boolean",defaultValue:!0},{id:"Comfy.PromptFilename",category:["Comfy","Workflow","PromptFilename"],name:"Prompt for filename when saving workflow",type:"boolean",defaultValue:!0},{id:"Comfy.PreviewFormat",category:["LiteGraph","Node Widget","PreviewFormat"],name:"Preview image format",tooltip:"When displaying a preview in the image widget, convert it to a lightweight image, e.g. webp, jpeg, webp;50, etc.",type:"text",defaultValue:""},{id:"Comfy.DisableSliders",category:["LiteGraph","Node Widget","DisableSliders"],name:"Disable node widget sliders",type:"boolean",defaultValue:!1},{id:"Comfy.DisableFloatRounding",category:["LiteGraph","Node Widget","DisableFloatRounding"],name:"Disable default float widget rounding.",tooltip:"(requires page reload) Cannot disable round when round is set by the node in the backend.",type:"boolean",defaultValue:!1},{id:"Comfy.FloatRoundingPrecision",category:["LiteGraph","Node Widget","FloatRoundingPrecision"],name:"Float widget rounding decimal places [0 = auto].",tooltip:"(requires page reload)",type:"slider",attrs:{min:0,max:6,step:1},defaultValue:0},{id:"Comfy.EnableTooltips",category:["LiteGraph","Node","EnableTooltips"],name:"Enable Tooltips",type:"boolean",defaultValue:!0},{id:"Comfy.DevMode",name:"Enable dev mode options (API save, etc.)",type:"boolean",defaultValue:!1,onChange:__name(value=>{const element=document.getElementById("comfy-dev-save-api-button");element&&(element.style.display=value?"flex":"none")},"onChange")},{id:"Comfy.UseNewMenu",category:["Comfy","Menu","UseNewMenu"],defaultValue:"Top",name:"Use new menu",type:"combo",options:["Disabled","Top","Bottom"],migrateDeprecatedValue:__name(value=>value==="Floating"?"Top":value,"migrateDeprecatedValue")},{id:"Comfy.Workflow.WorkflowTabsPosition",name:"Opened workflows position",type:"combo",options:["Sidebar","Topbar","Topbar (2nd-row)"],defaultValue:__name(()=>window.innerWidth<1536?"Topbar (2nd-row)":"Topbar","defaultValue")},{id:"Comfy.Graph.CanvasMenu",category:["LiteGraph","Canvas","CanvasMenu"],name:"Show graph canvas menu",type:"boolean",defaultValue:!0},{id:"Comfy.QueueButton.BatchCountLimit",name:"Batch count limit",tooltip:"The maximum number of tasks added to the queue at one button click",type:"number",defaultValue:100,versionAdded:"1.3.5"},{id:"Comfy.Keybinding.UnsetBindings",name:"Keybindings unset by the user",type:"hidden",defaultValue:[],versionAdded:"1.3.7",versionModified:"1.7.3",migrateDeprecatedValue:__name(value=>value.map(keybinding=>(keybinding.targetSelector==="#graph-canvas"&&(keybinding.targetElementId="graph-canvas"),keybinding)),"migrateDeprecatedValue")},{id:"Comfy.Keybinding.NewBindings",name:"Keybindings set by the user",type:"hidden",defaultValue:[],versionAdded:"1.3.7"},{id:"Comfy.Extension.Disabled",name:"Disabled extension names",type:"hidden",defaultValue:[],versionAdded:"1.3.11"},{id:"Comfy.Validation.NodeDefs",name:"Validate node definitions (slow)",type:"boolean",tooltip:"Recommended for node developers. This will validate all node definitions on startup.",defaultValue:!1,versionAdded:"1.3.14"},{id:"Comfy.LinkRenderMode",category:["LiteGraph","Graph","LinkRenderMode"],name:"Link Render Mode",defaultValue:2,type:"combo",options:[{value:LiteGraph.STRAIGHT_LINK,text:"Straight"},{value:LiteGraph.LINEAR_LINK,text:"Linear"},{value:LiteGraph.SPLINE_LINK,text:"Spline"},{value:LiteGraph.HIDDEN_LINK,text:"Hidden"}]},{id:"Comfy.Node.AutoSnapLinkToSlot",category:["LiteGraph","Node","AutoSnapLinkToSlot"],name:"Auto snap link to node slot",tooltip:"When dragging a link over a node, the link automatically snap to a viable input slot on the node",type:"boolean",defaultValue:!0,versionAdded:"1.3.29"},{id:"Comfy.Node.SnapHighlightsNode",category:["LiteGraph","Node","SnapHighlightsNode"],name:"Snap highlights node",tooltip:"When dragging a link over a node with viable input slot, highlight the node",type:"boolean",defaultValue:!0,versionAdded:"1.3.29"},{id:"Comfy.Node.BypassAllLinksOnDelete",category:["LiteGraph","Node","BypassAllLinksOnDelete"],name:"Keep all links when deleting nodes",tooltip:"When deleting a node, attempt to reconnect all of its input and output links (bypassing the deleted node)",type:"boolean",defaultValue:!0,versionAdded:"1.3.40"},{id:"Comfy.Node.MiddleClickRerouteNode",category:["LiteGraph","Node","MiddleClickRerouteNode"],name:"Middle-click creates a new Reroute node",type:"boolean",defaultValue:!0,versionAdded:"1.3.42"},{id:"Comfy.RerouteBeta",category:["LiteGraph","RerouteBeta"],name:"Opt-in to the reroute beta test",tooltip:`Enables the new native reroutes.

Reroutes can be added by holding alt and dragging from a link line, or on the link menu.

Disabling this option is non-destructive - reroutes are hidden.`,experimental:!0,type:"boolean",defaultValue:!1,versionAdded:"1.3.42"},{id:"Comfy.Graph.LinkMarkers",category:["LiteGraph","Link","LinkMarkers"],name:"Link midpoint markers",defaultValue:LinkMarkerShape.Circle,type:"combo",options:[{value:LinkMarkerShape.None,text:"None"},{value:LinkMarkerShape.Circle,text:"Circle"},{value:LinkMarkerShape.Arrow,text:"Arrow"}],versionAdded:"1.3.42"},{id:"Comfy.DOMClippingEnabled",category:["LiteGraph","Node","DOMClippingEnabled"],name:"Enable DOM element clipping (enabling may reduce performance)",type:"boolean",defaultValue:!0},{id:"Comfy.Graph.CtrlShiftZoom",category:["LiteGraph","Canvas","CtrlShiftZoom"],name:"Enable fast-zoom shortcut (Ctrl + Shift + Drag)",type:"boolean",defaultValue:!0,versionAdded:"1.4.0"},{id:"Comfy.Pointer.ClickDrift",category:["LiteGraph","Pointer","ClickDrift"],name:"Pointer click drift (maximum distance)",tooltip:`If the pointer moves more than this distance while holding a button down, it is considered dragging (rather than clicking).

Helps prevent objects from being unintentionally nudged if the pointer is moved whilst clicking.`,experimental:!0,type:"slider",attrs:{min:0,max:20,step:1},defaultValue:6,versionAdded:"1.4.3"},{id:"Comfy.Pointer.ClickBufferTime",category:["LiteGraph","Pointer","ClickBufferTime"],name:"Pointer click drift delay",tooltip:`After pressing a pointer button down, this is the maximum time (in milliseconds) that pointer movement can be ignored for.

Helps prevent objects from being unintentionally nudged if the pointer is moved whilst clicking.`,experimental:!0,type:"slider",attrs:{min:0,max:1e3,step:25},defaultValue:150,versionAdded:"1.4.3"},{id:"Comfy.Pointer.DoubleClickTime",category:["LiteGraph","Pointer","DoubleClickTime"],name:"Double click interval (maximum)",tooltip:"The maximum time in milliseconds between the two clicks of a double-click.  Increasing this value may assist if double-clicks are sometimes not registered.",type:"slider",attrs:{min:100,max:1e3,step:50},defaultValue:300,versionAdded:"1.4.3"},{id:"Comfy.SnapToGrid.GridSize",category:["LiteGraph","Canvas","GridSize"],name:"Snap to grid size",type:"slider",attrs:{min:1,max:500},tooltip:"When dragging and resizing nodes while holding shift they will be aligned to the grid, this controls the size of that grid.",defaultValue:LiteGraph.CANVAS_GRID_SIZE},{id:"pysssss.SnapToGrid",category:["LiteGraph","Canvas","AlwaysSnapToGrid"],name:"Always snap to grid",type:"boolean",defaultValue:!1,versionAdded:"1.3.13"},{id:"Comfy.Server.ServerConfigValues",name:"Server config values for frontend display",tooltip:"Server config values used for frontend display only",type:"hidden",defaultValue:{},versionAdded:"1.4.8"},{id:"Comfy.Server.LaunchArgs",name:"Server launch arguments",tooltip:"These are the actual arguments that are passed to the server when it is launched.",type:"hidden",defaultValue:{},versionAdded:"1.4.8"},{id:"Comfy.Queue.MaxHistoryItems",name:"Queue history size",tooltip:"The maximum number of tasks that show in the queue history.",type:"slider",attrs:{min:16,max:256,step:16},defaultValue:64,versionAdded:"1.4.12"},{id:"LiteGraph.Canvas.MaximumFps",name:"Maxium FPS",tooltip:"The maximum frames per second that the canvas is allowed to render. Caps GPU usage at the cost of smoothness. If 0, the screen refresh rate is used. Default: 0",type:"slider",attrs:{min:0,max:120},defaultValue:0,versionAdded:"1.5.1"},{id:"Comfy.EnableWorkflowViewRestore",category:["Comfy","Workflow","EnableWorkflowViewRestore"],name:"Save and restore canvas position and zoom level in workflows",type:"boolean",defaultValue:!0,versionModified:"1.5.4"},{id:"Comfy.Workflow.ConfirmDelete",name:"Show confirmation when deleting workflows",type:"boolean",defaultValue:!0,versionAdded:"1.5.6"},{id:"Comfy.ColorPalette",name:"The active color palette id",type:"hidden",defaultValue:"dark",versionModified:"1.6.7",migrateDeprecatedValue(value){return value.startsWith("custom_")?value.replace("custom_",""):value}},{id:"Comfy.CustomColorPalettes",name:"Custom color palettes",type:"hidden",defaultValue:{},versionModified:"1.6.7"},{id:"Comfy.WidgetControlMode",category:["Comfy","Node Widget","WidgetControlMode"],name:"Widget control mode",tooltip:"Controls when widget values are updated (randomize/increment/decrement), either before the prompt is queued or after.",type:"combo",defaultValue:"after",options:["before","after"],versionModified:"1.6.10"}],_sfc_main$8=defineComponent({__name:"GraphCanvas",emits:["ready"],setup(__props,{emit:__emit}){const emit=__emit,canvasRef=ref(null),litegraphService=useLitegraphService(),settingStore=useSettingStore(),nodeDefStore=useNodeDefStore(),workspaceStore=useWorkspaceStore(),canvasStore=useCanvasStore(),modelToNodeStore=useModelToNodeStore(),betaMenuEnabled=computed(()=>settingStore.get("Comfy.UseNewMenu")!=="Disabled"),workflowTabsPosition=computed(()=>settingStore.get("Comfy.Workflow.WorkflowTabsPosition")),canvasMenuEnabled=computed(()=>settingStore.get("Comfy.Graph.CanvasMenu")),tooltipEnabled=computed(()=>settingStore.get("Comfy.EnableTooltips"));watchEffect(onCleanup=>{if(isEmbedded()){const listener=__name(event=>{const data9=event.data;!data9||!data9.type||data9.type==="init"&&data9.workflow&&(console.log("init",data9),sessionStorage.clear(),localStorage.setItem("workflow",data9.workflow),FlowConfig.flowId=data9.flowId,app.initWorkflow())},"listener");window.addEventListener("message",listener),onCleanup(()=>{window.removeEventListener("message",listener)})}}),watchEffect(()=>{const canvasInfoEnabled=settingStore.get("Comfy.Graph.CanvasInfo");canvasStore.canvas&&(canvasStore.canvas.show_info=canvasInfoEnabled)}),watchEffect(()=>{const zoomSpeed=settingStore.get("Comfy.Graph.ZoomSpeed");canvasStore.canvas&&(canvasStore.canvas.zoom_speed=zoomSpeed)}),watchEffect(()=>{LiteGraph.snaps_for_comfy=settingStore.get("Comfy.Node.AutoSnapLinkToSlot")}),watchEffect(()=>{LiteGraph.snap_highlights_node=settingStore.get("Comfy.Node.SnapHighlightsNode")}),watchEffect(()=>{LGraphNode.keepAllLinksOnBypass=settingStore.get("Comfy.Node.BypassAllLinksOnDelete")}),watchEffect(()=>{LiteGraph.middle_click_slot_add_default_node=settingStore.get("Comfy.Node.MiddleClickRerouteNode")}),watchEffect(()=>{nodeDefStore.showDeprecated=settingStore.get("Comfy.Node.ShowDeprecated")}),watchEffect(()=>{nodeDefStore.showExperimental=settingStore.get("Comfy.Node.ShowExperimental")}),watchEffect(()=>{const spellcheckEnabled=settingStore.get("Comfy.TextareaWidget.Spellcheck");document.querySelectorAll("textarea.comfy-multiline-input").forEach(textarea=>{textarea.spellcheck=spellcheckEnabled,textarea.focus(),textarea.blur()})}),watchEffect(()=>{const linkRenderMode=settingStore.get("Comfy.LinkRenderMode");canvasStore.canvas&&(canvasStore.canvas.links_render_mode=linkRenderMode,canvasStore.canvas.setDirty(!1,!0))}),watchEffect(()=>{const linkMarkerShape=settingStore.get("Comfy.Graph.LinkMarkers"),{canvas}=canvasStore;canvas&&(canvas.linkMarkerShape=linkMarkerShape,canvas.setDirty(!1,!0))}),watchEffect(()=>{const reroutesEnabled=settingStore.get("Comfy.RerouteBeta"),{canvas}=canvasStore;canvas&&(canvas.reroutesEnabled=reroutesEnabled,canvas.setDirty(!1,!0))}),watchEffect(()=>{const maximumFps=settingStore.get("LiteGraph.Canvas.MaximumFps"),{canvas}=canvasStore;canvas&&(canvas.maximumFps=maximumFps)}),watchEffect(()=>{CanvasPointer.doubleClickTime=settingStore.get("Comfy.Pointer.DoubleClickTime")}),watchEffect(()=>{CanvasPointer.bufferTime=settingStore.get("Comfy.Pointer.ClickBufferTime")}),watchEffect(()=>{CanvasPointer.maxClickDrift=settingStore.get("Comfy.Pointer.ClickDrift")}),watchEffect(()=>{LiteGraph.CANVAS_GRID_SIZE=settingStore.get("Comfy.SnapToGrid.GridSize")}),watchEffect(()=>{LiteGraph.alwaysSnapToGrid=settingStore.get("pysssss.SnapToGrid")}),watch(()=>settingStore.get("Comfy.WidgetControlMode"),()=>{if(canvasStore.canvas){for(const n of app.graph.nodes)if(n.widgets){for(const w of n.widgets)if(w[IS_CONTROL_WIDGET]&&(updateControlWidgetLabel(w),w.linkedWidgets))for(const l of w.linkedWidgets)updateControlWidgetLabel(l)}app.graph.setDirtyCanvas(!0)}});const colorPaletteService=useColorPaletteService(),colorPaletteStore=useColorPaletteStore();watch([()=>canvasStore.canvas,()=>settingStore.get("Comfy.ColorPalette")],([canvas,currentPaletteId])=>{canvas&&colorPaletteService.loadColorPalette(currentPaletteId)}),watch(()=>colorPaletteStore.activePaletteId,newValue=>{settingStore.set("Comfy.ColorPalette",newValue)});const workflowStore=useWorkflowStore(),persistCurrentWorkflow=__name(()=>{const workflow=JSON.stringify(app.serializeGraph());return localStorage.setItem("workflow",workflow),api.clientId&&sessionStorage.setItem(`workflow:${api.clientId}`,workflow),workflow},"persistCurrentWorkflow"),onChangeWorkflow=__name(async()=>{const workflow=persistCurrentWorkflow();if(isEmbedded()){const p=await app.graphToPrompt(),json=JSON.stringify(p.output,null,2);window.parent.postMessage({flowId:FlowConfig.flowId,type:"change",workflow,workflowApi:json},"*")}},"onChangeWorkflow");watchEffect(()=>{if(workflowStore.activeWorkflow){const workflow=workflowStore.activeWorkflow;setStorageValue("Comfy.PreviousWorkflow",workflow.key),persistCurrentWorkflow()}}),api.addEventListener("graphChanged",onChangeWorkflow),usePragmaticDroppable(()=>canvasRef.value,{onDrop:__name(event=>{const loc=event.location.current.input,dndData=event.source.data;if(dndData.type==="tree-explorer-node"){const node=dndData.data;if(node.data instanceof ComfyNodeDefImpl){const nodeDef=node.data,pos=app.clientPosToCanvasPos([loc.clientX-20,loc.clientY]);litegraphService.addNodeOnGraph(nodeDef,{pos})}else if(node.data instanceof ComfyModelDef){const model=node.data,pos=app.clientPosToCanvasPos([loc.clientX,loc.clientY]),nodeAtPos=app.graph.getNodeOnPos(pos[0],pos[1]);let targetProvider=null,targetGraphNode=null;if(nodeAtPos){const providers=modelToNodeStore.getAllNodeProviders(model.directory);for(const provider of providers)provider.nodeDef.name===nodeAtPos.comfyClass&&(targetGraphNode=nodeAtPos,targetProvider=provider)}if(!targetGraphNode){const provider=modelToNodeStore.getNodeProvider(model.directory);provider&&(targetGraphNode=litegraphService.addNodeOnGraph(provider.nodeDef,{pos}),targetProvider=provider)}if(targetGraphNode){const widget=targetGraphNode.widgets.find(widget2=>widget2.name===targetProvider.key);widget&&(widget.value=model.file_name)}}}},"onDrop")});const comfyAppReady=ref(!1);return onMounted(async()=>{window.LiteGraph=LiteGraph,window.LGraph=LGraph,window.LLink=LLink,window.LGraphNode=LGraphNode,window.LGraphGroup=LGraphGroup,window.DragAndScale=DragAndScale,window.LGraphCanvas=LGraphCanvas,window.ContextMenu=ContextMenu,window.LGraphBadge=LGraphBadge,app.vueAppReady=!0,workspaceStore.spinner=!0,ChangeTracker.init(app),await settingStore.loadSettingValues(),CORE_SETTINGS.forEach(setting=>{settingStore.addSetting(setting)}),await app.setup(canvasRef.value),canvasStore.canvas=app.canvas,canvasStore.canvas.render_canvas_border=!1,workspaceStore.spinner=!1,window.app=app,window.graph=app.graph,comfyAppReady.value=!0,colorPaletteStore.customPalettes=settingStore.get("Comfy.CustomColorPalettes"),watch(()=>settingStore.get("Comfy.Locale"),async()=>{await useCommandStore().execute("Comfy.RefreshNodeDefinitions"),useWorkflowService().reloadCurrentWorkflow()}),emit("ready")}),(_ctx,_cache)=>(openBlock(),createElementBlock(Fragment,null,[(openBlock(),createBlock(Teleport,{to:".graph-canvas-container"},[comfyAppReady.value&&betaMenuEnabled.value&&!unref(workspaceStore).focusMode?(openBlock(),createBlock(LiteGraphCanvasSplitterOverlay,{key:0},createSlots({"bottom-panel":withCtx(()=>[createVNode(_sfc_main$p)]),"graph-canvas-panel":withCtx(()=>[workflowTabsPosition.value==="Topbar (2nd-row)"&&!unref(isEmbedded)()?(openBlock(),createBlock(SecondRowWorkflowTabs,{key:0})):createCommentVNode("",!0),canvasMenuEnabled.value?(openBlock(),createBlock(GraphCanvasMenu,{key:1})):createCommentVNode("",!0)]),_:2},[unref(isEmbedded)()?void 0:{name:"side-bar-panel",fn:withCtx(()=>[createVNode(SideToolbar)]),key:"0"}]),1024)):createCommentVNode("",!0),createVNode(TitleEditor),!betaMenuEnabled.value&&canvasMenuEnabled.value?(openBlock(),createBlock(GraphCanvasMenu,{key:1})):createCommentVNode("",!0),createBaseVNode("canvas",{ref_key:"canvasRef",ref:canvasRef,id:"graph-canvas",tabindex:"1"},null,512)])),createVNode(_sfc_main$h),tooltipEnabled.value?(openBlock(),createBlock(NodeTooltip,{key:0})):createCommentVNode("",!0),createVNode(_sfc_main$n)],64))}});function _typeof$3(o){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o2){return typeof o2}:function(o2){return o2&&typeof Symbol=="function"&&o2.constructor===Symbol&&o2!==Symbol.prototype?"symbol":typeof o2},_typeof$3(o)}__name(_typeof$3,"_typeof$3");function _defineProperty$3(e,r,t){return(r=_toPropertyKey$3(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}__name(_defineProperty$3,"_defineProperty$3");function _toPropertyKey$3(t){var i=_toPrimitive$3(t,"string");return _typeof$3(i)=="symbol"?i:i+""}__name(_toPropertyKey$3,"_toPropertyKey$3");function _toPrimitive$3(t,r){if(_typeof$3(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,r||"default");if(_typeof$3(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}__name(_toPrimitive$3,"_toPrimitive$3");var theme$3=__name(function(_ref){var dt=_ref.dt;return`
.p-toast {
    width: `.concat(dt("toast.width"),`;
    white-space: pre-line;
    word-break: break-word;
}

.p-toast-message {
    margin: 0 0 1rem 0;
}

.p-toast-message-icon {
    flex-shrink: 0;
    font-size: `).concat(dt("toast.icon.size"),`;
    width: `).concat(dt("toast.icon.size"),`;
    height: `).concat(dt("toast.icon.size"),`;
}

.p-toast-message-content {
    display: flex;
    align-items: flex-start;
    padding: `).concat(dt("toast.content.padding"),`;
    gap: `).concat(dt("toast.content.gap"),`;
}

.p-toast-message-text {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    gap: `).concat(dt("toast.text.gap"),`;
}

.p-toast-summary {
    font-weight: `).concat(dt("toast.summary.font.weight"),`;
    font-size: `).concat(dt("toast.summary.font.size"),`;
}

.p-toast-detail {
    font-weight: `).concat(dt("toast.detail.font.weight"),`;
    font-size: `).concat(dt("toast.detail.font.size"),`;
}

.p-toast-close-button {
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    background: transparent;
    transition: background `).concat(dt("toast.transition.duration"),", color ").concat(dt("toast.transition.duration"),", outline-color ").concat(dt("toast.transition.duration"),", box-shadow ").concat(dt("toast.transition.duration"),`;
    outline-color: transparent;
    color: inherit;
    width: `).concat(dt("toast.close.button.width"),`;
    height: `).concat(dt("toast.close.button.height"),`;
    border-radius: `).concat(dt("toast.close.button.border.radius"),`;
    margin: -25% 0 0 0;
    right: -25%;
    padding: 0;
    border: none;
    user-select: none;
}

.p-toast-message-info,
.p-toast-message-success,
.p-toast-message-warn,
.p-toast-message-error,
.p-toast-message-secondary,
.p-toast-message-contrast {
    border-width: `).concat(dt("toast.border.width"),`;
    border-style: solid;
    backdrop-filter: blur(`).concat(dt("toast.blur"),`);
    border-radius: `).concat(dt("toast.border.radius"),`;
}

.p-toast-close-icon {
    font-size: `).concat(dt("toast.close.icon.size"),`;
    width: `).concat(dt("toast.close.icon.size"),`;
    height: `).concat(dt("toast.close.icon.size"),`;
}

.p-toast-close-button:focus-visible {
    outline-width: `).concat(dt("focus.ring.width"),`;
    outline-style: `).concat(dt("focus.ring.style"),`;
    outline-offset: `).concat(dt("focus.ring.offset"),`;
}

.p-toast-message-info {
    background: `).concat(dt("toast.info.background"),`;
    border-color: `).concat(dt("toast.info.border.color"),`;
    color: `).concat(dt("toast.info.color"),`;
    box-shadow: `).concat(dt("toast.info.shadow"),`;
}

.p-toast-message-info .p-toast-detail {
    color: `).concat(dt("toast.info.detail.color"),`;
}

.p-toast-message-info .p-toast-close-button:focus-visible {
    outline-color: `).concat(dt("toast.info.close.button.focus.ring.color"),`;
    box-shadow: `).concat(dt("toast.info.close.button.focus.ring.shadow"),`;
}

.p-toast-message-info .p-toast-close-button:hover {
    background: `).concat(dt("toast.info.close.button.hover.background"),`;
}

.p-toast-message-success {
    background: `).concat(dt("toast.success.background"),`;
    border-color: `).concat(dt("toast.success.border.color"),`;
    color: `).concat(dt("toast.success.color"),`;
    box-shadow: `).concat(dt("toast.success.shadow"),`;
}

.p-toast-message-success .p-toast-detail {
    color: `).concat(dt("toast.success.detail.color"),`;
}

.p-toast-message-success .p-toast-close-button:focus-visible {
    outline-color: `).concat(dt("toast.success.close.button.focus.ring.color"),`;
    box-shadow: `).concat(dt("toast.success.close.button.focus.ring.shadow"),`;
}

.p-toast-message-success .p-toast-close-button:hover {
    background: `).concat(dt("toast.success.close.button.hover.background"),`;
}

.p-toast-message-warn {
    background: `).concat(dt("toast.warn.background"),`;
    border-color: `).concat(dt("toast.warn.border.color"),`;
    color: `).concat(dt("toast.warn.color"),`;
    box-shadow: `).concat(dt("toast.warn.shadow"),`;
}

.p-toast-message-warn .p-toast-detail {
    color: `).concat(dt("toast.warn.detail.color"),`;
}

.p-toast-message-warn .p-toast-close-button:focus-visible {
    outline-color: `).concat(dt("toast.warn.close.button.focus.ring.color"),`;
    box-shadow: `).concat(dt("toast.warn.close.button.focus.ring.shadow"),`;
}

.p-toast-message-warn .p-toast-close-button:hover {
    background: `).concat(dt("toast.warn.close.button.hover.background"),`;
}

.p-toast-message-error {
    background: `).concat(dt("toast.error.background"),`;
    border-color: `).concat(dt("toast.error.border.color"),`;
    color: `).concat(dt("toast.error.color"),`;
    box-shadow: `).concat(dt("toast.error.shadow"),`;
}

.p-toast-message-error .p-toast-detail {
    color: `).concat(dt("toast.error.detail.color"),`;
}

.p-toast-message-error .p-toast-close-button:focus-visible {
    outline-color: `).concat(dt("toast.error.close.button.focus.ring.color"),`;
    box-shadow: `).concat(dt("toast.error.close.button.focus.ring.shadow"),`;
}

.p-toast-message-error .p-toast-close-button:hover {
    background: `).concat(dt("toast.error.close.button.hover.background"),`;
}

.p-toast-message-secondary {
    background: `).concat(dt("toast.secondary.background"),`;
    border-color: `).concat(dt("toast.secondary.border.color"),`;
    color: `).concat(dt("toast.secondary.color"),`;
    box-shadow: `).concat(dt("toast.secondary.shadow"),`;
}

.p-toast-message-secondary .p-toast-detail {
    color: `).concat(dt("toast.secondary.detail.color"),`;
}

.p-toast-message-secondary .p-toast-close-button:focus-visible {
    outline-color: `).concat(dt("toast.secondary.close.button.focus.ring.color"),`;
    box-shadow: `).concat(dt("toast.secondary.close.button.focus.ring.shadow"),`;
}

.p-toast-message-secondary .p-toast-close-button:hover {
    background: `).concat(dt("toast.secondary.close.button.hover.background"),`;
}

.p-toast-message-contrast {
    background: `).concat(dt("toast.contrast.background"),`;
    border-color: `).concat(dt("toast.contrast.border.color"),`;
    color: `).concat(dt("toast.contrast.color"),`;
    box-shadow: `).concat(dt("toast.contrast.shadow"),`;
}

.p-toast-message-contrast .p-toast-detail {
    color: `).concat(dt("toast.contrast.detail.color"),`;
}

.p-toast-message-contrast .p-toast-close-button:focus-visible {
    outline-color: `).concat(dt("toast.contrast.close.button.focus.ring.color"),`;
    box-shadow: `).concat(dt("toast.contrast.close.button.focus.ring.shadow"),`;
}

.p-toast-message-contrast .p-toast-close-button:hover {
    background: `).concat(dt("toast.contrast.close.button.hover.background"),`;
}

.p-toast-top-center {
    transform: translateX(-50%);
}

.p-toast-bottom-center {
    transform: translateX(-50%);
}

.p-toast-center {
    min-width: 20vw;
    transform: translate(-50%, -50%);
}

.p-toast-message-enter-from {
    opacity: 0;
    transform: translateY(50%);
}

.p-toast-message-leave-from {
    max-height: 1000px;
}

.p-toast .p-toast-message.p-toast-message-leave-to {
    max-height: 0;
    opacity: 0;
    margin-bottom: 0;
    overflow: hidden;
}

.p-toast-message-enter-active {
    transition: transform 0.3s, opacity 0.3s;
}

.p-toast-message-leave-active {
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s;
}
`)},"theme"),inlineStyles$2={root:__name(function(_ref2){var position=_ref2.position;return{position:"fixed",top:position==="top-right"||position==="top-left"||position==="top-center"?"20px":position==="center"?"50%":null,right:(position==="top-right"||position==="bottom-right")&&"20px",bottom:(position==="bottom-left"||position==="bottom-right"||position==="bottom-center")&&"20px",left:position==="top-left"||position==="bottom-left"?"20px":position==="center"||position==="top-center"||position==="bottom-center"?"50%":null}},"root")},classes$3={root:__name(function(_ref3){var props=_ref3.props;return["p-toast p-component p-toast-"+props.position]},"root"),message:__name(function(_ref4){var props=_ref4.props;return["p-toast-message",{"p-toast-message-info":props.message.severity==="info"||props.message.severity===void 0,"p-toast-message-warn":props.message.severity==="warn","p-toast-message-error":props.message.severity==="error","p-toast-message-success":props.message.severity==="success","p-toast-message-secondary":props.message.severity==="secondary","p-toast-message-contrast":props.message.severity==="contrast"}]},"message"),messageContent:"p-toast-message-content",messageIcon:__name(function(_ref5){var props=_ref5.props;return["p-toast-message-icon",_defineProperty$3(_defineProperty$3(_defineProperty$3(_defineProperty$3({},props.infoIcon,props.message.severity==="info"),props.warnIcon,props.message.severity==="warn"),props.errorIcon,props.message.severity==="error"),props.successIcon,props.message.severity==="success")]},"messageIcon"),messageText:"p-toast-message-text",summary:"p-toast-summary",detail:"p-toast-detail",closeButton:"p-toast-close-button",closeIcon:"p-toast-close-icon"},ToastStyle=BaseStyle.extend({name:"toast",theme:theme$3,classes:classes$3,inlineStyles:inlineStyles$2}),script$2$2={name:"BaseToast",extends:script$e,props:{group:{type:String,default:null},position:{type:String,default:"top-right"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},breakpoints:{type:Object,default:null},closeIcon:{type:String,default:void 0},infoIcon:{type:String,default:void 0},warnIcon:{type:String,default:void 0},errorIcon:{type:String,default:void 0},successIcon:{type:String,default:void 0},closeButtonProps:{type:null,default:null}},style:ToastStyle,provide:__name(function(){return{$pcToast:this,$parentInstance:this}},"provide")},script$1$3={name:"ToastMessage",hostName:"Toast",extends:script$e,emits:["close"],closeTimeout:null,props:{message:{type:null,default:null},templates:{type:Object,default:null},closeIcon:{type:String,default:null},infoIcon:{type:String,default:null},warnIcon:{type:String,default:null},errorIcon:{type:String,default:null},successIcon:{type:String,default:null},closeButtonProps:{type:null,default:null}},mounted:__name(function(){var _this=this;this.message.life&&(this.closeTimeout=setTimeout(function(){_this.close({message:_this.message,type:"life-end"})},this.message.life))},"mounted"),beforeUnmount:__name(function(){this.clearCloseTimeout()},"beforeUnmount"),methods:{close:__name(function(params){this.$emit("close",params)},"close"),onCloseClick:__name(function(){this.clearCloseTimeout(),this.close({message:this.message,type:"close"})},"onCloseClick"),clearCloseTimeout:__name(function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},"clearCloseTimeout")},computed:{iconComponent:__name(function(){return{info:!this.infoIcon&&script$u,success:!this.successIcon&&script$v,warn:!this.warnIcon&&script$w,error:!this.errorIcon&&script$x}[this.message.severity]},"iconComponent"),closeAriaLabel:__name(function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0},"closeAriaLabel")},components:{TimesIcon:script$y,InfoCircleIcon:script$u,CheckIcon:script$v,ExclamationTriangleIcon:script$w,TimesCircleIcon:script$x},directives:{ripple:Ripple}};function _typeof$1(o){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o2){return typeof o2}:function(o2){return o2&&typeof Symbol=="function"&&o2.constructor===Symbol&&o2!==Symbol.prototype?"symbol":typeof o2},_typeof$1(o)}__name(_typeof$1,"_typeof$1");function ownKeys$1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r2){return Object.getOwnPropertyDescriptor(e,r2).enumerable})),t.push.apply(t,o)}return t}__name(ownKeys$1,"ownKeys$1");function _objectSpread$1(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ownKeys$1(Object(t),!0).forEach(function(r2){_defineProperty$1(e,r2,t[r2])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach(function(r2){Object.defineProperty(e,r2,Object.getOwnPropertyDescriptor(t,r2))})}return e}__name(_objectSpread$1,"_objectSpread$1");function _defineProperty$1(e,r,t){return(r=_toPropertyKey$1(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}__name(_defineProperty$1,"_defineProperty$1");function _toPropertyKey$1(t){var i=_toPrimitive$1(t,"string");return _typeof$1(i)=="symbol"?i:i+""}__name(_toPropertyKey$1,"_toPropertyKey$1");function _toPrimitive$1(t,r){if(_typeof$1(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,r||"default");if(_typeof$1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}__name(_toPrimitive$1,"_toPrimitive$1");var _hoisted_1$d=["aria-label"];function render$1$2(_ctx,_cache,$props,$setup,$data,$options){var _directive_ripple=resolveDirective("ripple");return openBlock(),createElementBlock("div",mergeProps({class:[_ctx.cx("message"),$props.message.styleClass],role:"alert","aria-live":"assertive","aria-atomic":"true"},_ctx.ptm("message")),[$props.templates.container?(openBlock(),createBlock(resolveDynamicComponent($props.templates.container),{key:0,message:$props.message,closeCallback:$options.onCloseClick},null,8,["message","closeCallback"])):(openBlock(),createElementBlock("div",mergeProps({key:1,class:[_ctx.cx("messageContent"),$props.message.contentStyleClass]},_ctx.ptm("messageContent")),[$props.templates.message?(openBlock(),createBlock(resolveDynamicComponent($props.templates.message),{key:1,message:$props.message},null,8,["message"])):(openBlock(),createElementBlock(Fragment,{key:0},[(openBlock(),createBlock(resolveDynamicComponent($props.templates.messageicon?$props.templates.messageicon:$props.templates.icon?$props.templates.icon:$options.iconComponent&&$options.iconComponent.name?$options.iconComponent:"span"),mergeProps({class:_ctx.cx("messageIcon")},_ctx.ptm("messageIcon")),null,16,["class"])),createBaseVNode("div",mergeProps({class:_ctx.cx("messageText")},_ctx.ptm("messageText")),[createBaseVNode("span",mergeProps({class:_ctx.cx("summary")},_ctx.ptm("summary")),toDisplayString($props.message.summary),17),createBaseVNode("div",mergeProps({class:_ctx.cx("detail")},_ctx.ptm("detail")),toDisplayString($props.message.detail),17)],16)],64)),$props.message.closable!==!1?(openBlock(),createElementBlock("div",normalizeProps(mergeProps({key:2},_ctx.ptm("buttonContainer"))),[withDirectives((openBlock(),createElementBlock("button",mergeProps({class:_ctx.cx("closeButton"),type:"button","aria-label":$options.closeAriaLabel,onClick:_cache[0]||(_cache[0]=function(){return $options.onCloseClick&&$options.onCloseClick.apply($options,arguments)}),autofocus:""},_objectSpread$1(_objectSpread$1({},$props.closeButtonProps),_ctx.ptm("closeButton"))),[(openBlock(),createBlock(resolveDynamicComponent($props.templates.closeicon||"TimesIcon"),mergeProps({class:[_ctx.cx("closeIcon"),$props.closeIcon]},_ctx.ptm("closeIcon")),null,16,["class"]))],16,_hoisted_1$d)),[[_directive_ripple]])],16)):createCommentVNode("",!0)],16))],16)}__name(render$1$2,"render$1$2");script$1$3.render=render$1$2;function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}__name(_toConsumableArray,"_toConsumableArray");function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}__name(_nonIterableSpread,"_nonIterableSpread");function _unsupportedIterableToArray(r,a){if(r){if(typeof r=="string")return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}__name(_unsupportedIterableToArray,"_unsupportedIterableToArray");function _iterableToArray(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}__name(_iterableToArray,"_iterableToArray");function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}__name(_arrayWithoutHoles,"_arrayWithoutHoles");function _arrayLikeToArray(r,a){(a==null||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}__name(_arrayLikeToArray,"_arrayLikeToArray");var messageIdx=0,script$5={name:"Toast",extends:script$2$2,inheritAttrs:!1,emits:["close","life-end"],data:__name(function(){return{messages:[]}},"data"),styleElement:null,mounted:__name(function(){ToastEventBus.on("add",this.onAdd),ToastEventBus.on("remove",this.onRemove),ToastEventBus.on("remove-group",this.onRemoveGroup),ToastEventBus.on("remove-all-groups",this.onRemoveAllGroups),this.breakpoints&&this.createStyle()},"mounted"),beforeUnmount:__name(function(){this.destroyStyle(),this.$refs.container&&this.autoZIndex&&ZIndex.clear(this.$refs.container),ToastEventBus.off("add",this.onAdd),ToastEventBus.off("remove",this.onRemove),ToastEventBus.off("remove-group",this.onRemoveGroup),ToastEventBus.off("remove-all-groups",this.onRemoveAllGroups)},"beforeUnmount"),methods:{add:__name(function(message2){message2.id==null&&(message2.id=messageIdx++),this.messages=[].concat(_toConsumableArray(this.messages),[message2])},"add"),remove:__name(function(params){var index=this.messages.findIndex(function(m){return m.id===params.message.id});index!==-1&&(this.messages.splice(index,1),this.$emit(params.type,{message:params.message}))},"remove"),onAdd:__name(function(message2){this.group==message2.group&&this.add(message2)},"onAdd"),onRemove:__name(function(message2){this.remove({message:message2,type:"close"})},"onRemove"),onRemoveGroup:__name(function(group){this.group===group&&(this.messages=[])},"onRemoveGroup"),onRemoveAllGroups:__name(function(){this.messages=[]},"onRemoveAllGroups"),onEnter:__name(function(){this.$refs.container.setAttribute(this.attributeSelector,""),this.autoZIndex&&ZIndex.set("modal",this.$refs.container,this.baseZIndex||this.$primevue.config.zIndex.modal)},"onEnter"),onLeave:__name(function(){var _this=this;this.$refs.container&&this.autoZIndex&&isEmpty(this.messages)&&setTimeout(function(){ZIndex.clear(_this.$refs.container)},200)},"onLeave"),createStyle:__name(function(){if(!this.styleElement&&!this.isUnstyled){var _this$$primevue;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",setAttribute(this.styleElement,"nonce",(_this$$primevue=this.$primevue)===null||_this$$primevue===void 0||(_this$$primevue=_this$$primevue.config)===null||_this$$primevue===void 0||(_this$$primevue=_this$$primevue.csp)===null||_this$$primevue===void 0?void 0:_this$$primevue.nonce),document.head.appendChild(this.styleElement);var innerHTML="";for(var breakpoint in this.breakpoints){var breakpointStyle="";for(var styleProp in this.breakpoints[breakpoint])breakpointStyle+=styleProp+":"+this.breakpoints[breakpoint][styleProp]+"!important;";innerHTML+=`
                        @media screen and (max-width: `.concat(breakpoint,`) {
                            .p-toast[`).concat(this.attributeSelector,`] {
                                `).concat(breakpointStyle,`
                            }
                        }
                    `)}this.styleElement.innerHTML=innerHTML}},"createStyle"),destroyStyle:__name(function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},"destroyStyle")},computed:{attributeSelector:__name(function(){return UniqueComponentId()},"attributeSelector")},components:{ToastMessage:script$1$3,Portal:script$k}};function _typeof$2(o){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o2){return typeof o2}:function(o2){return o2&&typeof Symbol=="function"&&o2.constructor===Symbol&&o2!==Symbol.prototype?"symbol":typeof o2},_typeof$2(o)}__name(_typeof$2,"_typeof$2");function ownKeys$2(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r2){return Object.getOwnPropertyDescriptor(e,r2).enumerable})),t.push.apply(t,o)}return t}__name(ownKeys$2,"ownKeys$2");function _objectSpread$2(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ownKeys$2(Object(t),!0).forEach(function(r2){_defineProperty$2(e,r2,t[r2])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$2(Object(t)).forEach(function(r2){Object.defineProperty(e,r2,Object.getOwnPropertyDescriptor(t,r2))})}return e}__name(_objectSpread$2,"_objectSpread$2");function _defineProperty$2(e,r,t){return(r=_toPropertyKey$2(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}__name(_defineProperty$2,"_defineProperty$2");function _toPropertyKey$2(t){var i=_toPrimitive$2(t,"string");return _typeof$2(i)=="symbol"?i:i+""}__name(_toPropertyKey$2,"_toPropertyKey$2");function _toPrimitive$2(t,r){if(_typeof$2(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,r||"default");if(_typeof$2(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}__name(_toPrimitive$2,"_toPrimitive$2");function render$a(_ctx,_cache,$props,$setup,$data,$options){var _component_ToastMessage=resolveComponent("ToastMessage"),_component_Portal=resolveComponent("Portal");return openBlock(),createBlock(_component_Portal,null,{default:withCtx(function(){return[createBaseVNode("div",mergeProps({ref:"container",class:_ctx.cx("root"),style:_ctx.sx("root",!0,{position:_ctx.position})},_ctx.ptmi("root")),[createVNode(TransitionGroup,mergeProps({name:"p-toast-message",tag:"div",onEnter:$options.onEnter,onLeave:$options.onLeave},_objectSpread$2({},_ctx.ptm("transition"))),{default:withCtx(function(){return[(openBlock(!0),createElementBlock(Fragment,null,renderList($data.messages,function(msg){return openBlock(),createBlock(_component_ToastMessage,{key:msg.id,message:msg,templates:_ctx.$slots,closeIcon:_ctx.closeIcon,infoIcon:_ctx.infoIcon,warnIcon:_ctx.warnIcon,errorIcon:_ctx.errorIcon,successIcon:_ctx.successIcon,closeButtonProps:_ctx.closeButtonProps,unstyled:_ctx.unstyled,onClose:_cache[0]||(_cache[0]=function($event){return $options.remove($event)}),pt:_ctx.pt},null,8,["message","templates","closeIcon","infoIcon","warnIcon","errorIcon","successIcon","closeButtonProps","unstyled","pt"])}),128))]}),_:1},16,["onEnter","onLeave"])],16)]}),_:1})}__name(render$a,"render$a");script$5.render=render$a;const _sfc_main$7=defineComponent({__name:"GlobalToast",setup(__props){const toast=useToast(),toastStore=useToastStore(),settingStore=useSettingStore();watch(()=>toastStore.messagesToAdd,newMessages=>{newMessages.length!==0&&(newMessages.forEach(message2=>{toast.add(message2)}),toastStore.messagesToAdd=[])},{deep:!0}),watch(()=>toastStore.messagesToRemove,messagesToRemove=>{messagesToRemove.length!==0&&(messagesToRemove.forEach(message2=>{toast.remove(message2)}),toastStore.messagesToRemove=[])},{deep:!0}),watch(()=>toastStore.removeAllRequested,requested=>{requested&&(toast.removeAllGroups(),toastStore.removeAllRequested=!1)});function updateToastPosition(){const styleElement=document.getElementById("dynamic-toast-style")||createStyleElement(),rect=document.querySelector(".graph-canvas-container").getBoundingClientRect();styleElement.textContent=`
    .p-toast.p-component.p-toast-top-right {
      top: ${rect.top+20}px !important;
      right: ${window.innerWidth-(rect.left+rect.width)+20}px !important;
    }
  `}__name(updateToastPosition,"updateToastPosition");function createStyleElement(){const style=document.createElement("style");return style.id="dynamic-toast-style",document.head.appendChild(style),style}return __name(createStyleElement,"createStyleElement"),watch(()=>settingStore.get("Comfy.UseNewMenu"),()=>nextTick(updateToastPosition),{immediate:!0}),watch(()=>settingStore.get("Comfy.Sidebar.Location"),()=>nextTick(updateToastPosition),{immediate:!0}),(_ctx,_cache)=>(openBlock(),createBlock(unref(script$5)))}}),_hoisted_1$c={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_hoisted_2$9=createBaseVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 4v16m4-16l10 8l-10 8z"},null,-1),_hoisted_3$8=[_hoisted_2$9];function render$9(_ctx,_cache){return openBlock(),createElementBlock("svg",_hoisted_1$c,[..._hoisted_3$8])}__name(render$9,"render$9");const __unplugin_components_3=markRaw({name:"lucide-step-forward",render:render$9}),_hoisted_1$b={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_hoisted_2$8=createBaseVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m13 19l9-7l-9-7zM2 19l9-7l-9-7z"},null,-1),_hoisted_3$7=[_hoisted_2$8];function render$8(_ctx,_cache){return openBlock(),createElementBlock("svg",_hoisted_1$b,[..._hoisted_3$7])}__name(render$8,"render$8");const __unplugin_components_2=markRaw({name:"lucide-fast-forward",render:render$8}),_hoisted_1$a={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_hoisted_2$7=createBaseVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 3l14 9l-14 9z"},null,-1),_hoisted_3$6=[_hoisted_2$7];function render$7(_ctx,_cache){return openBlock(),createElementBlock("svg",_hoisted_1$a,[..._hoisted_3$6])}__name(render$7,"render$7");const __unplugin_components_1$1=markRaw({name:"lucide-play",render:render$7}),_hoisted_1$9={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_hoisted_2$6=createBaseVNode("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[createBaseVNode("path",{d:"M16 12H3m13 6H3m7-12H3m18 12V8a2 2 0 0 0-2-2h-5"}),createBaseVNode("path",{d:"m16 8l-2-2l2-2"})],-1),_hoisted_3$5=[_hoisted_2$6];function render$6(_ctx,_cache){return openBlock(),createElementBlock("svg",_hoisted_1$9,[..._hoisted_3$5])}__name(render$6,"render$6");const __unplugin_components_0$1=markRaw({name:"lucide-list-start",render:render$6});var theme$2=__name(function(_ref){var dt=_ref.dt;return`
.p-tieredmenu {
    background: `.concat(dt("tieredmenu.background"),`;
    color: `).concat(dt("tieredmenu.color"),`;
    border: 1px solid `).concat(dt("tieredmenu.border.color"),`;
    border-radius: `).concat(dt("tieredmenu.border.radius"),`;
    min-width: 12.5rem;
}

.p-tieredmenu-root-list,
.p-tieredmenu-submenu {
    margin: 0;
    padding: `).concat(dt("tieredmenu.list.padding"),`;
    list-style: none;
    outline: 0 none;
    display: flex;
    flex-direction: column;
    gap: `).concat(dt("tieredmenu.list.gap"),`;
}

.p-tieredmenu-submenu {
    position: absolute;
    min-width: 100%;
    z-index: 1;
    background: `).concat(dt("tieredmenu.background"),`;
    color: `).concat(dt("tieredmenu.color"),`;
    border: 1px solid `).concat(dt("tieredmenu.border.color"),`;
    border-radius: `).concat(dt("tieredmenu.border.radius"),`;
    box-shadow: `).concat(dt("tieredmenu.shadow"),`;
}

.p-tieredmenu-item {
    position: relative;
}

.p-tieredmenu-item-content {
    transition: background `).concat(dt("tieredmenu.transition.duration"),", color ").concat(dt("tieredmenu.transition.duration"),`;
    border-radius: `).concat(dt("tieredmenu.item.border.radius"),`;
    color: `).concat(dt("tieredmenu.item.color"),`;
}

.p-tieredmenu-item-link {
    cursor: pointer;
    display: flex;
    align-items: center;
    text-decoration: none;
    overflow: hidden;
    position: relative;
    color: inherit;
    padding: `).concat(dt("tieredmenu.item.padding"),`;
    gap: `).concat(dt("tieredmenu.item.gap"),`;
    user-select: none;
    outline: 0 none;
}

.p-tieredmenu-item-label {
    line-height: 1;
}

.p-tieredmenu-item-icon {
    color: `).concat(dt("tieredmenu.item.icon.color"),`;
}

.p-tieredmenu-submenu-icon {
    color: `).concat(dt("tieredmenu.submenu.icon.color"),`;
    margin-left: auto;
    font-size: `).concat(dt("tieredmenu.submenu.icon.size"),`;
    width: `).concat(dt("tieredmenu.submenu.icon.size"),`;
    height: `).concat(dt("tieredmenu.submenu.icon.size"),`;
}

.p-tieredmenu-item.p-focus > .p-tieredmenu-item-content {
    color: `).concat(dt("tieredmenu.item.focus.color"),`;
    background: `).concat(dt("tieredmenu.item.focus.background"),`;
}

.p-tieredmenu-item.p-focus > .p-tieredmenu-item-content .p-tieredmenu-item-icon {
    color: `).concat(dt("tieredmenu.item.icon.focus.color"),`;
}

.p-tieredmenu-item.p-focus > .p-tieredmenu-item-content .p-tieredmenu-submenu-icon {
    color: `).concat(dt("tieredmenu.submenu.icon.focus.color"),`;
}

.p-tieredmenu-item:not(.p-disabled) > .p-tieredmenu-item-content:hover {
    color: `).concat(dt("tieredmenu.item.focus.color"),`;
    background: `).concat(dt("tieredmenu.item.focus.background"),`;
}

.p-tieredmenu-item:not(.p-disabled) > .p-tieredmenu-item-content:hover .p-tieredmenu-item-icon {
    color: `).concat(dt("tieredmenu.item.icon.focus.color"),`;
}

.p-tieredmenu-item:not(.p-disabled) > .p-tieredmenu-item-content:hover .p-tieredmenu-submenu-icon {
    color: `).concat(dt("tieredmenu.submenu.icon.focus.color"),`;
}

.p-tieredmenu-item-active > .p-tieredmenu-item-content {
    color: `).concat(dt("tieredmenu.item.active.color"),`;
    background: `).concat(dt("tieredmenu.item.active.background"),`;
}

.p-tieredmenu-item-active > .p-tieredmenu-item-content .p-tieredmenu-item-icon {
    color: `).concat(dt("tieredmenu.item.icon.active.color"),`;
}

.p-tieredmenu-item-active > .p-tieredmenu-item-content .p-tieredmenu-submenu-icon {
    color: `).concat(dt("tieredmenu.submenu.icon.active.color"),`;
}

.p-tieredmenu-separator {
    border-top: 1px solid `).concat(dt("tieredmenu.separator.border.color"),`;
}

.p-tieredmenu-overlay {
    box-shadow: `).concat(dt("tieredmenu.shadow"),`;
}

.p-tieredmenu-enter-from,
.p-tieredmenu-leave-active {
    opacity: 0;
}

.p-tieredmenu-enter-active {
    transition: opacity 250ms;
}
`)},"theme"),inlineStyles$1={submenu:__name(function(_ref2){var instance=_ref2.instance,processedItem=_ref2.processedItem;return{display:instance.isItemActive(processedItem)?"flex":"none"}},"submenu")},classes$2={root:__name(function(_ref3){_ref3.instance;var props=_ref3.props;return["p-tieredmenu p-component",{"p-tieredmenu-overlay":props.popup}]},"root"),start:"p-tieredmenu-start",rootList:"p-tieredmenu-root-list",item:__name(function(_ref4){var instance=_ref4.instance,processedItem=_ref4.processedItem;return["p-tieredmenu-item",{"p-tieredmenu-item-active":instance.isItemActive(processedItem),"p-focus":instance.isItemFocused(processedItem),"p-disabled":instance.isItemDisabled(processedItem)}]},"item"),itemContent:"p-tieredmenu-item-content",itemLink:"p-tieredmenu-item-link",itemIcon:"p-tieredmenu-item-icon",itemLabel:"p-tieredmenu-item-label",submenuIcon:"p-tieredmenu-submenu-icon",submenu:"p-tieredmenu-submenu",separator:"p-tieredmenu-separator",end:"p-tieredmenu-end"},TieredMenuStyle=BaseStyle.extend({name:"tieredmenu",theme:theme$2,classes:classes$2,inlineStyles:inlineStyles$1}),script$2$1={name:"BaseTieredMenu",extends:script$e,props:{popup:{type:Boolean,default:!1},model:{type:Array,default:null},appendTo:{type:[String,Object],default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:TieredMenuStyle,provide:__name(function(){return{$pcTieredMenu:this,$parentInstance:this}},"provide")},script$1$2={name:"TieredMenuSub",hostName:"TieredMenu",extends:script$e,emits:["item-click","item-mouseenter","item-mousemove"],container:null,props:{menuId:{type:String,default:null},focusedItemId:{type:String,default:null},items:{type:Array,default:null},visible:{type:Boolean,default:!1},level:{type:Number,default:0},templates:{type:Object,default:null},activeItemPath:{type:Object,default:null},tabindex:{type:Number,default:0}},methods:{getItemId:__name(function(processedItem){return"".concat(this.menuId,"_").concat(processedItem.key)},"getItemId"),getItemKey:__name(function(processedItem){return this.getItemId(processedItem)},"getItemKey"),getItemProp:__name(function(processedItem,name,params){return processedItem&&processedItem.item?resolve(processedItem.item[name],params):void 0},"getItemProp"),getItemLabel:__name(function(processedItem){return this.getItemProp(processedItem,"label")},"getItemLabel"),getItemLabelId:__name(function(processedItem){return"".concat(this.menuId,"_").concat(processedItem.key,"_label")},"getItemLabelId"),getPTOptions:__name(function(processedItem,index,key){return this.ptm(key,{context:{item:processedItem.item,index,active:this.isItemActive(processedItem),focused:this.isItemFocused(processedItem),disabled:this.isItemDisabled(processedItem)}})},"getPTOptions"),isItemActive:__name(function(processedItem){return this.activeItemPath.some(function(path){return path.key===processedItem.key})},"isItemActive"),isItemVisible:__name(function(processedItem){return this.getItemProp(processedItem,"visible")!==!1},"isItemVisible"),isItemDisabled:__name(function(processedItem){return this.getItemProp(processedItem,"disabled")},"isItemDisabled"),isItemFocused:__name(function(processedItem){return this.focusedItemId===this.getItemId(processedItem)},"isItemFocused"),isItemGroup:__name(function(processedItem){return isNotEmpty(processedItem.items)},"isItemGroup"),onEnter:__name(function(){nestedPosition(this.container,this.level)},"onEnter"),onItemClick:__name(function(event,processedItem){this.getItemProp(processedItem,"command",{originalEvent:event,item:processedItem.item}),this.$emit("item-click",{originalEvent:event,processedItem,isFocus:!0})},"onItemClick"),onItemMouseEnter:__name(function(event,processedItem){this.$emit("item-mouseenter",{originalEvent:event,processedItem})},"onItemMouseEnter"),onItemMouseMove:__name(function(event,processedItem){this.$emit("item-mousemove",{originalEvent:event,processedItem})},"onItemMouseMove"),getAriaSetSize:__name(function(){var _this=this;return this.items.filter(function(processedItem){return _this.isItemVisible(processedItem)&&!_this.getItemProp(processedItem,"separator")}).length},"getAriaSetSize"),getAriaPosInset:__name(function(index){var _this2=this;return index-this.items.slice(0,index).filter(function(processedItem){return _this2.isItemVisible(processedItem)&&_this2.getItemProp(processedItem,"separator")}).length+1},"getAriaPosInset"),getMenuItemProps:__name(function(processedItem,index){return{action:mergeProps({class:this.cx("itemLink"),tabindex:-1,"aria-hidden":!0},this.getPTOptions(processedItem,index,"itemLink")),icon:mergeProps({class:[this.cx("itemIcon"),this.getItemProp(processedItem,"icon")]},this.getPTOptions(processedItem,index,"itemIcon")),label:mergeProps({class:this.cx("itemLabel")},this.getPTOptions(processedItem,index,"itemLabel")),submenuicon:mergeProps({class:this.cx("submenuIcon")},this.getPTOptions(processedItem,index,"submenuIcon"))}},"getMenuItemProps"),containerRef:__name(function(el){this.container=el},"containerRef")},components:{AngleRightIcon:script$z},directives:{ripple:Ripple}},_hoisted_1$1$2=["tabindex"],_hoisted_2$5=["id","aria-label","aria-disabled","aria-expanded","aria-haspopup","aria-level","aria-setsize","aria-posinset","data-p-active","data-p-focused","data-p-disabled"],_hoisted_3$4=["onClick","onMouseenter","onMousemove"],_hoisted_4$1=["href","target"],_hoisted_5$1=["id"],_hoisted_6=["id"];function render$1$1(_ctx,_cache,$props,$setup,$data,$options){var _component_AngleRightIcon=resolveComponent("AngleRightIcon"),_component_TieredMenuSub=resolveComponent("TieredMenuSub",!0),_directive_ripple=resolveDirective("ripple");return openBlock(),createBlock(Transition,mergeProps({name:"p-tieredmenu",onEnter:$options.onEnter},_ctx.ptm("menu.transition")),{default:withCtx(function(){return[$props.level===0||$props.visible?(openBlock(),createElementBlock("ul",mergeProps({key:0,ref:$options.containerRef,class:$props.level===0?_ctx.cx("rootList"):_ctx.cx("submenu"),tabindex:$props.tabindex},$props.level===0?_ctx.ptm("rootList"):_ctx.ptm("submenu")),[(openBlock(!0),createElementBlock(Fragment,null,renderList($props.items,function(processedItem,index){return openBlock(),createElementBlock(Fragment,{key:$options.getItemKey(processedItem)},[$options.isItemVisible(processedItem)&&!$options.getItemProp(processedItem,"separator")?(openBlock(),createElementBlock("li",mergeProps({key:0,id:$options.getItemId(processedItem),style:$options.getItemProp(processedItem,"style"),class:[_ctx.cx("item",{processedItem}),$options.getItemProp(processedItem,"class")],role:"menuitem","aria-label":$options.getItemLabel(processedItem),"aria-disabled":$options.isItemDisabled(processedItem)||void 0,"aria-expanded":$options.isItemGroup(processedItem)?$options.isItemActive(processedItem):void 0,"aria-haspopup":$options.isItemGroup(processedItem)&&!$options.getItemProp(processedItem,"to")?"menu":void 0,"aria-level":$props.level+1,"aria-setsize":$options.getAriaSetSize(),"aria-posinset":$options.getAriaPosInset(index),ref_for:!0},$options.getPTOptions(processedItem,index,"item"),{"data-p-active":$options.isItemActive(processedItem),"data-p-focused":$options.isItemFocused(processedItem),"data-p-disabled":$options.isItemDisabled(processedItem)}),[createBaseVNode("div",mergeProps({class:_ctx.cx("itemContent"),onClick:__name(function($event){return $options.onItemClick($event,processedItem)},"onClick"),onMouseenter:__name(function($event){return $options.onItemMouseEnter($event,processedItem)},"onMouseenter"),onMousemove:__name(function($event){return $options.onItemMouseMove($event,processedItem)},"onMousemove"),ref_for:!0},$options.getPTOptions(processedItem,index,"itemContent")),[$props.templates.item?(openBlock(),createBlock(resolveDynamicComponent($props.templates.item),{key:1,item:processedItem.item,hasSubmenu:$options.getItemProp(processedItem,"items"),label:$options.getItemLabel(processedItem),props:$options.getMenuItemProps(processedItem,index)},null,8,["item","hasSubmenu","label","props"])):withDirectives((openBlock(),createElementBlock("a",mergeProps({key:0,href:$options.getItemProp(processedItem,"url"),class:_ctx.cx("itemLink"),target:$options.getItemProp(processedItem,"target"),tabindex:"-1",ref_for:!0},$options.getPTOptions(processedItem,index,"itemLink")),[$props.templates.itemicon?(openBlock(),createBlock(resolveDynamicComponent($props.templates.itemicon),{key:0,item:processedItem.item,class:normalizeClass(_ctx.cx("itemIcon"))},null,8,["item","class"])):$options.getItemProp(processedItem,"icon")?(openBlock(),createElementBlock("span",mergeProps({key:1,class:[_ctx.cx("itemIcon"),$options.getItemProp(processedItem,"icon")],ref_for:!0},$options.getPTOptions(processedItem,index,"itemIcon")),null,16)):createCommentVNode("",!0),createBaseVNode("span",mergeProps({id:$options.getItemLabelId(processedItem),class:_ctx.cx("itemLabel"),ref_for:!0},$options.getPTOptions(processedItem,index,"itemLabel")),toDisplayString($options.getItemLabel(processedItem)),17,_hoisted_5$1),$options.getItemProp(processedItem,"items")?(openBlock(),createElementBlock(Fragment,{key:2},[$props.templates.submenuicon?(openBlock(),createBlock(resolveDynamicComponent($props.templates.submenuicon),mergeProps({key:0,class:_ctx.cx("submenuIcon"),active:$options.isItemActive(processedItem),ref_for:!0},$options.getPTOptions(processedItem,index,"submenuIcon")),null,16,["class","active"])):(openBlock(),createBlock(_component_AngleRightIcon,mergeProps({key:1,class:_ctx.cx("submenuIcon"),ref_for:!0},$options.getPTOptions(processedItem,index,"submenuIcon")),null,16,["class"]))],64)):createCommentVNode("",!0)],16,_hoisted_4$1)),[[_directive_ripple]])],16,_hoisted_3$4),$options.isItemVisible(processedItem)&&$options.isItemGroup(processedItem)?(openBlock(),createBlock(_component_TieredMenuSub,{key:0,id:$options.getItemId(processedItem)+"_list",style:normalizeStyle(_ctx.sx("submenu",!0,{processedItem})),"aria-labelledby":$options.getItemLabelId(processedItem),role:"menu",menuId:$props.menuId,focusedItemId:$props.focusedItemId,items:processedItem.items,templates:$props.templates,activeItemPath:$props.activeItemPath,level:$props.level+1,visible:$options.isItemActive(processedItem)&&$options.isItemGroup(processedItem),pt:_ctx.pt,unstyled:_ctx.unstyled,onItemClick:_cache[0]||(_cache[0]=function($event){return _ctx.$emit("item-click",$event)}),onItemMouseenter:_cache[1]||(_cache[1]=function($event){return _ctx.$emit("item-mouseenter",$event)}),onItemMousemove:_cache[2]||(_cache[2]=function($event){return _ctx.$emit("item-mousemove",$event)})},null,8,["id","style","aria-labelledby","menuId","focusedItemId","items","templates","activeItemPath","level","visible","pt","unstyled"])):createCommentVNode("",!0)],16,_hoisted_2$5)):createCommentVNode("",!0),$options.isItemVisible(processedItem)&&$options.getItemProp(processedItem,"separator")?(openBlock(),createElementBlock("li",mergeProps({key:1,id:$options.getItemId(processedItem),style:$options.getItemProp(processedItem,"style"),class:[_ctx.cx("separator"),$options.getItemProp(processedItem,"class")],role:"separator",ref_for:!0},_ctx.ptm("separator")),null,16,_hoisted_6)):createCommentVNode("",!0)],64)}),128))],16,_hoisted_1$1$2)):createCommentVNode("",!0)]}),_:1},16,["onEnter"])}__name(render$1$1,"render$1$1");script$1$2.render=render$1$1;var script$4={name:"TieredMenu",extends:script$2$1,inheritAttrs:!1,emits:["focus","blur","before-show","before-hide","hide","show"],outsideClickListener:null,scrollHandler:null,resizeListener:null,target:null,container:null,menubar:null,searchTimeout:null,searchValue:null,data:__name(function(){return{id:this.$attrs.id,focused:!1,focusedItemInfo:{index:-1,level:0,parentKey:""},activeItemPath:[],visible:!this.popup,submenuVisible:!1,dirty:!1}},"data"),watch:{"$attrs.id":__name(function(newValue){this.id=newValue||UniqueComponentId()},"$attrsId"),activeItemPath:__name(function(newPath){this.popup||(isNotEmpty(newPath)?(this.bindOutsideClickListener(),this.bindResizeListener()):(this.unbindOutsideClickListener(),this.unbindResizeListener()))},"activeItemPath")},mounted:__name(function(){this.id=this.id||UniqueComponentId()},"mounted"),beforeUnmount:__name(function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&ZIndex.clear(this.container),this.target=null,this.container=null},"beforeUnmount"),methods:{getItemProp:__name(function(item3,name){return item3?resolve(item3[name]):void 0},"getItemProp"),getItemLabel:__name(function(item3){return this.getItemProp(item3,"label")},"getItemLabel"),isItemDisabled:__name(function(item3){return this.getItemProp(item3,"disabled")},"isItemDisabled"),isItemVisible:__name(function(item3){return this.getItemProp(item3,"visible")!==!1},"isItemVisible"),isItemGroup:__name(function(item3){return isNotEmpty(this.getItemProp(item3,"items"))},"isItemGroup"),isItemSeparator:__name(function(item3){return this.getItemProp(item3,"separator")},"isItemSeparator"),getProccessedItemLabel:__name(function(processedItem){return processedItem?this.getItemLabel(processedItem.item):void 0},"getProccessedItemLabel"),isProccessedItemGroup:__name(function(processedItem){return processedItem&&isNotEmpty(processedItem.items)},"isProccessedItemGroup"),toggle:__name(function(event){this.visible?this.hide(event,!0):this.show(event)},"toggle"),show:__name(function(event,isFocus){this.popup&&(this.$emit("before-show"),this.visible=!0,this.target=this.target||event.currentTarget,this.relatedTarget=event.relatedTarget||null),isFocus&&focus(this.menubar)},"show"),hide:__name(function(event,isFocus){this.popup&&(this.$emit("before-hide"),this.visible=!1),this.activeItemPath=[],this.focusedItemInfo={index:-1,level:0,parentKey:""},isFocus&&focus(this.relatedTarget||this.target||this.menubar),this.dirty=!1},"hide"),onFocus:__name(function(event){this.focused=!0,this.popup||(this.focusedItemInfo=this.focusedItemInfo.index!==-1?this.focusedItemInfo:{index:this.findFirstFocusedItemIndex(),level:0,parentKey:""}),this.$emit("focus",event)},"onFocus"),onBlur:__name(function(event){this.focused=!1,this.focusedItemInfo={index:-1,level:0,parentKey:""},this.searchValue="",this.dirty=!1,this.$emit("blur",event)},"onBlur"),onKeyDown:__name(function(event){if(this.disabled){event.preventDefault();return}var metaKey=event.metaKey||event.ctrlKey;switch(event.code){case"ArrowDown":this.onArrowDownKey(event);break;case"ArrowUp":this.onArrowUpKey(event);break;case"ArrowLeft":this.onArrowLeftKey(event);break;case"ArrowRight":this.onArrowRightKey(event);break;case"Home":this.onHomeKey(event);break;case"End":this.onEndKey(event);break;case"Space":this.onSpaceKey(event);break;case"Enter":case"NumpadEnter":this.onEnterKey(event);break;case"Escape":this.onEscapeKey(event);break;case"Tab":this.onTabKey(event);break;case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!metaKey&&isPrintableCharacter(event.key)&&this.searchItems(event,event.key);break}},"onKeyDown"),onItemChange:__name(function(event){var processedItem=event.processedItem,isFocus=event.isFocus;if(!isEmpty(processedItem)){var index=processedItem.index,key=processedItem.key,level=processedItem.level,parentKey=processedItem.parentKey,items=processedItem.items,grouped=isNotEmpty(items),activeItemPath3=this.activeItemPath.filter(function(p){return p.parentKey!==parentKey&&p.parentKey!==key});grouped&&(activeItemPath3.push(processedItem),this.submenuVisible=!0),this.focusedItemInfo={index,level,parentKey},this.activeItemPath=activeItemPath3,grouped&&(this.dirty=!0),isFocus&&focus(this.menubar)}},"onItemChange"),onOverlayClick:__name(function(event){OverlayEventBus.emit("overlay-click",{originalEvent:event,target:this.target})},"onOverlayClick"),onItemClick:__name(function(event){var originalEvent=event.originalEvent,processedItem=event.processedItem,grouped=this.isProccessedItemGroup(processedItem),root11=isEmpty(processedItem.parent),selected=this.isSelected(processedItem);if(selected){var index=processedItem.index,key=processedItem.key,level=processedItem.level,parentKey=processedItem.parentKey;this.activeItemPath=this.activeItemPath.filter(function(p){return key!==p.key&&key.startsWith(p.key)}),this.focusedItemInfo={index,level,parentKey},this.dirty=!root11,focus(this.menubar)}else if(grouped)this.onItemChange(event);else{var rootProcessedItem=root11?processedItem:this.activeItemPath.find(function(p){return p.parentKey===""});this.hide(originalEvent),this.changeFocusedItemIndex(originalEvent,rootProcessedItem?rootProcessedItem.index:-1),focus(this.menubar)}},"onItemClick"),onItemMouseEnter:__name(function(event){this.dirty&&this.onItemChange(event)},"onItemMouseEnter"),onItemMouseMove:__name(function(event){this.focused&&this.changeFocusedItemIndex(event,event.processedItem.index)},"onItemMouseMove"),onArrowDownKey:__name(function(event){var itemIndex=this.focusedItemInfo.index!==-1?this.findNextItemIndex(this.focusedItemInfo.index):this.findFirstFocusedItemIndex();this.changeFocusedItemIndex(event,itemIndex),event.preventDefault()},"onArrowDownKey"),onArrowUpKey:__name(function(event){if(event.altKey){if(this.focusedItemInfo.index!==-1){var processedItem=this.visibleItems[this.focusedItemInfo.index],grouped=this.isProccessedItemGroup(processedItem);!grouped&&this.onItemChange({originalEvent:event,processedItem})}this.popup&&this.hide(event,!0),event.preventDefault()}else{var itemIndex=this.focusedItemInfo.index!==-1?this.findPrevItemIndex(this.focusedItemInfo.index):this.findLastFocusedItemIndex();this.changeFocusedItemIndex(event,itemIndex),event.preventDefault()}},"onArrowUpKey"),onArrowLeftKey:__name(function(event){var _this=this,processedItem=this.visibleItems[this.focusedItemInfo.index],parentItem=this.activeItemPath.find(function(p){return p.key===processedItem.parentKey}),root11=isEmpty(processedItem.parent);root11||(this.focusedItemInfo={index:-1,parentKey:parentItem?parentItem.parentKey:""},this.searchValue="",this.onArrowDownKey(event)),this.activeItemPath=this.activeItemPath.filter(function(p){return p.parentKey!==_this.focusedItemInfo.parentKey}),event.preventDefault()},"onArrowLeftKey"),onArrowRightKey:__name(function(event){var processedItem=this.visibleItems[this.focusedItemInfo.index],grouped=this.isProccessedItemGroup(processedItem);grouped&&(this.onItemChange({originalEvent:event,processedItem}),this.focusedItemInfo={index:-1,parentKey:processedItem.key},this.searchValue="",this.onArrowDownKey(event)),event.preventDefault()},"onArrowRightKey"),onHomeKey:__name(function(event){this.changeFocusedItemIndex(event,this.findFirstItemIndex()),event.preventDefault()},"onHomeKey"),onEndKey:__name(function(event){this.changeFocusedItemIndex(event,this.findLastItemIndex()),event.preventDefault()},"onEndKey"),onEnterKey:__name(function(event){if(this.focusedItemInfo.index!==-1){var element=findSingle(this.menubar,'li[id="'.concat("".concat(this.focusedItemId),'"]')),anchorElement=element&&findSingle(element,'[data-pc-section="itemlink"]');if(anchorElement?anchorElement.click():element&&element.click(),!this.popup){var processedItem=this.visibleItems[this.focusedItemInfo.index],grouped=this.isProccessedItemGroup(processedItem);!grouped&&(this.focusedItemInfo.index=this.findFirstFocusedItemIndex())}}event.preventDefault()},"onEnterKey"),onSpaceKey:__name(function(event){this.onEnterKey(event)},"onSpaceKey"),onEscapeKey:__name(function(event){if(this.popup||this.focusedItemInfo.level!==0){var _focusedItemInfo=this.focusedItemInfo;this.hide(event,!1),this.focusedItemInfo={index:Number(_focusedItemInfo.parentKey.split("_")[0]),level:0,parentKey:""},this.popup&&focus(this.target)}event.preventDefault()},"onEscapeKey"),onTabKey:__name(function(event){if(this.focusedItemInfo.index!==-1){var processedItem=this.visibleItems[this.focusedItemInfo.index],grouped=this.isProccessedItemGroup(processedItem);!grouped&&this.onItemChange({originalEvent:event,processedItem})}this.hide()},"onTabKey"),onEnter:__name(function(el){this.autoZIndex&&ZIndex.set("menu",el,this.baseZIndex+this.$primevue.config.zIndex.menu),addStyle(el,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),focus(this.menubar),this.scrollInView()},"onEnter"),onAfterEnter:__name(function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},"onAfterEnter"),onLeave:__name(function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.container=null,this.dirty=!1},"onLeave"),onAfterLeave:__name(function(el){this.autoZIndex&&ZIndex.clear(el)},"onAfterLeave"),alignOverlay:__name(function(){absolutePosition(this.container,this.target);var targetWidth=getOuterWidth(this.target);targetWidth>getOuterWidth(this.container)&&(this.container.style.minWidth=getOuterWidth(this.target)+"px")},"alignOverlay"),bindOutsideClickListener:__name(function(){var _this2=this;this.outsideClickListener||(this.outsideClickListener=function(event){var isOutsideContainer=_this2.container&&!_this2.container.contains(event.target),isOutsideTarget=_this2.popup?!(_this2.target&&(_this2.target===event.target||_this2.target.contains(event.target))):!0;isOutsideContainer&&isOutsideTarget&&_this2.hide()},document.addEventListener("click",this.outsideClickListener))},"bindOutsideClickListener"),unbindOutsideClickListener:__name(function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},"unbindOutsideClickListener"),bindScrollListener:__name(function(){var _this3=this;this.scrollHandler||(this.scrollHandler=new ConnectedOverlayScrollHandler(this.target,function(event){_this3.hide(event,!0)})),this.scrollHandler.bindScrollListener()},"bindScrollListener"),unbindScrollListener:__name(function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},"unbindScrollListener"),bindResizeListener:__name(function(){var _this4=this;this.resizeListener||(this.resizeListener=function(event){isTouchDevice()||_this4.hide(event,!0)},window.addEventListener("resize",this.resizeListener))},"bindResizeListener"),unbindResizeListener:__name(function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},"unbindResizeListener"),isItemMatched:__name(function(processedItem){var _this$getProccessedIt;return this.isValidItem(processedItem)&&((_this$getProccessedIt=this.getProccessedItemLabel(processedItem))===null||_this$getProccessedIt===void 0?void 0:_this$getProccessedIt.toLocaleLowerCase().startsWith(this.searchValue.toLocaleLowerCase()))},"isItemMatched"),isValidItem:__name(function(processedItem){return!!processedItem&&!this.isItemDisabled(processedItem.item)&&!this.isItemSeparator(processedItem.item)&&this.isItemVisible(processedItem.item)},"isValidItem"),isValidSelectedItem:__name(function(processedItem){return this.isValidItem(processedItem)&&this.isSelected(processedItem)},"isValidSelectedItem"),isSelected:__name(function(processedItem){return this.activeItemPath.some(function(p){return p.key===processedItem.key})},"isSelected"),findFirstItemIndex:__name(function(){var _this5=this;return this.visibleItems.findIndex(function(processedItem){return _this5.isValidItem(processedItem)})},"findFirstItemIndex"),findLastItemIndex:__name(function(){var _this6=this;return findLastIndex(this.visibleItems,function(processedItem){return _this6.isValidItem(processedItem)})},"findLastItemIndex"),findNextItemIndex:__name(function(index){var _this7=this,matchedItemIndex=index<this.visibleItems.length-1?this.visibleItems.slice(index+1).findIndex(function(processedItem){return _this7.isValidItem(processedItem)}):-1;return matchedItemIndex>-1?matchedItemIndex+index+1:index},"findNextItemIndex"),findPrevItemIndex:__name(function(index){var _this8=this,matchedItemIndex=index>0?findLastIndex(this.visibleItems.slice(0,index),function(processedItem){return _this8.isValidItem(processedItem)}):-1;return matchedItemIndex>-1?matchedItemIndex:index},"findPrevItemIndex"),findSelectedItemIndex:__name(function(){var _this9=this;return this.visibleItems.findIndex(function(processedItem){return _this9.isValidSelectedItem(processedItem)})},"findSelectedItemIndex"),findFirstFocusedItemIndex:__name(function(){var selectedIndex=this.findSelectedItemIndex();return selectedIndex<0?this.findFirstItemIndex():selectedIndex},"findFirstFocusedItemIndex"),findLastFocusedItemIndex:__name(function(){var selectedIndex=this.findSelectedItemIndex();return selectedIndex<0?this.findLastItemIndex():selectedIndex},"findLastFocusedItemIndex"),searchItems:__name(function(event,_char){var _this10=this;this.searchValue=(this.searchValue||"")+_char;var itemIndex=-1,matched=!1;return this.focusedItemInfo.index!==-1?(itemIndex=this.visibleItems.slice(this.focusedItemInfo.index).findIndex(function(processedItem){return _this10.isItemMatched(processedItem)}),itemIndex=itemIndex===-1?this.visibleItems.slice(0,this.focusedItemInfo.index).findIndex(function(processedItem){return _this10.isItemMatched(processedItem)}):itemIndex+this.focusedItemInfo.index):itemIndex=this.visibleItems.findIndex(function(processedItem){return _this10.isItemMatched(processedItem)}),itemIndex!==-1&&(matched=!0),itemIndex===-1&&this.focusedItemInfo.index===-1&&(itemIndex=this.findFirstFocusedItemIndex()),itemIndex!==-1&&this.changeFocusedItemIndex(event,itemIndex),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){_this10.searchValue="",_this10.searchTimeout=null},500),matched},"searchItems"),changeFocusedItemIndex:__name(function(event,index){this.focusedItemInfo.index!==index&&(this.focusedItemInfo.index=index,this.scrollInView())},"changeFocusedItemIndex"),scrollInView:__name(function(){var index=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,id2=index!==-1?"".concat(this.id,"_").concat(index):this.focusedItemId,element=findSingle(this.menubar,'li[id="'.concat(id2,'"]'));element&&element.scrollIntoView&&element.scrollIntoView({block:"nearest",inline:"start"})},"scrollInView"),createProcessedItems:__name(function(items){var _this11=this,level=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,parent=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},parentKey=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",processedItems3=[];return items&&items.forEach(function(item3,index){var key=(parentKey!==""?parentKey+"_":"")+index,newItem={item:item3,index,level,key,parent,parentKey};newItem.items=_this11.createProcessedItems(item3.items,level+1,newItem,key),processedItems3.push(newItem)}),processedItems3},"createProcessedItems"),containerRef:__name(function(el){this.container=el},"containerRef"),menubarRef:__name(function(el){this.menubar=el?el.$el:void 0},"menubarRef")},computed:{processedItems:__name(function(){return this.createProcessedItems(this.model||[])},"processedItems"),visibleItems:__name(function(){var _this12=this,processedItem=this.activeItemPath.find(function(p){return p.key===_this12.focusedItemInfo.parentKey});return processedItem?processedItem.items:this.processedItems},"visibleItems"),focusedItemId:__name(function(){return this.focusedItemInfo.index!==-1?"".concat(this.id).concat(isNotEmpty(this.focusedItemInfo.parentKey)?"_"+this.focusedItemInfo.parentKey:"","_").concat(this.focusedItemInfo.index):null},"focusedItemId")},components:{TieredMenuSub:script$1$2,Portal:script$k}},_hoisted_1$8=["id"];function render$5(_ctx,_cache,$props,$setup,$data,$options){var _component_TieredMenuSub=resolveComponent("TieredMenuSub"),_component_Portal=resolveComponent("Portal");return openBlock(),createBlock(_component_Portal,{appendTo:_ctx.appendTo,disabled:!_ctx.popup},{default:withCtx(function(){return[createVNode(Transition,mergeProps({name:"p-connected-overlay",onEnter:$options.onEnter,onAfterEnter:$options.onAfterEnter,onLeave:$options.onLeave,onAfterLeave:$options.onAfterLeave},_ctx.ptm("transition")),{default:withCtx(function(){return[$data.visible?(openBlock(),createElementBlock("div",mergeProps({key:0,ref:$options.containerRef,id:$data.id,class:_ctx.cx("root"),onClick:_cache[0]||(_cache[0]=function(){return $options.onOverlayClick&&$options.onOverlayClick.apply($options,arguments)})},_ctx.ptmi("root")),[_ctx.$slots.start?(openBlock(),createElementBlock("div",mergeProps({key:0,class:_ctx.cx("start")},_ctx.ptm("start")),[renderSlot(_ctx.$slots,"start")],16)):createCommentVNode("",!0),createVNode(_component_TieredMenuSub,{ref:$options.menubarRef,id:$data.id+"_list",tabindex:_ctx.disabled?-1:_ctx.tabindex,role:"menubar","aria-label":_ctx.ariaLabel,"aria-labelledby":_ctx.ariaLabelledby,"aria-disabled":_ctx.disabled||void 0,"aria-orientation":"vertical","aria-activedescendant":$data.focused?$options.focusedItemId:void 0,menuId:$data.id,focusedItemId:$data.focused?$options.focusedItemId:void 0,items:$options.processedItems,templates:_ctx.$slots,activeItemPath:$data.activeItemPath,level:0,visible:$data.submenuVisible,pt:_ctx.pt,unstyled:_ctx.unstyled,onFocus:$options.onFocus,onBlur:$options.onBlur,onKeydown:$options.onKeyDown,onItemClick:$options.onItemClick,onItemMouseenter:$options.onItemMouseEnter,onItemMousemove:$options.onItemMouseMove},null,8,["id","tabindex","aria-label","aria-labelledby","aria-disabled","aria-activedescendant","menuId","focusedItemId","items","templates","activeItemPath","visible","pt","unstyled","onFocus","onBlur","onKeydown","onItemClick","onItemMouseenter","onItemMousemove"]),_ctx.$slots.end?(openBlock(),createElementBlock("div",mergeProps({key:1,class:_ctx.cx("end")},_ctx.ptm("end")),[renderSlot(_ctx.$slots,"end")],16)):createCommentVNode("",!0)],16,_hoisted_1$8)):createCommentVNode("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo","disabled"])}__name(render$5,"render$5");script$4.render=render$5;var theme$1=__name(function(_ref){var dt=_ref.dt;return`
.p-splitbutton {
    display: inline-flex;
    position: relative;
    border-radius: `.concat(dt("splitbutton.border.radius"),`;
}

.p-splitbutton-button {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    border-right: 0 none;
}

.p-splitbutton-button:focus-visible,
.p-splitbutton-dropdown:focus-visible {
    z-index: 1;
}

.p-splitbutton-button:not(:disabled):hover,
.p-splitbutton-button:not(:disabled):active {
    border-right: 0 none;
}

.p-splitbutton-dropdown {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

.p-splitbutton .p-menu {
    min-width: 100%;
}

.p-splitbutton-fluid {
    display: flex;
}

.p-splitbutton-rounded .p-splitbutton-dropdown {
    border-top-right-radius: `).concat(dt("splitbutton.rounded.border.radius"),`;
    border-bottom-right-radius: `).concat(dt("splitbutton.rounded.border.radius"),`;
}

.p-splitbutton-rounded .p-splitbutton-button {
    border-top-left-radius: `).concat(dt("splitbutton.rounded.border.radius"),`;
    border-bottom-left-radius: `).concat(dt("splitbutton.rounded.border.radius"),`;
}

.p-splitbutton-raised {
    box-shadow: `).concat(dt("splitbutton.raised.shadow"),`;
}
`)},"theme"),classes$1={root:__name(function(_ref2){var instance=_ref2.instance,props=_ref2.props;return["p-splitbutton p-component",{"p-splitbutton-raised":props.raised,"p-splitbutton-rounded":props.rounded,"p-splitbutton-fluid":instance.hasFluid}]},"root"),pcButton:"p-splitbutton-button",pcDropdown:"p-splitbutton-dropdown"},SplitButtonStyle=BaseStyle.extend({name:"splitbutton",theme:theme$1,classes:classes$1}),script$1$1={name:"BaseSplitButton",extends:script$e,props:{label:{type:String,default:null},icon:{type:String,default:null},model:{type:Array,default:null},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1},fluid:{type:Boolean,default:null},class:{type:null,default:null},style:{type:null,default:null},buttonProps:{type:null,default:null},menuButtonProps:{type:null,default:null},menuButtonIcon:{type:String,default:void 0},dropdownIcon:{type:String,default:void 0},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},plain:{type:Boolean,default:!1}},style:SplitButtonStyle,provide:__name(function(){return{$pcSplitButton:this,$parentInstance:this}},"provide")},script$3={name:"SplitButton",extends:script$1$1,inheritAttrs:!1,emits:["click"],inject:{$pcFluid:{default:null}},data:__name(function(){return{id:this.$attrs.id,isExpanded:!1}},"data"),watch:{"$attrs.id":__name(function(newValue){this.id=newValue||UniqueComponentId()},"$attrsId")},mounted:__name(function(){var _this=this;this.id=this.id||UniqueComponentId(),this.$watch("$refs.menu.visible",function(newValue){_this.isExpanded=newValue})},"mounted"),methods:{onDropdownButtonClick:__name(function(event){event&&event.preventDefault(),this.$refs.menu.toggle({currentTarget:this.$el,relatedTarget:this.$refs.button.$el}),this.isExpanded=this.$refs.menu.visible},"onDropdownButtonClick"),onDropdownKeydown:__name(function(event){(event.code==="ArrowDown"||event.code==="ArrowUp")&&(this.onDropdownButtonClick(),event.preventDefault())},"onDropdownKeydown"),onDefaultButtonClick:__name(function(event){this.isExpanded&&this.$refs.menu.hide(event),this.$emit("click",event)},"onDefaultButtonClick")},computed:{containerClass:__name(function(){return[this.cx("root"),this.class]},"containerClass"),hasFluid:__name(function(){return isEmpty(this.fluid)?!!this.$pcFluid:this.fluid},"hasFluid")},components:{PVSButton:script$d,PVSMenu:script$4,ChevronDownIcon:script$l}},_hoisted_1$7=["data-p-severity"];function render$4(_ctx,_cache,$props,$setup,$data,$options){var _component_PVSButton=resolveComponent("PVSButton"),_component_PVSMenu=resolveComponent("PVSMenu");return openBlock(),createElementBlock("div",mergeProps({class:$options.containerClass,style:_ctx.style},_ctx.ptmi("root"),{"data-p-severity":_ctx.severity}),[createVNode(_component_PVSButton,mergeProps({type:"button",class:_ctx.cx("pcButton"),label:_ctx.label,disabled:_ctx.disabled,severity:_ctx.severity,text:_ctx.text,icon:_ctx.icon,outlined:_ctx.outlined,size:_ctx.size,fluid:_ctx.fluid,"aria-label":_ctx.label,onClick:$options.onDefaultButtonClick},_ctx.buttonProps,{pt:_ctx.ptm("pcButton"),unstyled:_ctx.unstyled}),createSlots({default:withCtx(function(){return[renderSlot(_ctx.$slots,"default")]}),_:2},[_ctx.$slots.icon?{name:"icon",fn:withCtx(function(slotProps){return[renderSlot(_ctx.$slots,"icon",{class:normalizeClass(slotProps.class)},function(){return[createBaseVNode("span",mergeProps({class:[_ctx.icon,slotProps.class]},_ctx.ptm("pcButton").icon,{"data-pc-section":"buttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["class","label","disabled","severity","text","icon","outlined","size","fluid","aria-label","onClick","pt","unstyled"]),createVNode(_component_PVSButton,mergeProps({ref:"button",type:"button",class:_ctx.cx("pcDropdown"),disabled:_ctx.disabled,"aria-haspopup":"true","aria-expanded":$data.isExpanded,"aria-controls":$data.id+"_overlay",onClick:$options.onDropdownButtonClick,onKeydown:$options.onDropdownKeydown,severity:_ctx.severity,text:_ctx.text,outlined:_ctx.outlined,size:_ctx.size,unstyled:_ctx.unstyled},_ctx.menuButtonProps,{pt:_ctx.ptm("pcDropdown")}),{icon:withCtx(function(slotProps){return[renderSlot(_ctx.$slots,_ctx.$slots.dropdownicon?"dropdownicon":"menubuttonicon",{class:normalizeClass(slotProps.class)},function(){return[(openBlock(),createBlock(resolveDynamicComponent(_ctx.menuButtonIcon||_ctx.dropdownIcon?"span":"ChevronDownIcon"),mergeProps({class:[_ctx.dropdownIcon||_ctx.menuButtonIcon,slotProps.class]},_ctx.ptm("pcDropdown").icon,{"data-pc-section":"menubuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","disabled","aria-expanded","aria-controls","onClick","onKeydown","severity","text","outlined","size","unstyled","pt"]),createVNode(_component_PVSMenu,{ref:"menu",id:$data.id+"_overlay",model:_ctx.model,popup:!0,autoZIndex:_ctx.autoZIndex,baseZIndex:_ctx.baseZIndex,appendTo:_ctx.appendTo,unstyled:_ctx.unstyled,pt:_ctx.ptm("pcMenu")},createSlots({_:2},[_ctx.$slots.menuitemicon?{name:"itemicon",fn:withCtx(function(slotProps){return[renderSlot(_ctx.$slots,"menuitemicon",{item:slotProps.item,class:normalizeClass(slotProps.class)})]}),key:"0"}:void 0,_ctx.$slots.item?{name:"item",fn:withCtx(function(slotProps){return[renderSlot(_ctx.$slots,"item",{item:slotProps.item,hasSubmenu:slotProps.hasSubmenu,label:slotProps.label,props:slotProps.props})]}),key:"1"}:void 0]),1032,["id","model","autoZIndex","baseZIndex","appendTo","unstyled","pt"])],16,_hoisted_1$7)}__name(render$4,"render$4");script$3.render=render$4;const _hoisted_1$6=["aria-label"],minQueueCount=1,_sfc_main$6=defineComponent({__name:"BatchCountEdit",props:{class:{default:""}},setup(__props){const props=__props,queueSettingsStore=useQueueSettingsStore(),{batchCount}=storeToRefs(queueSettingsStore),settingStore=useSettingStore(),maxQueueCount=computed(()=>settingStore.get("Comfy.QueueButton.BatchCountLimit")),handleClick=__name(increment=>{let newCount;if(increment){const originalCount=batchCount.value-1;newCount=Math.min(originalCount*2,maxQueueCount.value)}else{const originalCount=batchCount.value+1;newCount=Math.floor(originalCount/2)}batchCount.value=newCount},"handleClick");return(_ctx,_cache)=>{const _directive_tooltip=resolveDirective("tooltip");return withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(["batch-count",props.class]),"aria-label":_ctx.$t("menu.batchCount")},[createVNode(unref(script$A),{class:"w-14",modelValue:unref(batchCount),"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>isRef(batchCount)?batchCount.value=$event:null),min:minQueueCount,max:maxQueueCount.value,fluid:"",showButtons:"",pt:{incrementButton:{class:"w-6",onmousedown:__name(()=>{handleClick(!0)},"onmousedown")},decrementButton:{class:"w-6",onmousedown:__name(()=>{handleClick(!1)},"onmousedown")}}},null,8,["modelValue","max","pt"])],10,_hoisted_1$6)),[[_directive_tooltip,_ctx.$t("menu.batchCount"),void 0,{bottom:!0}]])}}}),BatchCountEdit=_export_sfc(_sfc_main$6,[["__scopeId","data-v-26957f1f"]]);const _hoisted_1$5={class:"queue-button-group flex"},_sfc_main$5=defineComponent({__name:"ComfyQueueButton",setup(__props){const workspaceStore=useWorkspaceStore(),queueCountStore=storeToRefs(useQueuePendingTaskCountStore()),{mode:queueMode}=storeToRefs(useQueueSettingsStore()),{t}=useI18n(),queueModeMenuItemLookup=computed(()=>({disabled:{key:"disabled",label:t("menu.queue"),tooltip:t("menu.disabledTooltip"),command:__name(()=>{queueMode.value="disabled"},"command")},instant:{key:"instant",label:`${t("menu.queue")} (${t("menu.instant")})`,tooltip:t("menu.instantTooltip"),command:__name(()=>{queueMode.value="instant"},"command")},change:{key:"change",label:`${t("menu.queue")} (${t("menu.onChange")})`,tooltip:t("menu.onChangeTooltip"),command:__name(()=>{queueMode.value="change"},"command")}})),activeQueueModeMenuItem=computed(()=>queueModeMenuItemLookup.value[queueMode.value]),queueModeMenuItems=computed(()=>Object.values(queueModeMenuItemLookup.value)),executingPrompt=computed(()=>!!queueCountStore.count.value),hasPendingTasks=computed(()=>queueCountStore.count.value>1),commandStore=useCommandStore(),queuePrompt=__name(e=>{const commandId=e.shiftKey?"Comfy.QueuePromptFront":"Comfy.QueuePrompt";commandStore.execute(commandId)},"queuePrompt");return(_ctx,_cache)=>{const _component_i_lucide58list_start=__unplugin_components_0$1,_component_i_lucide58play=__unplugin_components_1$1,_component_i_lucide58fast_forward=__unplugin_components_2,_component_i_lucide58step_forward=__unplugin_components_3,_directive_tooltip=resolveDirective("tooltip");return openBlock(),createElementBlock("div",_hoisted_1$5,[withDirectives((openBlock(),createBlock(unref(script$3),{class:"comfyui-queue-button",label:activeQueueModeMenuItem.value.label,severity:"primary",size:"small",onClick:queuePrompt,model:queueModeMenuItems.value,"data-testid":"queue-button"},{icon:withCtx(()=>[unref(workspaceStore).shiftDown?(openBlock(),createBlock(_component_i_lucide58list_start,{key:0})):unref(queueMode)==="disabled"?(openBlock(),createBlock(_component_i_lucide58play,{key:1})):unref(queueMode)==="instant"?(openBlock(),createBlock(_component_i_lucide58fast_forward,{key:2})):unref(queueMode)==="change"?(openBlock(),createBlock(_component_i_lucide58step_forward,{key:3})):createCommentVNode("",!0)]),item:withCtx(({item:item3})=>[withDirectives(createVNode(unref(script$d),{label:item3.label,icon:item3.icon,severity:item3.key===unref(queueMode)?"primary":"secondary",size:"small",text:""},null,8,["label","icon","severity"]),[[_directive_tooltip,item3.tooltip]])]),_:1},8,["label","model"])),[[_directive_tooltip,unref(workspaceStore).shiftDown?_ctx.$t("menu.queueWorkflowFront"):_ctx.$t("menu.queueWorkflow"),void 0,{bottom:!0}]]),createVNode(BatchCountEdit),createVNode(unref(script$8),{class:"execution-actions flex flex-nowrap"},{default:withCtx(()=>[withDirectives(createVNode(unref(script$d),{icon:"pi pi-times",severity:executingPrompt.value?"danger":"secondary",disabled:!executingPrompt.value,text:"","aria-label":_ctx.$t("menu.interrupt"),onClick:_cache[0]||(_cache[0]=()=>unref(commandStore).execute("Comfy.Interrupt"))},null,8,["severity","disabled","aria-label"]),[[_directive_tooltip,_ctx.$t("menu.interrupt"),void 0,{bottom:!0}]]),withDirectives(createVNode(unref(script$d),{icon:"pi pi-stop",severity:hasPendingTasks.value?"danger":"secondary",disabled:!hasPendingTasks.value,text:"","aria-label":_ctx.$t("sideToolbar.queueTab.clearPendingTasks"),onClick:_cache[1]||(_cache[1]=()=>unref(commandStore).execute("Comfy.ClearPendingTasks"))},null,8,["severity","disabled","aria-label"]),[[_directive_tooltip,_ctx.$t("sideToolbar.queueTab.clearPendingTasks"),void 0,{bottom:!0}]])]),_:1})])}}}),ComfyQueueButton=_export_sfc(_sfc_main$5,[["__scopeId","data-v-e9044686"]]),overlapThreshold=20,_sfc_main$4=defineComponent({__name:"ComfyActionbar",setup(__props){const settingsStore=useSettingStore(),visible=computed(()=>settingsStore.get("Comfy.UseNewMenu")!=="Disabled"),panelRef=ref(null),dragHandleRef=ref(null),isDocked=useLocalStorage("Comfy.MenuPosition.Docked",!1),storedPosition=useLocalStorage("Comfy.MenuPosition.Floating",{x:0,y:0}),{x,y,style,isDragging}=useDraggable(panelRef,{initialValue:{x:0,y:0},handle:dragHandleRef,containerElement:document.body});watchDebounced([x,y],([newX,newY])=>{storedPosition.value={x:newX,y:newY}},{debounce:300});const setInitialPosition=__name(()=>{if(!(x.value!==0||y.value!==0)){if(storedPosition.value.x!==0||storedPosition.value.y!==0){x.value=storedPosition.value.x,y.value=storedPosition.value.y,captureLastDragState();return}if(panelRef.value){const screenWidth=window.innerWidth,screenHeight=window.innerHeight,menuWidth=panelRef.value.offsetWidth,menuHeight=panelRef.value.offsetHeight;if(menuWidth===0||menuHeight===0)return;x.value=(screenWidth-menuWidth)/2,y.value=screenHeight-menuHeight-10,captureLastDragState()}}},"setInitialPosition");onMounted(setInitialPosition),watch(visible,newVisible=>{newVisible&&nextTick(setInitialPosition)});const lastDragState=ref({x:x.value,y:y.value,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),captureLastDragState=__name(()=>{lastDragState.value={x:x.value,y:y.value,windowWidth:window.innerWidth,windowHeight:window.innerHeight}},"captureLastDragState");watch(isDragging,newIsDragging=>{newIsDragging||captureLastDragState()},{immediate:!0}),useEventListener(window,"resize",__name(()=>{if(panelRef.value){const screenWidth=window.innerWidth,screenHeight=window.innerHeight,menuWidth=panelRef.value.offsetWidth,menuHeight=panelRef.value.offsetHeight,distanceLeft=lastDragState.value.x,distanceRight=lastDragState.value.windowWidth-(lastDragState.value.x+menuWidth),distanceTop=lastDragState.value.y,distanceBottom=lastDragState.value.windowHeight-(lastDragState.value.y+menuHeight),closestEdge=[{edge:"left",distance:distanceLeft},{edge:"right",distance:distanceRight},{edge:"top",distance:distanceTop},{edge:"bottom",distance:distanceBottom}].reduce((min,curr)=>curr.distance<min.distance?curr:min),verticalRatio=lastDragState.value.y/lastDragState.value.windowHeight,horizontalRatio=lastDragState.value.x/lastDragState.value.windowWidth;closestEdge.edge==="left"?(x.value=closestEdge.distance,y.value=verticalRatio*screenHeight):closestEdge.edge==="right"?(x.value=screenWidth-menuWidth-closestEdge.distance,y.value=verticalRatio*screenHeight):closestEdge.edge==="top"?(x.value=horizontalRatio*screenWidth,y.value=closestEdge.distance):(x.value=horizontalRatio*screenWidth,y.value=screenHeight-menuHeight-closestEdge.distance),x.value=lodashExports.clamp(x.value,0,screenWidth-menuWidth),y.value=lodashExports.clamp(y.value,0,screenHeight-menuHeight)}},"adjustMenuPosition"));const topMenuRef=inject("topMenuRef"),topMenuBounds=useElementBounding(topMenuRef),isOverlappingWithTopMenu=computed(()=>{if(!panelRef.value)return!1;const{height}=panelRef.value.getBoundingClientRect(),actionbarBottom=y.value+height,topMenuBottom=topMenuBounds.bottom.value;return Math.min(actionbarBottom,topMenuBottom)-Math.max(y.value,topMenuBounds.top.value)>overlapThreshold});watch(isDragging,newIsDragging=>{newIsDragging?isDocked.value=!1:isDocked.value=isOverlappingWithTopMenu.value});const eventBus=useEventBus("topMenu");return watch([isDragging,isOverlappingWithTopMenu],([dragging,overlapping])=>{eventBus.emit("updateHighlight",{isDragging:dragging,isOverlapping:overlapping})}),(_ctx,_cache)=>(openBlock(),createBlock(unref(script$B),{class:normalizeClass(["actionbar w-fit",{"is-dragging":unref(isDragging),"is-docked":unref(isDocked)}]),style:normalizeStyle(unref(style))},{default:withCtx(()=>[createBaseVNode("div",{class:"actionbar-content flex items-center",ref_key:"panelRef",ref:panelRef},[createBaseVNode("span",{class:"drag-handle cursor-move mr-2 p-0!",ref_key:"dragHandleRef",ref:dragHandleRef},null,512),createVNode(ComfyQueueButton)],512)]),_:1},8,["style","class"]))}}),Actionbar=_export_sfc(_sfc_main$4,[["__scopeId","data-v-915e5456"]]),_hoisted_1$4={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_hoisted_2$4=createBaseVNode("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-5v3h14v-3zm0-2h14V5H5zm0 2v3z"},null,-1),_hoisted_3$3=[_hoisted_2$4];function render$3(_ctx,_cache){return openBlock(),createElementBlock("svg",_hoisted_1$4,[..._hoisted_3$3])}__name(render$3,"render$3");const __unplugin_components_1=markRaw({name:"material-symbols-dock-to-bottom-outline",render:render$3}),_hoisted_1$3={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_hoisted_2$3=createBaseVNode("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-7h14V5H5z"},null,-1),_hoisted_3$2=[_hoisted_2$3];function render$2(_ctx,_cache){return openBlock(),createElementBlock("svg",_hoisted_1$3,[..._hoisted_3$2])}__name(render$2,"render$2");const __unplugin_components_0=markRaw({name:"material-symbols-dock-to-bottom",render:render$2}),_sfc_main$3=defineComponent({__name:"BottomPanelToggleButton",setup(__props){const bottomPanelStore=useBottomPanelStore();return(_ctx,_cache)=>{const _component_i_material_symbols58dock_to_bottom=__unplugin_components_0,_component_i_material_symbols58dock_to_bottom_outline=__unplugin_components_1,_directive_tooltip=resolveDirective("tooltip");return withDirectives((openBlock(),createBlock(unref(script$d),{severity:"secondary",text:"","aria-label":_ctx.$t("menu.toggleBottomPanel"),onClick:unref(bottomPanelStore).toggleBottomPanel},{icon:withCtx(()=>[unref(bottomPanelStore).bottomPanelVisible?(openBlock(),createBlock(_component_i_material_symbols58dock_to_bottom,{key:0})):(openBlock(),createBlock(_component_i_material_symbols58dock_to_bottom_outline,{key:1}))]),_:1},8,["aria-label","onClick"])),[[vShow,unref(bottomPanelStore).bottomPanelTabs.length>0],[_directive_tooltip,{value:_ctx.$t("menu.toggleBottomPanel"),showDelay:300}]])}}});var theme8=__name(function(_ref){var dt=_ref.dt;return`
.p-menubar {
    display: flex;
    align-items: center;
    background: `.concat(dt("menubar.background"),`;
    border: 1px solid `).concat(dt("menubar.border.color"),`;
    border-radius: `).concat(dt("menubar.border.radius"),`;
    color: `).concat(dt("menubar.color"),`;
    padding: `).concat(dt("menubar.padding"),`;
    gap: `).concat(dt("menubar.gap"),`;
}

.p-menubar-start,
.p-megamenu-end {
    display: flex;
    align-items: center;
}

.p-menubar-root-list,
.p-menubar-submenu {
    display: flex;
    margin: 0;
    padding: 0;
    list-style: none;
    outline: 0 none;
}

.p-menubar-root-list {
    align-items: center;
    flex-wrap: wrap;
    gap: `).concat(dt("menubar.gap"),`;
}

.p-menubar-root-list > .p-menubar-item > .p-menubar-item-content {
    border-radius: `).concat(dt("menubar.base.item.border.radius"),`;
}

.p-menubar-root-list > .p-menubar-item > .p-menubar-item-content > .p-menubar-item-link {
    padding: `).concat(dt("menubar.base.item.padding"),`;
}

.p-menubar-item-content {
    transition: background `).concat(dt("menubar.transition.duration"),", color ").concat(dt("menubar.transition.duration"),`;
    border-radius: `).concat(dt("menubar.item.border.radius"),`;
    color: `).concat(dt("menubar.item.color"),`;
}

.p-menubar-item-link {
    cursor: pointer;
    display: flex;
    align-items: center;
    text-decoration: none;
    overflow: hidden;
    position: relative;
    color: inherit;
    padding: `).concat(dt("menubar.item.padding"),`;
    gap: `).concat(dt("menubar.item.gap"),`;
    user-select: none;
    outline: 0 none;
}

.p-menubar-item-label {
    line-height: 1;
}

.p-menubar-item-icon {
    color: `).concat(dt("menubar.item.icon.color"),`;
}

.p-menubar-submenu-icon {
    color: `).concat(dt("menubar.submenu.icon.color"),`;
    margin-left: auto;
    font-size: `).concat(dt("menubar.submenu.icon.size"),`;
    width: `).concat(dt("menubar.submenu.icon.size"),`;
    height: `).concat(dt("menubar.submenu.icon.size"),`;
}

.p-menubar-item.p-focus > .p-menubar-item-content {
    color: `).concat(dt("menubar.item.focus.color"),`;
    background: `).concat(dt("menubar.item.focus.background"),`;
}

.p-menubar-item.p-focus > .p-menubar-item-content .p-menubar-item-icon {
    color: `).concat(dt("menubar.item.icon.focus.color"),`;
}

.p-menubar-item.p-focus > .p-menubar-item-content .p-menubar-submenu-icon {
    color: `).concat(dt("menubar.submenu.icon.focus.color"),`;
}

.p-menubar-item:not(.p-disabled) > .p-menubar-item-content:hover {
    color: `).concat(dt("menubar.item.focus.color"),`;
    background: `).concat(dt("menubar.item.focus.background"),`;
}

.p-menubar-item:not(.p-disabled) > .p-menubar-item-content:hover .p-menubar-item-icon {
    color: `).concat(dt("menubar.item.icon.focus.color"),`;
}

.p-menubar-item:not(.p-disabled) > .p-menubar-item-content:hover .p-menubar-submenu-icon {
    color: `).concat(dt("menubar.submenu.icon.focus.color"),`;
}

.p-menubar-item-active > .p-menubar-item-content {
    color: `).concat(dt("menubar.item.active.color"),`;
    background: `).concat(dt("menubar.item.active.background"),`;
}

.p-menubar-item-active > .p-menubar-item-content .p-menubar-item-icon {
    color: `).concat(dt("menubar.item.icon.active.color"),`;
}

.p-menubar-item-active > .p-menubar-item-content .p-menubar-submenu-icon {
    color: `).concat(dt("menubar.submenu.icon.active.color"),`;
}

.p-menubar-submenu {
    display: none;
    position: absolute;
    min-width: 12.5rem;
    z-index: 1;
    background: `).concat(dt("menubar.submenu.background"),`;
    border: 1px solid `).concat(dt("menubar.submenu.border.color"),`;
    border-radius: `).concat(dt("menubar.border.radius"),`;
    box-shadow: `).concat(dt("menubar.submenu.shadow"),`;
    color: `).concat(dt("menubar.submenu.color"),`;
    flex-direction: column;
    padding: `).concat(dt("menubar.submenu.padding"),`;
    gap: `).concat(dt("menubar.submenu.gap"),`;
}

.p-menubar-submenu .p-menubar-separator {
    border-top: 1px solid `).concat(dt("menubar.separator.border.color"),`;
}

.p-menubar-submenu .p-menubar-item {
    position: relative;
}

 .p-menubar-submenu > .p-menubar-item-active > .p-menubar-submenu {
    display: block;
    left: 100%;
    top: 0;
}

.p-menubar-end {
    margin-left: auto;
    align-self: center;
}

.p-menubar-button {
    display: none;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    width: `).concat(dt("menubar.mobile.button.size"),`;
    height: `).concat(dt("menubar.mobile.button.size"),`;
    position: relative;
    color: `).concat(dt("menubar.mobile.button.color"),`;
    border: 0 none;
    background: transparent;
    border-radius: `).concat(dt("menubar.mobile.button.border.radius"),`;
    transition: background `).concat(dt("menubar.transition.duration"),", color ").concat(dt("menubar.transition.duration"),", outline-color ").concat(dt("menubar.transition.duration"),`;
    outline-color: transparent;
}

.p-menubar-button:hover {
    color: `).concat(dt("menubar.mobile.button.hover.color"),`;
    background: `).concat(dt("menubar.mobile.button.hover.background"),`;
}

.p-menubar-button:focus-visible {
    box-shadow: `).concat(dt("menubar.mobile.button.focus.ring.shadow"),`;
    outline: `).concat(dt("menubar.mobile.button.focus.ring.width")," ").concat(dt("menubar.mobile.button.focus.ring.style")," ").concat(dt("menubar.mobile.button.focus.ring.color"),`;
    outline-offset: `).concat(dt("menubar.mobile.button.focus.ring.offset"),`;
}

.p-menubar-mobile {
    position: relative;
}

.p-menubar-mobile .p-menubar-button {
    display: flex;
}

.p-menubar-mobile .p-menubar-root-list {
    position: absolute;
    display: none;
    width: 100%;
    padding: `).concat(dt("menubar.submenu.padding"),`;
    background: `).concat(dt("menubar.submenu.background"),`;
    border: 1px solid `).concat(dt("menubar.submenu.border.color"),`;
    box-shadow: `).concat(dt("menubar.submenu.shadow"),`;
}

.p-menubar-mobile .p-menubar-root-list > .p-menubar-item > .p-menubar-item-content {
    border-radius: `).concat(dt("menubar.item.border.radius"),`;
}

.p-menubar-mobile .p-menubar-root-list > .p-menubar-item > .p-menubar-item-content > .p-menubar-item-link {
    padding: `).concat(dt("menubar.item.padding"),`;
}

.p-menubar-mobile-active .p-menubar-root-list {
    display: flex;
    flex-direction: column;
    top: 100%;
    left: 0;
    z-index: 1;
}

.p-menubar-mobile .p-menubar-root-list .p-menubar-item {
    width: 100%;
    position: static;
}

.p-menubar-mobile .p-menubar-root-list .p-menubar-separator {
    border-top: 1px solid `).concat(dt("menubar.separator.border.color"),`;
}

.p-menubar-mobile .p-menubar-root-list > .p-menubar-item > .p-menubar-item-content .p-menubar-submenu-icon {
    margin-left: auto;
    transition: transform 0.2s;
}

.p-menubar-mobile .p-menubar-root-list > .p-menubar-item-active > .p-menubar-item-content .p-menubar-submenu-icon {
    transform: rotate(-180deg);
}

.p-menubar-mobile .p-menubar-submenu .p-menubar-submenu-icon {
    transition: transform 0.2s;
    transform: rotate(90deg);
}

.p-menubar-mobile  .p-menubar-item-active > .p-menubar-item-content .p-menubar-submenu-icon {
    transform: rotate(-90deg);
}

.p-menubar-mobile .p-menubar-submenu {
    width: 100%;
    position: static;
    box-shadow: none;
    border: 0 none;
    padding-left: `).concat(dt("menubar.submenu.mobile.indent"),`;
}
`)},"theme"),inlineStyles={submenu:__name(function(_ref2){var instance=_ref2.instance,processedItem=_ref2.processedItem;return{display:instance.isItemActive(processedItem)?"flex":"none"}},"submenu")},classes={root:__name(function(_ref3){var instance=_ref3.instance;return["p-menubar p-component",{"p-menubar-mobile":instance.queryMatches,"p-menubar-mobile-active":instance.mobileActive}]},"root"),start:"p-menubar-start",button:"p-menubar-button",rootList:"p-menubar-root-list",item:__name(function(_ref4){var instance=_ref4.instance,processedItem=_ref4.processedItem;return["p-menubar-item",{"p-menubar-item-active":instance.isItemActive(processedItem),"p-focus":instance.isItemFocused(processedItem),"p-disabled":instance.isItemDisabled(processedItem)}]},"item"),itemContent:"p-menubar-item-content",itemLink:"p-menubar-item-link",itemIcon:"p-menubar-item-icon",itemLabel:"p-menubar-item-label",submenuIcon:"p-menubar-submenu-icon",submenu:"p-menubar-submenu",separator:"p-menubar-separator",end:"p-menubar-end"},MenubarStyle=BaseStyle.extend({name:"menubar",theme:theme8,classes,inlineStyles}),script$2={name:"BaseMenubar",extends:script$e,props:{model:{type:Array,default:null},buttonProps:{type:null,default:null},breakpoint:{type:String,default:"960px"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:MenubarStyle,provide:__name(function(){return{$pcMenubar:this,$parentInstance:this}},"provide")},script$1={name:"MenubarSub",hostName:"Menubar",extends:script$e,emits:["item-mouseenter","item-click","item-mousemove"],props:{items:{type:Array,default:null},root:{type:Boolean,default:!1},popup:{type:Boolean,default:!1},mobileActive:{type:Boolean,default:!1},templates:{type:Object,default:null},level:{type:Number,default:0},menuId:{type:String,default:null},focusedItemId:{type:String,default:null},activeItemPath:{type:Object,default:null}},list:null,methods:{getItemId:__name(function(processedItem){return"".concat(this.menuId,"_").concat(processedItem.key)},"getItemId"),getItemKey:__name(function(processedItem){return this.getItemId(processedItem)},"getItemKey"),getItemProp:__name(function(processedItem,name,params){return processedItem&&processedItem.item?resolve(processedItem.item[name],params):void 0},"getItemProp"),getItemLabel:__name(function(processedItem){return this.getItemProp(processedItem,"label")},"getItemLabel"),getItemLabelId:__name(function(processedItem){return"".concat(this.menuId,"_").concat(processedItem.key,"_label")},"getItemLabelId"),getPTOptions:__name(function(processedItem,index,key){return this.ptm(key,{context:{item:processedItem.item,index,active:this.isItemActive(processedItem),focused:this.isItemFocused(processedItem),disabled:this.isItemDisabled(processedItem),level:this.level}})},"getPTOptions"),isItemActive:__name(function(processedItem){return this.activeItemPath.some(function(path){return path.key===processedItem.key})},"isItemActive"),isItemVisible:__name(function(processedItem){return this.getItemProp(processedItem,"visible")!==!1},"isItemVisible"),isItemDisabled:__name(function(processedItem){return this.getItemProp(processedItem,"disabled")},"isItemDisabled"),isItemFocused:__name(function(processedItem){return this.focusedItemId===this.getItemId(processedItem)},"isItemFocused"),isItemGroup:__name(function(processedItem){return isNotEmpty(processedItem.items)},"isItemGroup"),onItemClick:__name(function(event,processedItem){this.getItemProp(processedItem,"command",{originalEvent:event,item:processedItem.item}),this.$emit("item-click",{originalEvent:event,processedItem,isFocus:!0})},"onItemClick"),onItemMouseEnter:__name(function(event,processedItem){this.$emit("item-mouseenter",{originalEvent:event,processedItem})},"onItemMouseEnter"),onItemMouseMove:__name(function(event,processedItem){this.$emit("item-mousemove",{originalEvent:event,processedItem})},"onItemMouseMove"),getAriaPosInset:__name(function(index){return index-this.calculateAriaSetSize.slice(0,index).length+1},"getAriaPosInset"),getMenuItemProps:__name(function(processedItem,index){return{action:mergeProps({class:this.cx("itemLink"),tabindex:-1,"aria-hidden":!0},this.getPTOptions(processedItem,index,"itemLink")),icon:mergeProps({class:[this.cx("itemIcon"),this.getItemProp(processedItem,"icon")]},this.getPTOptions(processedItem,index,"itemIcon")),label:mergeProps({class:this.cx("itemLabel")},this.getPTOptions(processedItem,index,"itemLabel")),submenuicon:mergeProps({class:this.cx("submenuIcon")},this.getPTOptions(processedItem,index,"submenuIcon"))}},"getMenuItemProps")},computed:{calculateAriaSetSize:__name(function(){var _this=this;return this.items.filter(function(processedItem){return _this.isItemVisible(processedItem)&&_this.getItemProp(processedItem,"separator")})},"calculateAriaSetSize"),getAriaSetSize:__name(function(){var _this2=this;return this.items.filter(function(processedItem){return _this2.isItemVisible(processedItem)&&!_this2.getItemProp(processedItem,"separator")}).length},"getAriaSetSize")},components:{AngleRightIcon:script$z,AngleDownIcon:script$C},directives:{ripple:Ripple}},_hoisted_1$1$1=["id","aria-label","aria-disabled","aria-expanded","aria-haspopup","aria-level","aria-setsize","aria-posinset","data-p-active","data-p-focused","data-p-disabled"],_hoisted_2$2=["onClick","onMouseenter","onMousemove"],_hoisted_3$1=["href","target"],_hoisted_4=["id"],_hoisted_5=["id"];function render$1(_ctx,_cache,$props,$setup,$data,$options){var _component_MenubarSub=resolveComponent("MenubarSub",!0),_directive_ripple=resolveDirective("ripple");return openBlock(),createElementBlock("ul",mergeProps({class:$props.level===0?_ctx.cx("rootList"):_ctx.cx("submenu")},$props.level===0?_ctx.ptm("rootList"):_ctx.ptm("submenu")),[(openBlock(!0),createElementBlock(Fragment,null,renderList($props.items,function(processedItem,index){return openBlock(),createElementBlock(Fragment,{key:$options.getItemKey(processedItem)},[$options.isItemVisible(processedItem)&&!$options.getItemProp(processedItem,"separator")?(openBlock(),createElementBlock("li",mergeProps({key:0,id:$options.getItemId(processedItem),style:$options.getItemProp(processedItem,"style"),class:[_ctx.cx("item",{processedItem}),$options.getItemProp(processedItem,"class")],role:"menuitem","aria-label":$options.getItemLabel(processedItem),"aria-disabled":$options.isItemDisabled(processedItem)||void 0,"aria-expanded":$options.isItemGroup(processedItem)?$options.isItemActive(processedItem):void 0,"aria-haspopup":$options.isItemGroup(processedItem)&&!$options.getItemProp(processedItem,"to")?"menu":void 0,"aria-level":$props.level+1,"aria-setsize":$options.getAriaSetSize,"aria-posinset":$options.getAriaPosInset(index),ref_for:!0},$options.getPTOptions(processedItem,index,"item"),{"data-p-active":$options.isItemActive(processedItem),"data-p-focused":$options.isItemFocused(processedItem),"data-p-disabled":$options.isItemDisabled(processedItem)}),[createBaseVNode("div",mergeProps({class:_ctx.cx("itemContent"),onClick:__name(function($event){return $options.onItemClick($event,processedItem)},"onClick"),onMouseenter:__name(function($event){return $options.onItemMouseEnter($event,processedItem)},"onMouseenter"),onMousemove:__name(function($event){return $options.onItemMouseMove($event,processedItem)},"onMousemove"),ref_for:!0},$options.getPTOptions(processedItem,index,"itemContent")),[$props.templates.item?(openBlock(),createBlock(resolveDynamicComponent($props.templates.item),{key:1,item:processedItem.item,root:$props.root,hasSubmenu:$options.getItemProp(processedItem,"items"),label:$options.getItemLabel(processedItem),props:$options.getMenuItemProps(processedItem,index)},null,8,["item","root","hasSubmenu","label","props"])):withDirectives((openBlock(),createElementBlock("a",mergeProps({key:0,href:$options.getItemProp(processedItem,"url"),class:_ctx.cx("itemLink"),target:$options.getItemProp(processedItem,"target"),tabindex:"-1",ref_for:!0},$options.getPTOptions(processedItem,index,"itemLink")),[$props.templates.itemicon?(openBlock(),createBlock(resolveDynamicComponent($props.templates.itemicon),{key:0,item:processedItem.item,class:normalizeClass(_ctx.cx("itemIcon"))},null,8,["item","class"])):$options.getItemProp(processedItem,"icon")?(openBlock(),createElementBlock("span",mergeProps({key:1,class:[_ctx.cx("itemIcon"),$options.getItemProp(processedItem,"icon")],ref_for:!0},$options.getPTOptions(processedItem,index,"itemIcon")),null,16)):createCommentVNode("",!0),createBaseVNode("span",mergeProps({id:$options.getItemLabelId(processedItem),class:_ctx.cx("itemLabel"),ref_for:!0},$options.getPTOptions(processedItem,index,"itemLabel")),toDisplayString($options.getItemLabel(processedItem)),17,_hoisted_4),$options.getItemProp(processedItem,"items")?(openBlock(),createElementBlock(Fragment,{key:2},[$props.templates.submenuicon?(openBlock(),createBlock(resolveDynamicComponent($props.templates.submenuicon),{key:0,root:$props.root,active:$options.isItemActive(processedItem),class:normalizeClass(_ctx.cx("submenuIcon"))},null,8,["root","active","class"])):(openBlock(),createBlock(resolveDynamicComponent($props.root?"AngleDownIcon":"AngleRightIcon"),mergeProps({key:1,class:_ctx.cx("submenuIcon"),ref_for:!0},$options.getPTOptions(processedItem,index,"submenuIcon")),null,16,["class"]))],64)):createCommentVNode("",!0)],16,_hoisted_3$1)),[[_directive_ripple]])],16,_hoisted_2$2),$options.isItemVisible(processedItem)&&$options.isItemGroup(processedItem)?(openBlock(),createBlock(_component_MenubarSub,{key:0,id:$options.getItemId(processedItem)+"_list",menuId:$props.menuId,role:"menu",style:normalizeStyle(_ctx.sx("submenu",!0,{processedItem})),focusedItemId:$props.focusedItemId,items:processedItem.items,mobileActive:$props.mobileActive,activeItemPath:$props.activeItemPath,templates:$props.templates,level:$props.level+1,"aria-labelledby":$options.getItemLabelId(processedItem),pt:_ctx.pt,unstyled:_ctx.unstyled,onItemClick:_cache[0]||(_cache[0]=function($event){return _ctx.$emit("item-click",$event)}),onItemMouseenter:_cache[1]||(_cache[1]=function($event){return _ctx.$emit("item-mouseenter",$event)}),onItemMousemove:_cache[2]||(_cache[2]=function($event){return _ctx.$emit("item-mousemove",$event)})},null,8,["id","menuId","style","focusedItemId","items","mobileActive","activeItemPath","templates","level","aria-labelledby","pt","unstyled"])):createCommentVNode("",!0)],16,_hoisted_1$1$1)):createCommentVNode("",!0),$options.isItemVisible(processedItem)&&$options.getItemProp(processedItem,"separator")?(openBlock(),createElementBlock("li",mergeProps({key:1,id:$options.getItemId(processedItem),class:[_ctx.cx("separator"),$options.getItemProp(processedItem,"class")],style:$options.getItemProp(processedItem,"style"),role:"separator",ref_for:!0},_ctx.ptm("separator")),null,16,_hoisted_5)):createCommentVNode("",!0)],64)}),128))],16)}__name(render$1,"render$1");script$1.render=render$1;var script={name:"Menubar",extends:script$2,inheritAttrs:!1,emits:["focus","blur"],matchMediaListener:null,data:__name(function(){return{id:this.$attrs.id,mobileActive:!1,focused:!1,focusedItemInfo:{index:-1,level:0,parentKey:""},activeItemPath:[],dirty:!1,query:null,queryMatches:!1}},"data"),watch:{"$attrs.id":__name(function(newValue){this.id=newValue||UniqueComponentId()},"$attrsId"),activeItemPath:__name(function(newPath){isNotEmpty(newPath)?(this.bindOutsideClickListener(),this.bindResizeListener()):(this.unbindOutsideClickListener(),this.unbindResizeListener())},"activeItemPath")},outsideClickListener:null,container:null,menubar:null,mounted:__name(function(){this.id=this.id||UniqueComponentId(),this.bindMatchMediaListener()},"mounted"),beforeUnmount:__name(function(){this.mobileActive=!1,this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindMatchMediaListener(),this.container&&ZIndex.clear(this.container),this.container=null},"beforeUnmount"),methods:{getItemProp:__name(function(item3,name){return item3?resolve(item3[name]):void 0},"getItemProp"),getItemLabel:__name(function(item3){return this.getItemProp(item3,"label")},"getItemLabel"),isItemDisabled:__name(function(item3){return this.getItemProp(item3,"disabled")},"isItemDisabled"),isItemVisible:__name(function(item3){return this.getItemProp(item3,"visible")!==!1},"isItemVisible"),isItemGroup:__name(function(item3){return isNotEmpty(this.getItemProp(item3,"items"))},"isItemGroup"),isItemSeparator:__name(function(item3){return this.getItemProp(item3,"separator")},"isItemSeparator"),getProccessedItemLabel:__name(function(processedItem){return processedItem?this.getItemLabel(processedItem.item):void 0},"getProccessedItemLabel"),isProccessedItemGroup:__name(function(processedItem){return processedItem&&isNotEmpty(processedItem.items)},"isProccessedItemGroup"),toggle:__name(function(event){var _this=this;this.mobileActive?(this.mobileActive=!1,ZIndex.clear(this.menubar),this.hide()):(this.mobileActive=!0,ZIndex.set("menu",this.menubar,this.$primevue.config.zIndex.menu),setTimeout(function(){_this.show()},1)),this.bindOutsideClickListener(),event.preventDefault()},"toggle"),show:__name(function(){focus(this.menubar)},"show"),hide:__name(function(event,isFocus){var _this2=this;this.mobileActive&&(this.mobileActive=!1,setTimeout(function(){focus(_this2.$refs.menubutton)},0)),this.activeItemPath=[],this.focusedItemInfo={index:-1,level:0,parentKey:""},isFocus&&focus(this.menubar),this.dirty=!1},"hide"),onFocus:__name(function(event){this.focused=!0,this.focusedItemInfo=this.focusedItemInfo.index!==-1?this.focusedItemInfo:{index:this.findFirstFocusedItemIndex(),level:0,parentKey:""},this.$emit("focus",event)},"onFocus"),onBlur:__name(function(event){this.focused=!1,this.focusedItemInfo={index:-1,level:0,parentKey:""},this.searchValue="",this.dirty=!1,this.$emit("blur",event)},"onBlur"),onKeyDown:__name(function(event){var metaKey=event.metaKey||event.ctrlKey;switch(event.code){case"ArrowDown":this.onArrowDownKey(event);break;case"ArrowUp":this.onArrowUpKey(event);break;case"ArrowLeft":this.onArrowLeftKey(event);break;case"ArrowRight":this.onArrowRightKey(event);break;case"Home":this.onHomeKey(event);break;case"End":this.onEndKey(event);break;case"Space":this.onSpaceKey(event);break;case"Enter":case"NumpadEnter":this.onEnterKey(event);break;case"Escape":this.onEscapeKey(event);break;case"Tab":this.onTabKey(event);break;case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!metaKey&&isPrintableCharacter(event.key)&&this.searchItems(event,event.key);break}},"onKeyDown"),onItemChange:__name(function(event){var processedItem=event.processedItem,isFocus=event.isFocus;if(!isEmpty(processedItem)){var index=processedItem.index,key=processedItem.key,level=processedItem.level,parentKey=processedItem.parentKey,items=processedItem.items,grouped=isNotEmpty(items),activeItemPath3=this.activeItemPath.filter(function(p){return p.parentKey!==parentKey&&p.parentKey!==key});grouped&&activeItemPath3.push(processedItem),this.focusedItemInfo={index,level,parentKey},this.activeItemPath=activeItemPath3,grouped&&(this.dirty=!0),isFocus&&focus(this.menubar)}},"onItemChange"),onItemClick:__name(function(event){var originalEvent=event.originalEvent,processedItem=event.processedItem,grouped=this.isProccessedItemGroup(processedItem),root11=isEmpty(processedItem.parent),selected=this.isSelected(processedItem);if(selected){var index=processedItem.index,key=processedItem.key,level=processedItem.level,parentKey=processedItem.parentKey;this.activeItemPath=this.activeItemPath.filter(function(p){return key!==p.key&&key.startsWith(p.key)}),this.focusedItemInfo={index,level,parentKey},this.dirty=!root11,focus(this.menubar)}else if(grouped)this.onItemChange(event);else{var rootProcessedItem=root11?processedItem:this.activeItemPath.find(function(p){return p.parentKey===""});this.hide(originalEvent),this.changeFocusedItemIndex(originalEvent,rootProcessedItem?rootProcessedItem.index:-1),this.mobileActive=!1,focus(this.menubar)}},"onItemClick"),onItemMouseEnter:__name(function(event){this.dirty&&this.onItemChange(event)},"onItemMouseEnter"),onItemMouseMove:__name(function(event){this.focused&&this.changeFocusedItemIndex(event,event.processedItem.index)},"onItemMouseMove"),menuButtonClick:__name(function(event){this.toggle(event)},"menuButtonClick"),menuButtonKeydown:__name(function(event){(event.code==="Enter"||event.code==="NumpadEnter"||event.code==="Space")&&this.menuButtonClick(event)},"menuButtonKeydown"),onArrowDownKey:__name(function(event){var processedItem=this.visibleItems[this.focusedItemInfo.index],root11=processedItem?isEmpty(processedItem.parent):null;if(root11){var grouped=this.isProccessedItemGroup(processedItem);grouped&&(this.onItemChange({originalEvent:event,processedItem}),this.focusedItemInfo={index:-1,parentKey:processedItem.key},this.onArrowRightKey(event))}else{var itemIndex=this.focusedItemInfo.index!==-1?this.findNextItemIndex(this.focusedItemInfo.index):this.findFirstFocusedItemIndex();this.changeFocusedItemIndex(event,itemIndex)}event.preventDefault()},"onArrowDownKey"),onArrowUpKey:__name(function(event){var _this3=this,processedItem=this.visibleItems[this.focusedItemInfo.index],root11=isEmpty(processedItem.parent);if(root11){var grouped=this.isProccessedItemGroup(processedItem);if(grouped){this.onItemChange({originalEvent:event,processedItem}),this.focusedItemInfo={index:-1,parentKey:processedItem.key};var itemIndex=this.findLastItemIndex();this.changeFocusedItemIndex(event,itemIndex)}}else{var parentItem=this.activeItemPath.find(function(p){return p.key===processedItem.parentKey});if(this.focusedItemInfo.index===0)this.focusedItemInfo={index:-1,parentKey:parentItem?parentItem.parentKey:""},this.searchValue="",this.onArrowLeftKey(event),this.activeItemPath=this.activeItemPath.filter(function(p){return p.parentKey!==_this3.focusedItemInfo.parentKey});else{var _itemIndex=this.focusedItemInfo.index!==-1?this.findPrevItemIndex(this.focusedItemInfo.index):this.findLastFocusedItemIndex();this.changeFocusedItemIndex(event,_itemIndex)}}event.preventDefault()},"onArrowUpKey"),onArrowLeftKey:__name(function(event){var _this4=this,processedItem=this.visibleItems[this.focusedItemInfo.index],parentItem=processedItem?this.activeItemPath.find(function(p){return p.key===processedItem.parentKey}):null;if(parentItem)this.onItemChange({originalEvent:event,processedItem:parentItem}),this.activeItemPath=this.activeItemPath.filter(function(p){return p.parentKey!==_this4.focusedItemInfo.parentKey}),event.preventDefault();else{var itemIndex=this.focusedItemInfo.index!==-1?this.findPrevItemIndex(this.focusedItemInfo.index):this.findLastFocusedItemIndex();this.changeFocusedItemIndex(event,itemIndex),event.preventDefault()}},"onArrowLeftKey"),onArrowRightKey:__name(function(event){var processedItem=this.visibleItems[this.focusedItemInfo.index],parentItem=processedItem?this.activeItemPath.find(function(p){return p.key===processedItem.parentKey}):null;if(parentItem){var grouped=this.isProccessedItemGroup(processedItem);grouped&&(this.onItemChange({originalEvent:event,processedItem}),this.focusedItemInfo={index:-1,parentKey:processedItem.key},this.onArrowDownKey(event))}else{var itemIndex=this.focusedItemInfo.index!==-1?this.findNextItemIndex(this.focusedItemInfo.index):this.findFirstFocusedItemIndex();this.changeFocusedItemIndex(event,itemIndex),event.preventDefault()}},"onArrowRightKey"),onHomeKey:__name(function(event){this.changeFocusedItemIndex(event,this.findFirstItemIndex()),event.preventDefault()},"onHomeKey"),onEndKey:__name(function(event){this.changeFocusedItemIndex(event,this.findLastItemIndex()),event.preventDefault()},"onEndKey"),onEnterKey:__name(function(event){if(this.focusedItemInfo.index!==-1){var element=findSingle(this.menubar,'li[id="'.concat("".concat(this.focusedItemId),'"]')),anchorElement=element&&findSingle(element,'a[data-pc-section="itemlink"]');anchorElement?anchorElement.click():element&&element.click();var processedItem=this.visibleItems[this.focusedItemInfo.index],grouped=this.isProccessedItemGroup(processedItem);!grouped&&(this.focusedItemInfo.index=this.findFirstFocusedItemIndex())}event.preventDefault()},"onEnterKey"),onSpaceKey:__name(function(event){this.onEnterKey(event)},"onSpaceKey"),onEscapeKey:__name(function(event){if(this.focusedItemInfo.level!==0){var _focusedItemInfo=this.focusedItemInfo;this.hide(event,!1),this.focusedItemInfo={index:Number(_focusedItemInfo.parentKey.split("_")[0]),level:0,parentKey:""}}event.preventDefault()},"onEscapeKey"),onTabKey:__name(function(event){if(this.focusedItemInfo.index!==-1){var processedItem=this.visibleItems[this.focusedItemInfo.index],grouped=this.isProccessedItemGroup(processedItem);!grouped&&this.onItemChange({originalEvent:event,processedItem})}this.hide()},"onTabKey"),bindOutsideClickListener:__name(function(){var _this5=this;this.outsideClickListener||(this.outsideClickListener=function(event){var isOutsideContainer=_this5.container&&!_this5.container.contains(event.target),isOutsideTarget=!(_this5.target&&(_this5.target===event.target||_this5.target.contains(event.target)));isOutsideContainer&&isOutsideTarget&&_this5.hide()},document.addEventListener("click",this.outsideClickListener))},"bindOutsideClickListener"),unbindOutsideClickListener:__name(function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},"unbindOutsideClickListener"),bindResizeListener:__name(function(){var _this6=this;this.resizeListener||(this.resizeListener=function(event){isTouchDevice()||_this6.hide(event,!0),_this6.mobileActive=!1},window.addEventListener("resize",this.resizeListener))},"bindResizeListener"),unbindResizeListener:__name(function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},"unbindResizeListener"),bindMatchMediaListener:__name(function(){var _this7=this;if(!this.matchMediaListener){var query=matchMedia("(max-width: ".concat(this.breakpoint,")"));this.query=query,this.queryMatches=query.matches,this.matchMediaListener=function(){_this7.queryMatches=query.matches,_this7.mobileActive=!1},this.query.addEventListener("change",this.matchMediaListener)}},"bindMatchMediaListener"),unbindMatchMediaListener:__name(function(){this.matchMediaListener&&(this.query.removeEventListener("change",this.matchMediaListener),this.matchMediaListener=null)},"unbindMatchMediaListener"),isItemMatched:__name(function(processedItem){var _this$getProccessedIt;return this.isValidItem(processedItem)&&((_this$getProccessedIt=this.getProccessedItemLabel(processedItem))===null||_this$getProccessedIt===void 0?void 0:_this$getProccessedIt.toLocaleLowerCase().startsWith(this.searchValue.toLocaleLowerCase()))},"isItemMatched"),isValidItem:__name(function(processedItem){return!!processedItem&&!this.isItemDisabled(processedItem.item)&&!this.isItemSeparator(processedItem.item)&&this.isItemVisible(processedItem.item)},"isValidItem"),isValidSelectedItem:__name(function(processedItem){return this.isValidItem(processedItem)&&this.isSelected(processedItem)},"isValidSelectedItem"),isSelected:__name(function(processedItem){return this.activeItemPath.some(function(p){return p.key===processedItem.key})},"isSelected"),findFirstItemIndex:__name(function(){var _this8=this;return this.visibleItems.findIndex(function(processedItem){return _this8.isValidItem(processedItem)})},"findFirstItemIndex"),findLastItemIndex:__name(function(){var _this9=this;return findLastIndex(this.visibleItems,function(processedItem){return _this9.isValidItem(processedItem)})},"findLastItemIndex"),findNextItemIndex:__name(function(index){var _this10=this,matchedItemIndex=index<this.visibleItems.length-1?this.visibleItems.slice(index+1).findIndex(function(processedItem){return _this10.isValidItem(processedItem)}):-1;return matchedItemIndex>-1?matchedItemIndex+index+1:index},"findNextItemIndex"),findPrevItemIndex:__name(function(index){var _this11=this,matchedItemIndex=index>0?findLastIndex(this.visibleItems.slice(0,index),function(processedItem){return _this11.isValidItem(processedItem)}):-1;return matchedItemIndex>-1?matchedItemIndex:index},"findPrevItemIndex"),findSelectedItemIndex:__name(function(){var _this12=this;return this.visibleItems.findIndex(function(processedItem){return _this12.isValidSelectedItem(processedItem)})},"findSelectedItemIndex"),findFirstFocusedItemIndex:__name(function(){var selectedIndex=this.findSelectedItemIndex();return selectedIndex<0?this.findFirstItemIndex():selectedIndex},"findFirstFocusedItemIndex"),findLastFocusedItemIndex:__name(function(){var selectedIndex=this.findSelectedItemIndex();return selectedIndex<0?this.findLastItemIndex():selectedIndex},"findLastFocusedItemIndex"),searchItems:__name(function(event,_char){var _this13=this;this.searchValue=(this.searchValue||"")+_char;var itemIndex=-1,matched=!1;return this.focusedItemInfo.index!==-1?(itemIndex=this.visibleItems.slice(this.focusedItemInfo.index).findIndex(function(processedItem){return _this13.isItemMatched(processedItem)}),itemIndex=itemIndex===-1?this.visibleItems.slice(0,this.focusedItemInfo.index).findIndex(function(processedItem){return _this13.isItemMatched(processedItem)}):itemIndex+this.focusedItemInfo.index):itemIndex=this.visibleItems.findIndex(function(processedItem){return _this13.isItemMatched(processedItem)}),itemIndex!==-1&&(matched=!0),itemIndex===-1&&this.focusedItemInfo.index===-1&&(itemIndex=this.findFirstFocusedItemIndex()),itemIndex!==-1&&this.changeFocusedItemIndex(event,itemIndex),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){_this13.searchValue="",_this13.searchTimeout=null},500),matched},"searchItems"),changeFocusedItemIndex:__name(function(event,index){this.focusedItemInfo.index!==index&&(this.focusedItemInfo.index=index,this.scrollInView())},"changeFocusedItemIndex"),scrollInView:__name(function(){var index=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,id2=index!==-1?"".concat(this.id,"_").concat(index):this.focusedItemId,element=findSingle(this.menubar,'li[id="'.concat(id2,'"]'));element&&element.scrollIntoView&&element.scrollIntoView({block:"nearest",inline:"start"})},"scrollInView"),createProcessedItems:__name(function(items){var _this14=this,level=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,parent=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},parentKey=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",processedItems3=[];return items&&items.forEach(function(item3,index){var key=(parentKey!==""?parentKey+"_":"")+index,newItem={item:item3,index,level,key,parent,parentKey};newItem.items=_this14.createProcessedItems(item3.items,level+1,newItem,key),processedItems3.push(newItem)}),processedItems3},"createProcessedItems"),containerRef:__name(function(el){this.container=el},"containerRef"),menubarRef:__name(function(el){this.menubar=el?el.$el:void 0},"menubarRef")},computed:{processedItems:__name(function(){return this.createProcessedItems(this.model||[])},"processedItems"),visibleItems:__name(function(){var _this15=this,processedItem=this.activeItemPath.find(function(p){return p.key===_this15.focusedItemInfo.parentKey});return processedItem?processedItem.items:this.processedItems},"visibleItems"),focusedItemId:__name(function(){return this.focusedItemInfo.index!==-1?"".concat(this.id).concat(isNotEmpty(this.focusedItemInfo.parentKey)?"_"+this.focusedItemInfo.parentKey:"","_").concat(this.focusedItemInfo.index):null},"focusedItemId")},components:{MenubarSub:script$1,BarsIcon:script$D}};function _typeof(o){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o2){return typeof o2}:function(o2){return o2&&typeof Symbol=="function"&&o2.constructor===Symbol&&o2!==Symbol.prototype?"symbol":typeof o2},_typeof(o)}__name(_typeof,"_typeof");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r2){return Object.getOwnPropertyDescriptor(e,r2).enumerable})),t.push.apply(t,o)}return t}__name(ownKeys,"ownKeys");function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r2){_defineProperty(e,r2,t[r2])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r2){Object.defineProperty(e,r2,Object.getOwnPropertyDescriptor(t,r2))})}return e}__name(_objectSpread,"_objectSpread");function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}__name(_defineProperty,"_defineProperty");function _toPropertyKey(t){var i=_toPrimitive(t,"string");return _typeof(i)=="symbol"?i:i+""}__name(_toPropertyKey,"_toPropertyKey");function _toPrimitive(t,r){if(_typeof(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,r||"default");if(_typeof(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}__name(_toPrimitive,"_toPrimitive");var _hoisted_1$2=["aria-haspopup","aria-expanded","aria-controls","aria-label"];function render(_ctx,_cache,$props,$setup,$data,$options){var _component_BarsIcon=resolveComponent("BarsIcon"),_component_MenubarSub=resolveComponent("MenubarSub");return openBlock(),createElementBlock("div",mergeProps({ref:$options.containerRef,class:_ctx.cx("root")},_ctx.ptmi("root")),[_ctx.$slots.start?(openBlock(),createElementBlock("div",mergeProps({key:0,class:_ctx.cx("start")},_ctx.ptm("start")),[renderSlot(_ctx.$slots,"start")],16)):createCommentVNode("",!0),renderSlot(_ctx.$slots,_ctx.$slots.button?"button":"menubutton",{id:$data.id,class:normalizeClass(_ctx.cx("button")),toggleCallback:__name(function(event){return $options.menuButtonClick(event)},"toggleCallback")},function(){var _ctx$$primevue$config;return[_ctx.model&&_ctx.model.length>0?(openBlock(),createElementBlock("a",mergeProps({key:0,ref:"menubutton",role:"button",tabindex:"0",class:_ctx.cx("button"),"aria-haspopup":!!(_ctx.model.length&&_ctx.model.length>0),"aria-expanded":$data.mobileActive,"aria-controls":$data.id,"aria-label":(_ctx$$primevue$config=_ctx.$primevue.config.locale.aria)===null||_ctx$$primevue$config===void 0?void 0:_ctx$$primevue$config.navigation,onClick:_cache[0]||(_cache[0]=function($event){return $options.menuButtonClick($event)}),onKeydown:_cache[1]||(_cache[1]=function($event){return $options.menuButtonKeydown($event)})},_objectSpread(_objectSpread({},_ctx.buttonProps),_ctx.ptm("button"))),[renderSlot(_ctx.$slots,_ctx.$slots.buttonicon?"buttonicon":"menubuttonicon",{},function(){return[createVNode(_component_BarsIcon,normalizeProps(guardReactiveProps(_ctx.ptm("buttonicon"))),null,16)]})],16,_hoisted_1$2)):createCommentVNode("",!0)]}),createVNode(_component_MenubarSub,{ref:$options.menubarRef,id:$data.id+"_list",role:"menubar",items:$options.processedItems,templates:_ctx.$slots,root:!0,mobileActive:$data.mobileActive,tabindex:"0","aria-activedescendant":$data.focused?$options.focusedItemId:void 0,menuId:$data.id,focusedItemId:$data.focused?$options.focusedItemId:void 0,activeItemPath:$data.activeItemPath,level:0,"aria-labelledby":_ctx.ariaLabelledby,"aria-label":_ctx.ariaLabel,pt:_ctx.pt,unstyled:_ctx.unstyled,onFocus:$options.onFocus,onBlur:$options.onBlur,onKeydown:$options.onKeyDown,onItemClick:$options.onItemClick,onItemMouseenter:$options.onItemMouseEnter,onItemMousemove:$options.onItemMouseMove},null,8,["id","items","templates","mobileActive","aria-activedescendant","menuId","focusedItemId","activeItemPath","aria-labelledby","aria-label","pt","unstyled","onFocus","onBlur","onKeydown","onItemClick","onItemMouseenter","onItemMousemove"]),_ctx.$slots.end?(openBlock(),createElementBlock("div",mergeProps({key:1,class:_ctx.cx("end")},_ctx.ptm("end")),[renderSlot(_ctx.$slots,"end")],16)):createCommentVNode("",!0)],16)}__name(render,"render");script.render=render;const _hoisted_1$1=["href"],_hoisted_2$1={class:"p-menubar-item-label"},_hoisted_3={key:1,class:"ml-auto border border-surface rounded text-muted text-xs text-nowrap p-1 keybinding-tag"},_sfc_main$2=defineComponent({__name:"CommandMenubar",setup(__props){const settingStore=useSettingStore(),dropdownDirection=computed(()=>settingStore.get("Comfy.UseNewMenu")==="Top"?"down":"up"),menuItemsStore=useMenuItemStore(),{t}=useI18n(),translateMenuItem=__name(item3=>{const label=typeof item3.label=="function"?item3.label():item3.label,translatedLabel=label?t(`menuLabels.${normalizeI18nKey(label)}`,label):void 0;return{...item3,label:translatedLabel,items:item3.items?.map(translateMenuItem)}},"translateMenuItem"),translatedItems=computed(()=>menuItemsStore.menuItems.map(translateMenuItem));return(_ctx,_cache)=>(openBlock(),createBlock(unref(script),{model:translatedItems.value,class:"top-menubar border-none p-0 bg-transparent",pt:{rootList:"gap-0 flex-nowrap w-auto",submenu:`dropdown-direction-${dropdownDirection.value}`,item:"relative"}},{item:withCtx(({item:item3,props})=>[createBaseVNode("a",mergeProps({class:"p-menubar-item-link"},props.action,{href:item3.url,target:"_blank"}),[item3.icon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["p-menubar-item-icon",item3.icon])},null,2)):createCommentVNode("",!0),createBaseVNode("span",_hoisted_2$1,toDisplayString(item3.label),1),item3?.comfyCommand?.keybinding?(openBlock(),createElementBlock("span",_hoisted_3,toDisplayString(item3.comfyCommand.keybinding.combo.toString()),1)):createCommentVNode("",!0)],16,_hoisted_1$1)]),_:1},8,["model","pt"]))}}),CommandMenubar=_export_sfc(_sfc_main$2,[["__scopeId","data-v-56df69d2"]]),_withScopeId=__name(n=>(pushScopeId("data-v-fcd5b800"),n=n(),popScopeId(),n),"_withScopeId"),_hoisted_1=_withScopeId(()=>createBaseVNode("h1",{class:"comfyui-logo mx-2"},"ComfyUI",-1)),_hoisted_2={class:"flex-grow min-w-0"},_sfc_main$1=defineComponent({__name:"TopMenubar",setup(__props){const workspaceState=useWorkspaceStore(),settingStore=useSettingStore(),workflowTabsPosition=computed(()=>settingStore.get("Comfy.Workflow.WorkflowTabsPosition")),betaMenuEnabled=computed(()=>settingStore.get("Comfy.UseNewMenu")!=="Disabled"),teleportTarget=computed(()=>settingStore.get("Comfy.UseNewMenu")==="Top"?".comfyui-body-top":".comfyui-body-bottom"),menuRight=ref(null);onMounted(()=>{menuRight.value&&menuRight.value.appendChild(app.menu.element)});const topMenuRef=ref(null);provide("topMenuRef",topMenuRef);const eventBus=useEventBus("topMenu"),isDropZone=ref(!1),isDroppable=ref(!1);return eventBus.on((event,payload)=>{event==="updateHighlight"&&(isDropZone.value=payload.isDragging,isDroppable.value=payload.isOverlapping&&payload.isDragging)}),(_ctx,_cache)=>{const _directive_tooltip=resolveDirective("tooltip");return openBlock(),createBlock(Teleport,{to:teleportTarget.value},[unref(isEmbedded)()?withDirectives((openBlock(),createElementBlock("div",{key:1,ref_key:"topMenuRef",ref:topMenuRef,class:normalizeClass(["comfyui-menu flex items-center",{dropzone:isDropZone.value,"dropzone-active":isDroppable.value}])},[createVNode(Actionbar)],2)),[[vShow,betaMenuEnabled.value&&!unref(workspaceState).focusMode]]):withDirectives((openBlock(),createElementBlock("div",{key:0,ref_key:"topMenuRef",ref:topMenuRef,class:normalizeClass(["comfyui-menu flex items-center",{dropzone:isDropZone.value,"dropzone-active":isDroppable.value}])},[_hoisted_1,createVNode(CommandMenubar),createVNode(unref(script$E),{layout:"vertical",class:"mx-2"}),createBaseVNode("div",_hoisted_2,[workflowTabsPosition.value==="Topbar"?(openBlock(),createBlock(WorkflowTabs,{key:0})):createCommentVNode("",!0)]),createBaseVNode("div",{class:"comfyui-menu-right",ref_key:"menuRight",ref:menuRight},null,512),createVNode(Actionbar),createVNode(_sfc_main$3,{class:"flex-shrink-0"}),withDirectives(createVNode(unref(script$d),{class:"flex-shrink-0",icon:"pi pi-bars",severity:"secondary",text:"","aria-label":_ctx.$t("menu.hideMenu"),onClick:_cache[0]||(_cache[0]=$event=>unref(workspaceState).focusMode=!0),onContextmenu:unref(showNativeMenu)},null,8,["aria-label","onContextmenu"]),[[_directive_tooltip,{value:_ctx.$t("menu.hideMenu"),showDelay:300}]])],2)),[[vShow,betaMenuEnabled.value&&!unref(workspaceState).focusMode]])],8,["to"])}}}),TopMenubar=_export_sfc(_sfc_main$1,[["__scopeId","data-v-fcd5b800"]]);var LatentPreviewMethod=(LatentPreviewMethod2=>(LatentPreviewMethod2.NoPreviews="none",LatentPreviewMethod2.Auto="auto",LatentPreviewMethod2.Latent2RGB="latent2rgb",LatentPreviewMethod2.TAESD="taesd",LatentPreviewMethod2))(LatentPreviewMethod||{}),LogLevel=(LogLevel2=>(LogLevel2.DEBUG="DEBUG",LogLevel2.INFO="INFO",LogLevel2.WARNING="WARNING",LogLevel2.ERROR="ERROR",LogLevel2.CRITICAL="CRITICAL",LogLevel2))(LogLevel||{}),HashFunction=(HashFunction2=>(HashFunction2.MD5="md5",HashFunction2.SHA1="sha1",HashFunction2.SHA256="sha256",HashFunction2.SHA512="sha512",HashFunction2))(HashFunction||{}),AutoLaunch=(AutoLaunch2=>(AutoLaunch2.Auto="auto",AutoLaunch2.Disable="disable",AutoLaunch2.Enable="enable",AutoLaunch2))(AutoLaunch||{}),CudaMalloc=(CudaMalloc2=>(CudaMalloc2.Auto="auto",CudaMalloc2.Disable="disable",CudaMalloc2.Enable="enable",CudaMalloc2))(CudaMalloc||{}),FloatingPointPrecision=(FloatingPointPrecision2=>(FloatingPointPrecision2.AUTO="auto",FloatingPointPrecision2.FP64="fp64",FloatingPointPrecision2.FP32="fp32",FloatingPointPrecision2.FP16="fp16",FloatingPointPrecision2.BF16="bf16",FloatingPointPrecision2.FP8E4M3FN="fp8_e4m3fn",FloatingPointPrecision2.FP8E5M2="fp8_e5m2",FloatingPointPrecision2))(FloatingPointPrecision||{}),CrossAttentionMethod=(CrossAttentionMethod2=>(CrossAttentionMethod2.Auto="auto",CrossAttentionMethod2.Split="split",CrossAttentionMethod2.Quad="quad",CrossAttentionMethod2.Pytorch="pytorch",CrossAttentionMethod2))(CrossAttentionMethod||{}),VramManagement=(VramManagement2=>(VramManagement2.Auto="auto",VramManagement2.GPUOnly="gpu-only",VramManagement2.HighVram="highvram",VramManagement2.NormalVram="normalvram",VramManagement2.LowVram="lowvram",VramManagement2.NoVram="novram",VramManagement2.CPU="cpu",VramManagement2))(VramManagement||{});const WEB_ONLY_CONFIG_ITEMS=[{id:"auto-launch",name:"Automatically opens in the browser on startup",category:["Launch"],type:"combo",options:Object.values(AutoLaunch),defaultValue:AutoLaunch.Auto,getValue:__name(value=>{switch(value){case AutoLaunch.Auto:return{};case AutoLaunch.Enable:return{"auto-launch":!0};case AutoLaunch.Disable:return{"disable-auto-launch":!0}}},"getValue")}],SERVER_CONFIG_ITEMS=[{id:"listen",name:"Host: The IP address to listen on",category:["Network"],type:"text",defaultValue:"127.0.0.1"},{id:"port",name:"Port: The port to listen on",category:["Network"],type:"number",defaultValue:8e3},{id:"tls-keyfile",name:"TLS Key File: Path to TLS key file for HTTPS",category:["Network"],type:"text",defaultValue:""},{id:"tls-certfile",name:"TLS Certificate File: Path to TLS certificate file for HTTPS",category:["Network"],type:"text",defaultValue:""},{id:"enable-cors-header",name:'Enable CORS header: Use "*" for all origins or specify domain',category:["Network"],type:"text",defaultValue:""},{id:"max-upload-size",name:"Maximum upload size (MB)",category:["Network"],type:"number",defaultValue:100},{id:"cuda-device",name:"CUDA device index to use",category:["CUDA"],type:"number",defaultValue:null},{id:"cuda-malloc",name:"Use CUDA malloc for memory allocation",category:["CUDA"],type:"combo",options:Object.values(CudaMalloc),defaultValue:CudaMalloc.Auto,getValue:__name(value=>{switch(value){case CudaMalloc.Auto:return{};case CudaMalloc.Enable:return{"cuda-malloc":!0};case CudaMalloc.Disable:return{"disable-cuda-malloc":!0}}},"getValue")},{id:"global-precision",name:"Global floating point precision",category:["Inference"],type:"combo",options:[FloatingPointPrecision.AUTO,FloatingPointPrecision.FP32,FloatingPointPrecision.FP16],defaultValue:FloatingPointPrecision.AUTO,tooltip:"Global floating point precision",getValue:__name(value=>{switch(value){case FloatingPointPrecision.AUTO:return{};case FloatingPointPrecision.FP32:return{"force-fp32":!0};case FloatingPointPrecision.FP16:return{"force-fp16":!0};default:return{}}},"getValue")},{id:"unet-precision",name:"UNET precision",category:["Inference"],type:"combo",options:[FloatingPointPrecision.AUTO,FloatingPointPrecision.FP64,FloatingPointPrecision.FP32,FloatingPointPrecision.FP16,FloatingPointPrecision.BF16,FloatingPointPrecision.FP8E4M3FN,FloatingPointPrecision.FP8E5M2],defaultValue:FloatingPointPrecision.AUTO,tooltip:"UNET precision",getValue:__name(value=>{switch(value){case FloatingPointPrecision.AUTO:return{};default:return{[`${value.toLowerCase()}-unet`]:!0}}},"getValue")},{id:"vae-precision",name:"VAE precision",category:["Inference"],type:"combo",options:[FloatingPointPrecision.AUTO,FloatingPointPrecision.FP16,FloatingPointPrecision.FP32,FloatingPointPrecision.BF16],defaultValue:FloatingPointPrecision.AUTO,tooltip:"VAE precision",getValue:__name(value=>{switch(value){case FloatingPointPrecision.AUTO:return{};default:return{[`${value.toLowerCase()}-vae`]:!0}}},"getValue")},{id:"cpu-vae",name:"Run VAE on CPU",category:["Inference"],type:"boolean",defaultValue:!1},{id:"text-encoder-precision",name:"Text Encoder precision",category:["Inference"],type:"combo",options:[FloatingPointPrecision.AUTO,FloatingPointPrecision.FP8E4M3FN,FloatingPointPrecision.FP8E5M2,FloatingPointPrecision.FP16,FloatingPointPrecision.FP32],defaultValue:FloatingPointPrecision.AUTO,tooltip:"Text Encoder precision",getValue:__name(value=>{switch(value){case FloatingPointPrecision.AUTO:return{};default:return{[`${value.toLowerCase()}-text-enc`]:!0}}},"getValue")},{id:"force-channels-last",name:"Force channels-last memory format",category:["Memory"],type:"boolean",defaultValue:!1},{id:"directml",name:"DirectML device index",category:["Memory"],type:"number",defaultValue:null},{id:"disable-ipex-optimize",name:"Disable IPEX optimization",category:["Memory"],type:"boolean",defaultValue:!1},{id:"preview-method",name:"Method used for latent previews",category:["Preview"],type:"combo",options:Object.values(LatentPreviewMethod),defaultValue:LatentPreviewMethod.NoPreviews},{id:"preview-size",name:"Size of preview images",category:["Preview"],type:"slider",defaultValue:512,attrs:{min:128,max:2048,step:128}},{id:"cache-classic",name:"Use classic cache system",category:["Cache"],type:"boolean",defaultValue:!1},{id:"cache-lru",name:"Use LRU caching with a maximum of N node results cached.",category:["Cache"],type:"number",defaultValue:null,tooltip:"May use more RAM/VRAM."},{id:"cross-attention-method",name:"Cross attention method",category:["Attention"],type:"combo",options:Object.values(CrossAttentionMethod),defaultValue:CrossAttentionMethod.Auto,getValue:__name(value=>{switch(value){case CrossAttentionMethod.Auto:return{};default:return{[`use-${value.toLowerCase()}-cross-attention`]:!0}}},"getValue")},{id:"disable-xformers",name:"Disable xFormers optimization",type:"boolean",defaultValue:!1},{id:"force-upcast-attention",name:"Force attention upcast",category:["Attention"],type:"boolean",defaultValue:!1},{id:"dont-upcast-attention",name:"Prevent attention upcast",category:["Attention"],type:"boolean",defaultValue:!1},{id:"vram-management",name:"VRAM management mode",category:["Memory"],type:"combo",options:Object.values(VramManagement),defaultValue:VramManagement.Auto,getValue:__name(value=>{switch(value){case VramManagement.Auto:return{};default:return{[value]:!0}}},"getValue")},{id:"reserve-vram",name:"Reserved VRAM (GB)",category:["Memory"],type:"number",defaultValue:null,tooltip:"Set the amount of vram in GB you want to reserve for use by your OS/other software. By default some amount is reverved depending on your OS."},{id:"default-hashing-function",name:"Default hashing function for model files",type:"combo",options:Object.values(HashFunction),defaultValue:HashFunction.SHA256},{id:"disable-smart-memory",name:"Disable smart memory management",tooltip:"Force ComfyUI to aggressively offload to regular ram instead of keeping models in vram when it can.",category:["Memory"],type:"boolean",defaultValue:!1},{id:"deterministic",name:"Make pytorch use slower deterministic algorithms when it can.",type:"boolean",defaultValue:!1,tooltip:"Note that this might not make images deterministic in all cases."},{id:"fast",name:"Enable some untested and potentially quality deteriorating optimizations.",type:"boolean",defaultValue:!1},{id:"dont-print-server",name:"Don't print server output to console.",type:"boolean",defaultValue:!1},{id:"disable-metadata",name:"Disable saving prompt metadata in files.",type:"boolean",defaultValue:!1},{id:"disable-all-custom-nodes",name:"Disable loading all custom nodes.",type:"boolean",defaultValue:!1},{id:"log-level",name:"Logging verbosity level",type:"combo",options:Object.values(LogLevel),defaultValue:LogLevel.INFO,getValue:__name(value=>({verbose:value}),"getValue")},{id:"input-directory",name:"Input directory",category:["Directories"],type:"text",defaultValue:""},{id:"output-directory",name:"Output directory",category:["Directories"],type:"text",defaultValue:""}];function useCoreCommands(){const workflowService=useWorkflowService(),workflowStore=useWorkflowStore(),dialogService=useDialogService(),colorPaletteStore=useColorPaletteStore(),getTracker=__name(()=>workflowStore.activeWorkflow?.changeTracker,"getTracker"),getSelectedNodes=__name(()=>{const selectedNodes=app.canvas.selected_nodes,result=[];if(selectedNodes)for(const i in selectedNodes){const node=selectedNodes[i];result.push(node)}return result},"getSelectedNodes"),toggleSelectedNodesMode=__name(mode=>{getSelectedNodes().forEach(node=>{node.mode===mode?node.mode=LGraphEventMode.ALWAYS:node.mode=mode})},"toggleSelectedNodesMode");return[{id:"Comfy.NewBlankWorkflow",icon:"pi pi-plus",label:"New Blank Workflow",menubarLabel:"New",function:__name(()=>workflowService.loadBlankWorkflow(),"function")},{id:"Comfy.OpenWorkflow",icon:"pi pi-folder-open",label:"Open Workflow",menubarLabel:"Open",function:__name(()=>{app.ui.loadFile()},"function")},{id:"Comfy.LoadDefaultWorkflow",icon:"pi pi-code",label:"Load Default Workflow",function:__name(()=>workflowService.loadDefaultWorkflow(),"function")},{id:"Comfy.SaveWorkflow",icon:"pi pi-save",label:"Save Workflow",menubarLabel:"Save",function:__name(async()=>{const workflow=useWorkflowStore().activeWorkflow;workflow&&await workflowService.saveWorkflow(workflow)},"function")},{id:"Comfy.SaveWorkflowAs",icon:"pi pi-save",label:"Save Workflow As",menubarLabel:"Save As",function:__name(async()=>{const workflow=useWorkflowStore().activeWorkflow;workflow&&await workflowService.saveWorkflowAs(workflow)},"function")},{id:"Comfy.ExportWorkflow",icon:"pi pi-download",label:"Export Workflow",menubarLabel:"Export",function:__name(()=>{workflowService.exportWorkflow("workflow","workflow")},"function")},{id:"Comfy.ExportWorkflowAPI",icon:"pi pi-download",label:"Export Workflow (API Format)",menubarLabel:"Export (API)",function:__name(()=>{workflowService.exportWorkflow("workflow_api","output")},"function")},{id:"Comfy.Undo",icon:"pi pi-undo",label:"Undo",function:__name(async()=>{await getTracker()?.undo?.()},"function")},{id:"Comfy.Redo",icon:"pi pi-refresh",label:"Redo",function:__name(async()=>{await getTracker()?.redo?.()},"function")},{id:"Comfy.ClearWorkflow",icon:"pi pi-trash",label:"Clear Workflow",function:__name(()=>{(!useSettingStore().get("Comfy.ComfirmClear")||confirm("Clear workflow?"))&&(app.clean(),app.graph.clear(),api.dispatchCustomEvent("graphCleared"))},"function")},{id:"Comfy.Canvas.ResetView",icon:"pi pi-expand",label:"Reset View",function:__name(()=>{app.resetView()},"function")},{id:"Comfy.OpenClipspace",icon:"pi pi-clipboard",label:"Clipspace",function:__name(()=>{app.openClipspace()},"function")},{id:"Comfy.RefreshNodeDefinitions",icon:"pi pi-refresh",label:"Refresh Node Definitions",function:__name(async()=>{await app.refreshComboInNodes()},"function")},{id:"Comfy.Interrupt",icon:"pi pi-stop",label:"Interrupt",function:__name(async()=>{await api.interrupt(),useToastStore().add({severity:"info",summary:"Interrupted",detail:"Execution has been interrupted",life:1e3})},"function")},{id:"Comfy.ClearPendingTasks",icon:"pi pi-stop",label:"Clear Pending Tasks",function:__name(async()=>{await useQueueStore().clear(["queue"]),useToastStore().add({severity:"info",summary:"Confirmed",detail:"Pending tasks deleted",life:3e3})},"function")},{id:"Comfy.BrowseTemplates",icon:"pi pi-folder-open",label:"Browse Templates",function:__name(()=>{dialogService.showTemplateWorkflowsDialog()},"function")},{id:"Comfy.Canvas.ZoomIn",icon:"pi pi-plus",label:"Zoom In",function:__name(()=>{const ds=app.canvas.ds;ds.changeScale(ds.scale*1.1,ds.element?[ds.element.width/2,ds.element.height/2]:void 0),app.canvas.setDirty(!0,!0)},"function")},{id:"Comfy.Canvas.ZoomOut",icon:"pi pi-minus",label:"Zoom Out",function:__name(()=>{const ds=app.canvas.ds;ds.changeScale(ds.scale/1.1,ds.element?[ds.element.width/2,ds.element.height/2]:void 0),app.canvas.setDirty(!0,!0)},"function")},{id:"Comfy.Canvas.FitView",icon:"pi pi-expand",label:"Fit view to selected nodes",function:__name(()=>{if(app.canvas.empty){useToastStore().add({severity:"error",summary:"Empty canvas",life:3e3});return}app.canvas.fitViewToSelectionAnimated()},"function")},{id:"Comfy.Canvas.ToggleLock",icon:"pi pi-lock",label:"Canvas Toggle Lock",function:__name(()=>{app.canvas.read_only=!app.canvas.read_only},"function")},{id:"Comfy.Canvas.ToggleLinkVisibility",icon:"pi pi-eye",label:"Canvas Toggle Link Visibility",versionAdded:"1.3.6",function:(()=>{const settingStore=useSettingStore();let lastLinksRenderMode=LiteGraph.SPLINE_LINK;return()=>{const currentMode=settingStore.get("Comfy.LinkRenderMode");currentMode===LiteGraph.HIDDEN_LINK?settingStore.set("Comfy.LinkRenderMode",lastLinksRenderMode):(lastLinksRenderMode=currentMode,settingStore.set("Comfy.LinkRenderMode",LiteGraph.HIDDEN_LINK))}})()},{id:"Comfy.QueuePrompt",icon:"pi pi-play",label:"Queue Prompt",versionAdded:"1.3.7",function:__name(()=>{const batchCount=useQueueSettingsStore().batchCount;app.queuePrompt(0,batchCount)},"function")},{id:"Comfy.QueuePromptFront",icon:"pi pi-play",label:"Queue Prompt (Front)",versionAdded:"1.3.7",function:__name(()=>{const batchCount=useQueueSettingsStore().batchCount;app.queuePrompt(-1,batchCount)},"function")},{id:"Comfy.ShowSettingsDialog",icon:"pi pi-cog",label:"Show Settings Dialog",versionAdded:"1.3.7",function:__name(()=>{dialogService.showSettingsDialog()},"function")},{id:"Comfy.Graph.GroupSelectedNodes",icon:"pi pi-sitemap",label:"Group Selected Nodes",versionAdded:"1.3.7",function:__name(()=>{const{canvas}=app;if(!canvas.selectedItems?.size){useToastStore().add({severity:"error",summary:"Nothing to group",detail:"Please select the nodes (or other groups) to create a group for",life:3e3});return}const group=new LGraphGroup,padding=useSettingStore().get("Comfy.GroupSelectedNodes.Padding");group.resizeTo(canvas.selectedItems,padding),canvas.graph.add(group),useTitleEditorStore().titleEditorTarget=group},"function")},{id:"Workspace.NextOpenedWorkflow",icon:"pi pi-step-forward",label:"Next Opened Workflow",versionAdded:"1.3.9",function:__name(()=>{workflowService.loadNextOpenedWorkflow()},"function")},{id:"Workspace.PreviousOpenedWorkflow",icon:"pi pi-step-backward",label:"Previous Opened Workflow",versionAdded:"1.3.9",function:__name(()=>{workflowService.loadPreviousOpenedWorkflow()},"function")},{id:"Comfy.Canvas.ToggleSelectedNodes.Mute",icon:"pi pi-volume-off",label:"Mute/Unmute Selected Nodes",versionAdded:"1.3.11",function:__name(()=>{toggleSelectedNodesMode(LGraphEventMode.NEVER)},"function")},{id:"Comfy.Canvas.ToggleSelectedNodes.Bypass",icon:"pi pi-shield",label:"Bypass/Unbypass Selected Nodes",versionAdded:"1.3.11",function:__name(()=>{toggleSelectedNodesMode(LGraphEventMode.BYPASS)},"function")},{id:"Comfy.Canvas.ToggleSelectedNodes.Pin",icon:"pi pi-pin",label:"Pin/Unpin Selected Nodes",versionAdded:"1.3.11",function:__name(()=>{getSelectedNodes().forEach(node=>{node.pin(!node.pinned)})},"function")},{id:"Comfy.Canvas.ToggleSelected.Pin",icon:"pi pi-pin",label:"Pin/Unpin Selected Items",versionAdded:"1.3.33",function:__name(()=>{for(const item3 of app.canvas.selectedItems)(item3 instanceof LGraphNode||item3 instanceof LGraphGroup)&&item3.pin(!item3.pinned)},"function")},{id:"Comfy.Canvas.ToggleSelectedNodes.Collapse",icon:"pi pi-minus",label:"Collapse/Expand Selected Nodes",versionAdded:"1.3.11",function:__name(()=>{getSelectedNodes().forEach(node=>{node.collapse()})},"function")},{id:"Comfy.ToggleTheme",icon:"pi pi-moon",label:"Toggle Theme (Dark/Light)",versionAdded:"1.3.12",function:(()=>{let previousDarkTheme=DEFAULT_DARK_COLOR_PALETTE.id,previousLightTheme=DEFAULT_LIGHT_COLOR_PALETTE.id;return()=>{const settingStore=useSettingStore(),theme10=colorPaletteStore.completedActivePalette;theme10.light_theme?(previousLightTheme=theme10.id,settingStore.set("Comfy.ColorPalette",previousDarkTheme)):(previousDarkTheme=theme10.id,settingStore.set("Comfy.ColorPalette",previousLightTheme))}})()},{id:"Workspace.ToggleBottomPanel",icon:"pi pi-list",label:"Toggle Bottom Panel",versionAdded:"1.3.22",function:__name(()=>{useBottomPanelStore().toggleBottomPanel()},"function")},{id:"Workspace.ToggleFocusMode",icon:"pi pi-eye",label:"Toggle Focus Mode",versionAdded:"1.3.27",function:__name(()=>{useWorkspaceStore().toggleFocusMode()},"function")},{id:"Comfy.Graph.FitGroupToContents",icon:"pi pi-expand",label:"Fit Group To Contents",versionAdded:"1.4.9",function:__name(()=>{for(const group of app.canvas.selectedItems)if(group instanceof LGraphGroup){group.recomputeInsideNodes();const padding=useSettingStore().get("Comfy.GroupSelectedNodes.Padding");group.resizeTo(group.children,padding),app.graph.change()}},"function")},{id:"Comfy.Help.OpenComfyUIIssues",icon:"pi pi-github",label:"Open ComfyUI Issues",menubarLabel:"ComfyUI Issues",versionAdded:"1.5.5",function:__name(()=>{window.open("https://github.com/comfyanonymous/ComfyUI/issues","_blank")},"function")},{id:"Comfy.Help.OpenComfyUIDocs",icon:"pi pi-info-circle",label:"Open ComfyUI Docs",menubarLabel:"ComfyUI Docs",versionAdded:"1.5.5",function:__name(()=>{window.open("https://docs.comfy.org/","_blank")},"function")},{id:"Comfy.Help.OpenComfyOrgDiscord",icon:"pi pi-discord",label:"Open Comfy-Org Discord",menubarLabel:"Comfy-Org Discord",versionAdded:"1.5.5",function:__name(()=>{window.open("https://www.comfy.org/discord","_blank")},"function")},{id:"Workspace.SearchBox.Toggle",icon:"pi pi-search",label:"Toggle Search Box",versionAdded:"1.5.7",function:__name(()=>{useSearchBoxStore().toggleVisible()},"function")},{id:"Comfy.Help.AboutComfyUI",icon:"pi pi-info-circle",label:"Open About ComfyUI",menubarLabel:"About ComfyUI",versionAdded:"1.6.4",function:__name(()=>{dialogService.showSettingsDialog("about")},"function")},{id:"Comfy.DuplicateWorkflow",icon:"pi pi-clone",label:"Duplicate Current Workflow",versionAdded:"1.6.15",function:__name(()=>{workflowService.duplicateWorkflow(workflowStore.activeWorkflow)},"function")},{id:"Workspace.CloseWorkflow",icon:"pi pi-times",label:"Close Current Workflow",versionAdded:"1.7.3",function:__name(()=>{workflowStore.activeWorkflow&&workflowService.closeWorkflow(workflowStore.activeWorkflow)},"function")}]}__name(useCoreCommands,"useCoreCommands");function setupAutoQueueHandler(){const queueCountStore=useQueuePendingTaskCountStore(),queueSettingsStore=useQueueSettingsStore();let graphHasChanged=!1,internalCount=0;api.addEventListener("graphChanged",()=>{queueSettingsStore.mode==="change"&&(internalCount?graphHasChanged=!0:(graphHasChanged=!1,app.queuePrompt(0,queueSettingsStore.batchCount),internalCount++))}),queueCountStore.$subscribe(()=>{internalCount=queueCountStore.count,!internalCount&&!app.lastExecutionError&&(queueSettingsStore.mode==="instant"||queueSettingsStore.mode==="change"&&graphHasChanged)&&(graphHasChanged=!1,app.queuePrompt(0,queueSettingsStore.batchCount))},{detached:!0})}__name(setupAutoQueueHandler,"setupAutoQueueHandler");const _sfc_main=defineComponent({__name:"GraphView",setup(__props){setupAutoQueueHandler();const{t}=useI18n(),toast=useToast(),settingStore=useSettingStore(),executionStore=useExecutionStore(),colorPaletteStore=useColorPaletteStore();watch(()=>colorPaletteStore.completedActivePalette,newTheme=>{const DARK_THEME_CLASS="dark-theme";newTheme.light_theme?document.body.classList.remove(DARK_THEME_CLASS):document.body.classList.add(DARK_THEME_CLASS)},{immediate:!0}),watchEffect(()=>{const fontSize=settingStore.get("Comfy.TextareaWidget.FontSize");document.documentElement.style.setProperty("--comfy-textarea-font-size",`${fontSize}px`)}),watchEffect(()=>{const padding=settingStore.get("Comfy.TreeExplorer.ItemPadding");document.documentElement.style.setProperty("--comfy-tree-explorer-item-padding",`${padding}px`)}),watchEffect(()=>{const locale=settingStore.get("Comfy.Locale");locale&&(i18n.global.locale.value=locale)}),watchEffect(()=>{settingStore.get("Comfy.UseNewMenu")==="Disabled"?(app.ui.menuContainer.style.setProperty("display","block"),app.ui.restoreMenuPosition()):app.ui.menuContainer.style.setProperty("display","none")}),watchEffect(()=>{useQueueStore().maxHistoryItems=settingStore.get("Comfy.Queue.MaxHistoryItems")});const init=__name(()=>{const coreCommands=useCoreCommands();useCommandStore().registerCommands(coreCommands),useMenuItemStore().registerCoreMenuCommands(),useKeybindingService().registerCoreKeybindings(),useSidebarTabStore().registerCoreSidebarTabs(),useBottomPanelStore().registerCoreBottomPanelTabs(),app.extensionManager=useWorkspaceStore()},"init"),queuePendingTaskCountStore=useQueuePendingTaskCountStore(),onStatus=__name(e=>{queuePendingTaskCountStore.update(e)},"onStatus"),reconnectingMessage={severity:"error",summary:t("g.reconnecting")},onReconnecting=__name(()=>{toast.remove(reconnectingMessage),toast.add(reconnectingMessage)},"onReconnecting"),onReconnected=__name(()=>{toast.remove(reconnectingMessage),toast.add({severity:"success",summary:t("g.reconnected"),life:2e3})},"onReconnected");onMounted(()=>{api.addEventListener("status",onStatus),api.addEventListener("reconnecting",onReconnecting),api.addEventListener("reconnected",onReconnected),executionStore.bindExecutionEvents();try{init()}catch(e){console.error("Failed to init ComfyUI frontend",e)}}),onBeforeUnmount(()=>{api.removeEventListener("status",onStatus),api.removeEventListener("reconnecting",onReconnecting),api.removeEventListener("reconnected",onReconnected),executionStore.unbindExecutionEvents()}),useEventListener(window,"keydown",useKeybindingService().keybindHandler);const{wrapWithErrorHandling,wrapWithErrorHandlingAsync}=useErrorHandling(),onGraphReady=__name(()=>{requestIdleCallback(()=>{wrapWithErrorHandling(useKeybindingService().registerUserKeybindings)(),wrapWithErrorHandling(useServerConfigStore().loadServerConfig)(SERVER_CONFIG_ITEMS,settingStore.get("Comfy.Server.ServerConfigValues")),wrapWithErrorHandlingAsync(useModelStore().loadModelFolders)(),wrapWithErrorHandlingAsync(useNodeFrequencyStore().loadNodeFrequencies)(),useNodeDefStore().nodeSearchService.endsWithFilterStartSequence("")},{timeout:1e3})},"onGraphReady");return(_ctx,_cache)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(TopMenubar),createVNode(_sfc_main$8,{onReady:onGraphReady}),createVNode(_sfc_main$7),createVNode(_sfc_main$s),createVNode(_sfc_main$u),createVNode(MenuHamburger)],64))}});export{_sfc_main as default};
//# sourceMappingURL=GraphView-CaKHnRS3.js.map
