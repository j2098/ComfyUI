var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{d as defineComponent,I as useI18n,T as ref,br as ProgressStatus,p as onMounted,o as openBlock,y as createBlock,z as withCtx,m as createBaseVNode,a8 as createTextVNode,E as toDisplayString,j as unref,f as createElementBlock,B as createCommentVNode,k as createVNode,l as script,i as withDirectives,v as vShow,bs as BaseTerminal,bc as electronAPI,_ as _export_sfc}from"./index-C5iPCN6D.js";import{_ as _sfc_main$1}from"./BaseViewTemplate-BkEqWCeW.js";const _hoisted_1={class:"flex flex-col w-full h-full items-center"},_hoisted_2={class:"text-2xl font-bold"},_hoisted_3={key:0},_hoisted_4={key:0,class:"flex flex-col items-center gap-4"},_hoisted_5={class:"flex items-center my-4 gap-2"},_sfc_main=defineComponent({__name:"ServerStartView",setup(__props){const electron=electronAPI(),{t}=useI18n(),status=ref(ProgressStatus.INITIAL_STATE),electronVersion=ref("");let xterm;const terminalVisible=ref(!0),updateProgress=__name(({status:newStatus})=>{status.value=newStatus,newStatus===ProgressStatus.ERROR?terminalVisible.value=!1:xterm?.clear()},"updateProgress"),terminalCreated=__name(({terminal,useAutoSize},root)=>{xterm=terminal,useAutoSize({root,autoRows:!0,autoCols:!0}),electron.onLogMessage(message=>{terminal.write(message)}),terminal.options.cursorBlink=!1,terminal.options.disableStdin=!0,terminal.options.cursorInactiveStyle="block"},"terminalCreated"),reinstall=__name(()=>electron.reinstall(),"reinstall"),reportIssue=__name(()=>{window.open("https://forum.comfy.org/c/v1-feedback/","_blank")},"reportIssue"),openLogs=__name(()=>electron.openLogsFolder(),"openLogs");return onMounted(async()=>{electron.sendReady(),electron.onProgressUpdate(updateProgress),electronVersion.value=await electron.getElectronVersion()}),(_ctx,_cache)=>(openBlock(),createBlock(_sfc_main$1,{dark:"",class:"flex-col"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1,[createBaseVNode("h2",_hoisted_2,[createTextVNode(toDisplayString(unref(t)(`serverStart.process.${status.value}`))+" ",1),status.value===unref(ProgressStatus).ERROR?(openBlock(),createElementBlock("span",_hoisted_3," v"+toDisplayString(electronVersion.value),1)):createCommentVNode("",!0)]),status.value===unref(ProgressStatus).ERROR?(openBlock(),createElementBlock("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,[createVNode(unref(script),{icon:"pi pi-flag",severity:"secondary",label:unref(t)("serverStart.reportIssue"),onClick:reportIssue},null,8,["label"]),createVNode(unref(script),{icon:"pi pi-file",severity:"secondary",label:unref(t)("serverStart.openLogs"),onClick:openLogs},null,8,["label"]),createVNode(unref(script),{icon:"pi pi-refresh",label:unref(t)("serverStart.reinstall"),onClick:reinstall},null,8,["label"])]),terminalVisible.value?createCommentVNode("",!0):(openBlock(),createBlock(unref(script),{key:0,icon:"pi pi-search",severity:"secondary",label:unref(t)("serverStart.showTerminal"),onClick:_cache[0]||(_cache[0]=$event=>terminalVisible.value=!0)},null,8,["label"]))])):createCommentVNode("",!0),withDirectives(createVNode(BaseTerminal,{onCreated:terminalCreated},null,512),[[vShow,terminalVisible.value]])])]),_:1}))}}),ServerStartView=_export_sfc(_sfc_main,[["__scopeId","data-v-e6ba9633"]]);export{ServerStartView as default};
//# sourceMappingURL=ServerStartView-pj5FnHdZ.js.map
